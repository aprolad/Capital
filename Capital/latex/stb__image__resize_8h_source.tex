\hypertarget{stb__image__resize_8h_source}{}\doxysection{stb\+\_\+image\+\_\+resize.\+h}
\label{stb__image__resize_8h_source}\index{Source/Utility/stb\_image\_resize.h@{Source/Utility/stb\_image\_resize.h}}

\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{comment}{/*\ stb\_image\_resize\ -\/\ v0.97\ -\/\ public\ domain\ image\ resizing}}
\DoxyCodeLine{00002\ \textcolor{comment}{\ \ \ by\ Jorge\ L\ Rodriguez\ (@VinoBS)\ -\/\ 2014}}
\DoxyCodeLine{00003\ \textcolor{comment}{\ \ \ http://github.com/nothings/stb}}
\DoxyCodeLine{00004\ \textcolor{comment}{}}
\DoxyCodeLine{00005\ \textcolor{comment}{\ \ \ Written\ with\ emphasis\ on\ usability,\ portability,\ and\ efficiency.\ (No}}
\DoxyCodeLine{00006\ \textcolor{comment}{\ \ \ SIMD\ or\ threads,\ so\ it\ be\ easily\ outperformed\ by\ libs\ that\ use\ those.)}}
\DoxyCodeLine{00007\ \textcolor{comment}{\ \ \ Only\ scaling\ and\ translation\ is\ supported,\ no\ rotations\ or\ shears.}}
\DoxyCodeLine{00008\ \textcolor{comment}{\ \ \ Easy\ API\ downsamples\ w/Mitchell\ filter,\ upsamples\ w/cubic\ interpolation.}}
\DoxyCodeLine{00009\ \textcolor{comment}{}}
\DoxyCodeLine{00010\ \textcolor{comment}{\ \ \ COMPILING\ \&\ LINKING}}
\DoxyCodeLine{00011\ \textcolor{comment}{\ \ \ \ \ \ In\ one\ C/C++\ file\ that\ \#includes\ this\ file,\ do\ this:}}
\DoxyCodeLine{00012\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \#define\ STB\_IMAGE\_RESIZE\_IMPLEMENTATION}}
\DoxyCodeLine{00013\ \textcolor{comment}{\ \ \ \ \ \ before\ the\ \#include.\ That\ will\ create\ the\ implementation\ in\ that\ file.}}
\DoxyCodeLine{00014\ \textcolor{comment}{}}
\DoxyCodeLine{00015\ \textcolor{comment}{\ \ \ QUICKSTART}}
\DoxyCodeLine{00016\ \textcolor{comment}{\ \ \ \ \ \ stbir\_resize\_uint8(\ \ \ \ \ \ input\_pixels\ ,\ in\_w\ ,\ in\_h\ ,\ 0,}}
\DoxyCodeLine{00017\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ output\_pixels,\ out\_w,\ out\_h,\ 0,\ num\_channels)}}
\DoxyCodeLine{00018\ \textcolor{comment}{\ \ \ \ \ \ stbir\_resize\_float(...)}}
\DoxyCodeLine{00019\ \textcolor{comment}{\ \ \ \ \ \ stbir\_resize\_uint8\_srgb(\ input\_pixels\ ,\ in\_w\ ,\ in\_h\ ,\ 0,}}
\DoxyCodeLine{00020\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ output\_pixels,\ out\_w,\ out\_h,\ 0,}}
\DoxyCodeLine{00021\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ num\_channels\ ,\ alpha\_chan\ \ ,\ 0)}}
\DoxyCodeLine{00022\ \textcolor{comment}{\ \ \ \ \ \ stbir\_resize\_uint8\_srgb\_edgemode(}}
\DoxyCodeLine{00023\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ input\_pixels\ ,\ in\_w\ ,\ in\_h\ ,\ 0,}}
\DoxyCodeLine{00024\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ output\_pixels,\ out\_w,\ out\_h,\ 0,}}
\DoxyCodeLine{00025\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ num\_channels\ ,\ alpha\_chan\ \ ,\ 0,\ STBIR\_EDGE\_CLAMP)}}
\DoxyCodeLine{00026\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ //\ WRAP/REFLECT/ZERO}}
\DoxyCodeLine{00027\ \textcolor{comment}{}}
\DoxyCodeLine{00028\ \textcolor{comment}{\ \ \ FULL\ API}}
\DoxyCodeLine{00029\ \textcolor{comment}{\ \ \ \ \ \ See\ the\ "{}header\ file"{}\ section\ of\ the\ source\ for\ API\ documentation.}}
\DoxyCodeLine{00030\ \textcolor{comment}{}}
\DoxyCodeLine{00031\ \textcolor{comment}{\ \ \ ADDITIONAL\ DOCUMENTATION}}
\DoxyCodeLine{00032\ \textcolor{comment}{}}
\DoxyCodeLine{00033\ \textcolor{comment}{\ \ \ \ \ \ SRGB\ \&\ FLOATING\ POINT\ REPRESENTATION}}
\DoxyCodeLine{00034\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ The\ sRGB\ functions\ presume\ IEEE\ floating\ point.\ If\ you\ do\ not\ have}}
\DoxyCodeLine{00035\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ IEEE\ floating\ point,\ define\ STBIR\_NON\_IEEE\_FLOAT.\ This\ will\ use}}
\DoxyCodeLine{00036\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ a\ slower\ implementation.}}
\DoxyCodeLine{00037\ \textcolor{comment}{}}
\DoxyCodeLine{00038\ \textcolor{comment}{\ \ \ \ \ \ MEMORY\ ALLOCATION}}
\DoxyCodeLine{00039\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ The\ resize\ functions\ here\ perform\ a\ single\ memory\ allocation\ using}}
\DoxyCodeLine{00040\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ malloc.\ To\ control\ the\ memory\ allocation,\ before\ the\ \#include\ that}}
\DoxyCodeLine{00041\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ triggers\ the\ implementation,\ do:}}
\DoxyCodeLine{00042\ \textcolor{comment}{}}
\DoxyCodeLine{00043\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \#define\ STBIR\_MALLOC(size,context)\ ...}}
\DoxyCodeLine{00044\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \#define\ STBIR\_FREE(ptr,context)\ \ \ ...}}
\DoxyCodeLine{00045\ \textcolor{comment}{}}
\DoxyCodeLine{00046\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ Each\ resize\ function\ makes\ exactly\ one\ call\ to\ malloc/free,\ so\ to\ use}}
\DoxyCodeLine{00047\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ temp\ memory,\ store\ the\ temp\ memory\ in\ the\ context\ and\ return\ that.}}
\DoxyCodeLine{00048\ \textcolor{comment}{}}
\DoxyCodeLine{00049\ \textcolor{comment}{\ \ \ \ \ \ ASSERT}}
\DoxyCodeLine{00050\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ Define\ STBIR\_ASSERT(boolval)\ to\ override\ assert()\ and\ not\ use\ assert.h}}
\DoxyCodeLine{00051\ \textcolor{comment}{}}
\DoxyCodeLine{00052\ \textcolor{comment}{\ \ \ \ \ \ OPTIMIZATION}}
\DoxyCodeLine{00053\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ Define\ STBIR\_SATURATE\_INT\ to\ compute\ clamp\ values\ in-\/range\ using}}
\DoxyCodeLine{00054\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ integer\ operations\ instead\ of\ float\ operations.\ This\ may\ be\ faster}}
\DoxyCodeLine{00055\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ on\ some\ platforms.}}
\DoxyCodeLine{00056\ \textcolor{comment}{}}
\DoxyCodeLine{00057\ \textcolor{comment}{\ \ \ \ \ \ DEFAULT\ FILTERS}}
\DoxyCodeLine{00058\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ For\ functions\ which\ don't\ provide\ explicit\ control\ over\ what\ filters}}
\DoxyCodeLine{00059\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ to\ use,\ you\ can\ change\ the\ compile-\/time\ defaults\ with}}
\DoxyCodeLine{00060\ \textcolor{comment}{}}
\DoxyCodeLine{00061\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \#define\ STBIR\_DEFAULT\_FILTER\_UPSAMPLE\ \ \ \ \ STBIR\_FILTER\_something}}
\DoxyCodeLine{00062\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \#define\ STBIR\_DEFAULT\_FILTER\_DOWNSAMPLE\ \ \ STBIR\_FILTER\_something}}
\DoxyCodeLine{00063\ \textcolor{comment}{}}
\DoxyCodeLine{00064\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ See\ stbir\_filter\ in\ the\ header-\/file\ section\ for\ the\ list\ of\ filters.}}
\DoxyCodeLine{00065\ \textcolor{comment}{}}
\DoxyCodeLine{00066\ \textcolor{comment}{\ \ \ \ \ \ NEW\ FILTERS}}
\DoxyCodeLine{00067\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ A\ number\ of\ 1D\ filter\ kernels\ are\ used.\ For\ a\ list\ of}}
\DoxyCodeLine{00068\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ supported\ filters\ see\ the\ stbir\_filter\ enum.\ To\ add\ a\ new\ filter,}}
\DoxyCodeLine{00069\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ write\ a\ filter\ function\ and\ add\ it\ to\ stbir\_\_filter\_info\_table.}}
\DoxyCodeLine{00070\ \textcolor{comment}{}}
\DoxyCodeLine{00071\ \textcolor{comment}{\ \ \ \ \ \ PROGRESS}}
\DoxyCodeLine{00072\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ For\ interactive\ use\ with\ slow\ resize\ operations,\ you\ can\ install}}
\DoxyCodeLine{00073\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ a\ progress-\/report\ callback:}}
\DoxyCodeLine{00074\ \textcolor{comment}{}}
\DoxyCodeLine{00075\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \#define\ STBIR\_PROGRESS\_REPORT(val)\ \ \ some\_func(val)}}
\DoxyCodeLine{00076\ \textcolor{comment}{}}
\DoxyCodeLine{00077\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ The\ parameter\ val\ is\ a\ float\ which\ goes\ from\ 0\ to\ 1\ as\ progress\ is\ made.}}
\DoxyCodeLine{00078\ \textcolor{comment}{}}
\DoxyCodeLine{00079\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ For\ example:}}
\DoxyCodeLine{00080\ \textcolor{comment}{}}
\DoxyCodeLine{00081\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ static\ void\ my\_progress\_report(float\ progress);}}
\DoxyCodeLine{00082\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \#define\ STBIR\_PROGRESS\_REPORT(val)\ my\_progress\_report(val)}}
\DoxyCodeLine{00083\ \textcolor{comment}{}}
\DoxyCodeLine{00084\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \#define\ STB\_IMAGE\_RESIZE\_IMPLEMENTATION}}
\DoxyCodeLine{00085\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \#include\ "{}stb\_image\_resize.h"{}}}
\DoxyCodeLine{00086\ \textcolor{comment}{}}
\DoxyCodeLine{00087\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ static\ void\ my\_progress\_report(float\ progress)}}
\DoxyCodeLine{00088\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \{}}
\DoxyCodeLine{00089\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ printf("{}Progress:\ \%f\%\%\(\backslash\)n"{},\ progress*100);}}
\DoxyCodeLine{00090\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ \ \ \ \}}}
\DoxyCodeLine{00091\ \textcolor{comment}{}}
\DoxyCodeLine{00092\ \textcolor{comment}{\ \ \ \ \ \ MAX\ CHANNELS}}
\DoxyCodeLine{00093\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ If\ your\ image\ has\ more\ than\ 64\ channels,\ define\ STBIR\_MAX\_CHANNELS}}
\DoxyCodeLine{00094\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ to\ the\ max\ you'll\ have.}}
\DoxyCodeLine{00095\ \textcolor{comment}{}}
\DoxyCodeLine{00096\ \textcolor{comment}{\ \ \ \ \ \ ALPHA\ CHANNEL}}
\DoxyCodeLine{00097\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ Most\ of\ the\ resizing\ functions\ provide\ the\ ability\ to\ control\ how}}
\DoxyCodeLine{00098\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ the\ alpha\ channel\ of\ an\ image\ is\ processed.\ The\ important\ things}}
\DoxyCodeLine{00099\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ to\ know\ about\ this:}}
\DoxyCodeLine{00100\ \textcolor{comment}{}}
\DoxyCodeLine{00101\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ 1.\ The\ best\ mathematically-\/behaved\ version\ of\ alpha\ to\ use\ is}}
\DoxyCodeLine{00102\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ called\ "{}premultiplied\ alpha"{},\ in\ which\ the\ other\ color\ channels}}
\DoxyCodeLine{00103\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ have\ had\ the\ alpha\ value\ multiplied\ in.\ If\ you\ use\ premultiplied}}
\DoxyCodeLine{00104\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ alpha,\ linear\ filtering\ (such\ as\ image\ resampling\ done\ by\ this}}
\DoxyCodeLine{00105\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ library,\ or\ performed\ in\ texture\ units\ on\ GPUs)\ does\ the\ "{}right}}
\DoxyCodeLine{00106\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ thing"{}.\ While\ premultiplied\ alpha\ is\ standard\ in\ the\ movie\ CGI}}
\DoxyCodeLine{00107\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ industry,\ it\ is\ still\ uncommon\ in\ the\ videogame/real-\/time\ world.}}
\DoxyCodeLine{00108\ \textcolor{comment}{}}
\DoxyCodeLine{00109\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ If\ you\ linearly\ filter\ non-\/premultiplied\ alpha,\ strange\ effects}}
\DoxyCodeLine{00110\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ occur.\ (For\ example,\ the\ 50/50\ average\ of\ 99\%\ transparent\ bright\ green}}
\DoxyCodeLine{00111\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ and\ 1\%\ transparent\ black\ produces\ 50\%\ transparent\ dark\ green\ when}}
\DoxyCodeLine{00112\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ non-\/premultiplied,\ whereas\ premultiplied\ it\ produces\ 50\%}}
\DoxyCodeLine{00113\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ transparent\ near-\/black.\ The\ former\ introduces\ green\ energy}}
\DoxyCodeLine{00114\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ that\ doesn't\ exist\ in\ the\ source\ image.)}}
\DoxyCodeLine{00115\ \textcolor{comment}{}}
\DoxyCodeLine{00116\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ 2.\ Artists\ should\ not\ edit\ premultiplied-\/alpha\ images;\ artists}}
\DoxyCodeLine{00117\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ want\ non-\/premultiplied\ alpha\ images.\ Thus,\ art\ tools\ generally\ output}}
\DoxyCodeLine{00118\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ non-\/premultiplied\ alpha\ images.}}
\DoxyCodeLine{00119\ \textcolor{comment}{}}
\DoxyCodeLine{00120\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ 3.\ You\ will\ get\ best\ results\ in\ most\ cases\ by\ converting\ images}}
\DoxyCodeLine{00121\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ to\ premultiplied\ alpha\ before\ processing\ them\ mathematically.}}
\DoxyCodeLine{00122\ \textcolor{comment}{}}
\DoxyCodeLine{00123\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ 4.\ If\ you\ pass\ the\ flag\ STBIR\_FLAG\_ALPHA\_PREMULTIPLIED,\ the}}
\DoxyCodeLine{00124\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ resizer\ does\ not\ do\ anything\ special\ for\ the\ alpha\ channel;}}
\DoxyCodeLine{00125\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ it\ is\ resampled\ identically\ to\ other\ channels.\ This\ produces}}
\DoxyCodeLine{00126\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ the\ correct\ results\ for\ premultiplied-\/alpha\ images,\ but\ produces}}
\DoxyCodeLine{00127\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ less-\/than-\/ideal\ results\ for\ non-\/premultiplied-\/alpha\ images.}}
\DoxyCodeLine{00128\ \textcolor{comment}{}}
\DoxyCodeLine{00129\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ 5.\ If\ you\ do\ not\ pass\ the\ flag\ STBIR\_FLAG\_ALPHA\_PREMULTIPLIED,}}
\DoxyCodeLine{00130\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ then\ the\ resizer\ weights\ the\ contribution\ of\ input\ pixels}}
\DoxyCodeLine{00131\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ based\ on\ their\ alpha\ values,\ or,\ equivalently,\ it\ multiplies}}
\DoxyCodeLine{00132\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ the\ alpha\ value\ into\ the\ color\ channels,\ resamples,\ then\ divides}}
\DoxyCodeLine{00133\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ by\ the\ resultant\ alpha\ value.\ Input\ pixels\ which\ have\ alpha=0\ do}}
\DoxyCodeLine{00134\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ not\ contribute\ at\ all\ to\ output\ pixels\ unless\ \_all\_\ of\ the\ input}}
\DoxyCodeLine{00135\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ pixels\ affecting\ that\ output\ pixel\ have\ alpha=0,\ in\ which\ case}}
\DoxyCodeLine{00136\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ the\ result\ for\ that\ pixel\ is\ the\ same\ as\ it\ would\ be\ without}}
\DoxyCodeLine{00137\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ STBIR\_FLAG\_ALPHA\_PREMULTIPLIED.\ However,\ this\ is\ only\ true\ for}}
\DoxyCodeLine{00138\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ input\ images\ in\ integer\ formats.\ For\ input\ images\ in\ float\ format,}}
\DoxyCodeLine{00139\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ input\ pixels\ with\ alpha=0\ have\ no\ effect,\ and\ output\ pixels}}
\DoxyCodeLine{00140\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ which\ have\ alpha=0\ will\ be\ 0\ in\ all\ channels.\ (For\ float\ images,}}
\DoxyCodeLine{00141\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ you\ can\ manually\ achieve\ the\ same\ result\ by\ adding\ a\ tiny\ epsilon}}
\DoxyCodeLine{00142\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ value\ to\ the\ alpha\ channel\ of\ every\ image,\ and\ then\ subtracting}}
\DoxyCodeLine{00143\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ or\ clamping\ it\ at\ the\ end.)}}
\DoxyCodeLine{00144\ \textcolor{comment}{}}
\DoxyCodeLine{00145\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ 6.\ You\ can\ suppress\ the\ behavior\ described\ in\ \#5\ and\ make}}
\DoxyCodeLine{00146\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ all-\/0-\/alpha\ pixels\ have\ 0\ in\ all\ channels\ by\ \#defining}}
\DoxyCodeLine{00147\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ STBIR\_NO\_ALPHA\_EPSILON.}}
\DoxyCodeLine{00148\ \textcolor{comment}{}}
\DoxyCodeLine{00149\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ 7.\ You\ can\ separately\ control\ whether\ the\ alpha\ channel\ is}}
\DoxyCodeLine{00150\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ interpreted\ as\ linear\ or\ affected\ by\ the\ colorspace.\ By\ default}}
\DoxyCodeLine{00151\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ it\ is\ linear;\ you\ almost\ never\ want\ to\ apply\ the\ colorspace.}}
\DoxyCodeLine{00152\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ (For\ example,\ graphics\ hardware\ does\ not\ apply\ sRGB\ conversion}}
\DoxyCodeLine{00153\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ to\ the\ alpha\ channel.)}}
\DoxyCodeLine{00154\ \textcolor{comment}{}}
\DoxyCodeLine{00155\ \textcolor{comment}{\ \ \ CONTRIBUTORS}}
\DoxyCodeLine{00156\ \textcolor{comment}{\ \ \ \ \ \ Jorge\ L\ Rodriguez:\ Implementation}}
\DoxyCodeLine{00157\ \textcolor{comment}{\ \ \ \ \ \ Sean\ Barrett:\ API\ design,\ optimizations}}
\DoxyCodeLine{00158\ \textcolor{comment}{\ \ \ \ \ \ Aras\ Pranckevicius:\ bugfix}}
\DoxyCodeLine{00159\ \textcolor{comment}{\ \ \ \ \ \ Nathan\ Reed:\ warning\ fixes}}
\DoxyCodeLine{00160\ \textcolor{comment}{}}
\DoxyCodeLine{00161\ \textcolor{comment}{\ \ \ REVISIONS}}
\DoxyCodeLine{00162\ \textcolor{comment}{\ \ \ \ \ \ 0.97\ (2020-\/02-\/02)\ fixed\ warning}}
\DoxyCodeLine{00163\ \textcolor{comment}{\ \ \ \ \ \ 0.96\ (2019-\/03-\/04)\ fixed\ warnings}}
\DoxyCodeLine{00164\ \textcolor{comment}{\ \ \ \ \ \ 0.95\ (2017-\/07-\/23)\ fixed\ warnings}}
\DoxyCodeLine{00165\ \textcolor{comment}{\ \ \ \ \ \ 0.94\ (2017-\/03-\/18)\ fixed\ warnings}}
\DoxyCodeLine{00166\ \textcolor{comment}{\ \ \ \ \ \ 0.93\ (2017-\/03-\/03)\ fixed\ bug\ with\ certain\ combinations\ of\ heights}}
\DoxyCodeLine{00167\ \textcolor{comment}{\ \ \ \ \ \ 0.92\ (2017-\/01-\/02)\ fix\ integer\ overflow\ on\ large\ (>2GB)\ images}}
\DoxyCodeLine{00168\ \textcolor{comment}{\ \ \ \ \ \ 0.91\ (2016-\/04-\/02)\ fix\ warnings;\ fix\ handling\ of\ subpixel\ regions}}
\DoxyCodeLine{00169\ \textcolor{comment}{\ \ \ \ \ \ 0.90\ (2014-\/09-\/17)\ first\ released\ version}}
\DoxyCodeLine{00170\ \textcolor{comment}{}}
\DoxyCodeLine{00171\ \textcolor{comment}{\ \ \ LICENSE}}
\DoxyCodeLine{00172\ \textcolor{comment}{\ \ \ \ \ See\ end\ of\ file\ for\ license\ information.}}
\DoxyCodeLine{00173\ \textcolor{comment}{}}
\DoxyCodeLine{00174\ \textcolor{comment}{\ \ \ TODO}}
\DoxyCodeLine{00175\ \textcolor{comment}{\ \ \ \ \ \ Don't\ decode\ all\ of\ the\ image\ data\ when\ only\ processing\ a\ partial\ tile}}
\DoxyCodeLine{00176\ \textcolor{comment}{\ \ \ \ \ \ Don't\ use\ full-\/width\ decode\ buffers\ when\ only\ processing\ a\ partial\ tile}}
\DoxyCodeLine{00177\ \textcolor{comment}{\ \ \ \ \ \ When\ processing\ wide\ images,\ break\ processing\ into\ tiles\ so\ data\ fits\ in\ L1\ cache}}
\DoxyCodeLine{00178\ \textcolor{comment}{\ \ \ \ \ \ Installable\ filters?}}
\DoxyCodeLine{00179\ \textcolor{comment}{\ \ \ \ \ \ Resize\ that\ respects\ alpha\ test\ coverage}}
\DoxyCodeLine{00180\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ (Reference\ code:\ FloatImage::alphaTestCoverage\ and\ FloatImage::scaleAlphaToCoverage:}}
\DoxyCodeLine{00181\ \textcolor{comment}{\ \ \ \ \ \ \ \ \ https://code.google.com/p/nvidia-\/texture-\/tools/source/browse/trunk/src/nvimage/FloatImage.cpp\ )}}
\DoxyCodeLine{00182\ \textcolor{comment}{*/}}
\DoxyCodeLine{00183\ }
\DoxyCodeLine{00184\ \textcolor{preprocessor}{\#ifndef\ STBIR\_INCLUDE\_STB\_IMAGE\_RESIZE\_H}}
\DoxyCodeLine{00185\ \textcolor{preprocessor}{\#define\ STBIR\_INCLUDE\_STB\_IMAGE\_RESIZE\_H}}
\DoxyCodeLine{00186\ }
\DoxyCodeLine{00187\ \textcolor{preprocessor}{\#ifdef\ \_MSC\_VER}}
\DoxyCodeLine{00188\ \textcolor{keyword}{typedef}\ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{char}\ \ stbir\_uint8;}
\DoxyCodeLine{00189\ \textcolor{keyword}{typedef}\ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{short}\ stbir\_uint16;}
\DoxyCodeLine{00190\ \textcolor{keyword}{typedef}\ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ \ \ stbir\_uint32;}
\DoxyCodeLine{00191\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{00192\ \textcolor{preprocessor}{\#include\ <stdint.h>}}
\DoxyCodeLine{00193\ \textcolor{keyword}{typedef}\ uint8\_t\ \ stbir\_uint8;}
\DoxyCodeLine{00194\ \textcolor{keyword}{typedef}\ uint16\_t\ stbir\_uint16;}
\DoxyCodeLine{00195\ \textcolor{keyword}{typedef}\ uint32\_t\ stbir\_uint32;}
\DoxyCodeLine{00196\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00197\ }
\DoxyCodeLine{00198\ \textcolor{preprocessor}{\#ifndef\ STBIRDEF}}
\DoxyCodeLine{00199\ \textcolor{preprocessor}{\#ifdef\ STB\_IMAGE\_RESIZE\_STATIC}}
\DoxyCodeLine{00200\ \textcolor{preprocessor}{\#define\ STBIRDEF\ static}}
\DoxyCodeLine{00201\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{00202\ \textcolor{preprocessor}{\#ifdef\ \_\_cplusplus}}
\DoxyCodeLine{00203\ \textcolor{preprocessor}{\#define\ STBIRDEF\ extern\ "{}C"{}}}
\DoxyCodeLine{00204\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{00205\ \textcolor{preprocessor}{\#define\ STBIRDEF\ extern}}
\DoxyCodeLine{00206\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00207\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00208\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00209\ }
\DoxyCodeLine{00211\ \textcolor{comment}{//}}
\DoxyCodeLine{00212\ \textcolor{comment}{//\ Easy-\/to-\/use\ API:}}
\DoxyCodeLine{00213\ \textcolor{comment}{//}}
\DoxyCodeLine{00214\ \textcolor{comment}{//\ \ \ \ \ *\ "{}input\ pixels"{}\ points\ to\ an\ array\ of\ image\ data\ with\ 'num\_channels'\ channels\ (e.g.\ RGB=3,\ RGBA=4)}}
\DoxyCodeLine{00215\ \textcolor{comment}{//\ \ \ \ \ *\ input\_w\ is\ input\ image\ width\ (x-\/axis),\ input\_h\ is\ input\ image\ height\ (y-\/axis)}}
\DoxyCodeLine{00216\ \textcolor{comment}{//\ \ \ \ \ *\ stride\ is\ the\ offset\ between\ successive\ rows\ of\ image\ data\ in\ memory,\ in\ bytes.\ you\ can}}
\DoxyCodeLine{00217\ \textcolor{comment}{//\ \ \ \ \ \ \ specify\ 0\ to\ mean\ packed\ continuously\ in\ memory}}
\DoxyCodeLine{00218\ \textcolor{comment}{//\ \ \ \ \ *\ alpha\ channel\ is\ treated\ identically\ to\ other\ channels.}}
\DoxyCodeLine{00219\ \textcolor{comment}{//\ \ \ \ \ *\ colorspace\ is\ linear\ or\ sRGB\ as\ specified\ by\ function\ name}}
\DoxyCodeLine{00220\ \textcolor{comment}{//\ \ \ \ \ *\ returned\ result\ is\ 1\ for\ success\ or\ 0\ in\ case\ of\ an\ error.}}
\DoxyCodeLine{00221\ \textcolor{comment}{//\ \ \ \ \ \ \ \#define\ STBIR\_ASSERT()\ to\ trigger\ an\ assert\ on\ parameter\ validation\ errors.}}
\DoxyCodeLine{00222\ \textcolor{comment}{//\ \ \ \ \ *\ Memory\ required\ grows\ approximately\ linearly\ with\ input\ and\ output\ size,\ but\ with}}
\DoxyCodeLine{00223\ \textcolor{comment}{//\ \ \ \ \ \ \ discontinuities\ at\ input\_w\ ==\ output\_w\ and\ input\_h\ ==\ output\_h.}}
\DoxyCodeLine{00224\ \textcolor{comment}{//\ \ \ \ \ *\ These\ functions\ use\ a\ "{}default"{}\ resampling\ filter\ defined\ at\ compile\ time.\ To\ change\ the\ filter,}}
\DoxyCodeLine{00225\ \textcolor{comment}{//\ \ \ \ \ \ \ you\ can\ change\ the\ compile-\/time\ defaults\ by\ \#defining\ STBIR\_DEFAULT\_FILTER\_UPSAMPLE}}
\DoxyCodeLine{00226\ \textcolor{comment}{//\ \ \ \ \ \ \ and\ STBIR\_DEFAULT\_FILTER\_DOWNSAMPLE,\ or\ you\ can\ use\ the\ medium-\/complexity\ API.}}
\DoxyCodeLine{00227\ }
\DoxyCodeLine{00228\ STBIRDEF\ \textcolor{keywordtype}{int}\ stbir\_resize\_uint8(\ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{char}\ *input\_pixels\ ,\ \textcolor{keywordtype}{int}\ input\_w\ ,\ \textcolor{keywordtype}{int}\ input\_h\ ,\ \textcolor{keywordtype}{int}\ input\_stride\_in\_bytes,}
\DoxyCodeLine{00229\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{char}\ *output\_pixels,\ \textcolor{keywordtype}{int}\ output\_w,\ \textcolor{keywordtype}{int}\ output\_h,\ \textcolor{keywordtype}{int}\ output\_stride\_in\_bytes,}
\DoxyCodeLine{00230\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ num\_channels);}
\DoxyCodeLine{00231\ }
\DoxyCodeLine{00232\ STBIRDEF\ \textcolor{keywordtype}{int}\ stbir\_resize\_float(\ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{float}\ *input\_pixels\ ,\ \textcolor{keywordtype}{int}\ input\_w\ ,\ \textcolor{keywordtype}{int}\ input\_h\ ,\ \textcolor{keywordtype}{int}\ input\_stride\_in\_bytes,}
\DoxyCodeLine{00233\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ *output\_pixels,\ \textcolor{keywordtype}{int}\ output\_w,\ \textcolor{keywordtype}{int}\ output\_h,\ \textcolor{keywordtype}{int}\ output\_stride\_in\_bytes,}
\DoxyCodeLine{00234\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ num\_channels);}
\DoxyCodeLine{00235\ }
\DoxyCodeLine{00236\ }
\DoxyCodeLine{00237\ \textcolor{comment}{//\ The\ following\ functions\ interpret\ image\ data\ as\ gamma-\/corrected\ sRGB.}}
\DoxyCodeLine{00238\ \textcolor{comment}{//\ Specify\ STBIR\_ALPHA\_CHANNEL\_NONE\ if\ you\ have\ no\ alpha\ channel,}}
\DoxyCodeLine{00239\ \textcolor{comment}{//\ or\ otherwise\ provide\ the\ index\ of\ the\ alpha\ channel.\ Flags\ value}}
\DoxyCodeLine{00240\ \textcolor{comment}{//\ of\ 0\ will\ probably\ do\ the\ right\ thing\ if\ you're\ not\ sure\ what}}
\DoxyCodeLine{00241\ \textcolor{comment}{//\ the\ flags\ mean.}}
\DoxyCodeLine{00242\ }
\DoxyCodeLine{00243\ \textcolor{preprocessor}{\#define\ STBIR\_ALPHA\_CHANNEL\_NONE\ \ \ \ \ \ \ -\/1}}
\DoxyCodeLine{00244\ }
\DoxyCodeLine{00245\ \textcolor{comment}{//\ Set\ this\ flag\ if\ your\ texture\ has\ premultiplied\ alpha.\ Otherwise,\ stbir\ will}}
\DoxyCodeLine{00246\ \textcolor{comment}{//\ use\ alpha-\/weighted\ resampling\ (effectively\ premultiplying,\ resampling,}}
\DoxyCodeLine{00247\ \textcolor{comment}{//\ then\ unpremultiplying).}}
\DoxyCodeLine{00248\ \textcolor{preprocessor}{\#define\ STBIR\_FLAG\_ALPHA\_PREMULTIPLIED\ \ \ \ (1\ <<\ 0)}}
\DoxyCodeLine{00249\ \textcolor{comment}{//\ The\ specified\ alpha\ channel\ should\ be\ handled\ as\ gamma-\/corrected\ value\ even}}
\DoxyCodeLine{00250\ \textcolor{comment}{//\ when\ doing\ sRGB\ operations.}}
\DoxyCodeLine{00251\ \textcolor{preprocessor}{\#define\ STBIR\_FLAG\_ALPHA\_USES\_COLORSPACE\ \ (1\ <<\ 1)}}
\DoxyCodeLine{00252\ }
\DoxyCodeLine{00253\ STBIRDEF\ \textcolor{keywordtype}{int}\ stbir\_resize\_uint8\_srgb(\textcolor{keyword}{const}\ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{char}\ *input\_pixels\ ,\ \textcolor{keywordtype}{int}\ input\_w\ ,\ \textcolor{keywordtype}{int}\ input\_h\ ,\ \textcolor{keywordtype}{int}\ input\_stride\_in\_bytes,}
\DoxyCodeLine{00254\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{char}\ *output\_pixels,\ \textcolor{keywordtype}{int}\ output\_w,\ \textcolor{keywordtype}{int}\ output\_h,\ \textcolor{keywordtype}{int}\ output\_stride\_in\_bytes,}
\DoxyCodeLine{00255\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ num\_channels,\ \textcolor{keywordtype}{int}\ alpha\_channel,\ \textcolor{keywordtype}{int}\ flags);}
\DoxyCodeLine{00256\ }
\DoxyCodeLine{00257\ }
\DoxyCodeLine{00258\ \textcolor{keyword}{typedef}\ \textcolor{keyword}{enum}}
\DoxyCodeLine{00259\ \{}
\DoxyCodeLine{00260\ \ \ \ \ STBIR\_EDGE\_CLAMP\ \ \ =\ 1,}
\DoxyCodeLine{00261\ \ \ \ \ STBIR\_EDGE\_REFLECT\ =\ 2,}
\DoxyCodeLine{00262\ \ \ \ \ STBIR\_EDGE\_WRAP\ \ \ \ =\ 3,}
\DoxyCodeLine{00263\ \ \ \ \ STBIR\_EDGE\_ZERO\ \ \ \ =\ 4,}
\DoxyCodeLine{00264\ \}\ stbir\_edge;}
\DoxyCodeLine{00265\ }
\DoxyCodeLine{00266\ \textcolor{comment}{//\ This\ function\ adds\ the\ ability\ to\ specify\ how\ requests\ to\ sample\ off\ the\ edge\ of\ the\ image\ are\ handled.}}
\DoxyCodeLine{00267\ STBIRDEF\ \textcolor{keywordtype}{int}\ stbir\_resize\_uint8\_srgb\_edgemode(\textcolor{keyword}{const}\ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{char}\ *input\_pixels\ ,\ \textcolor{keywordtype}{int}\ input\_w\ ,\ \textcolor{keywordtype}{int}\ input\_h\ ,\ \textcolor{keywordtype}{int}\ input\_stride\_in\_bytes,}
\DoxyCodeLine{00268\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{char}\ *output\_pixels,\ \textcolor{keywordtype}{int}\ output\_w,\ \textcolor{keywordtype}{int}\ output\_h,\ \textcolor{keywordtype}{int}\ output\_stride\_in\_bytes,}
\DoxyCodeLine{00269\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ num\_channels,\ \textcolor{keywordtype}{int}\ alpha\_channel,\ \textcolor{keywordtype}{int}\ flags,}
\DoxyCodeLine{00270\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ stbir\_edge\ edge\_wrap\_mode);}
\DoxyCodeLine{00271\ }
\DoxyCodeLine{00273\ \textcolor{comment}{//}}
\DoxyCodeLine{00274\ \textcolor{comment}{//\ Medium-\/complexity\ API}}
\DoxyCodeLine{00275\ \textcolor{comment}{//}}
\DoxyCodeLine{00276\ \textcolor{comment}{//\ This\ extends\ the\ easy-\/to-\/use\ API\ as\ follows:}}
\DoxyCodeLine{00277\ \textcolor{comment}{//}}
\DoxyCodeLine{00278\ \textcolor{comment}{//\ \ \ \ \ *\ Alpha-\/channel\ can\ be\ processed\ separately}}
\DoxyCodeLine{00279\ \textcolor{comment}{//\ \ \ \ \ \ \ *\ If\ alpha\_channel\ is\ not\ STBIR\_ALPHA\_CHANNEL\_NONE}}
\DoxyCodeLine{00280\ \textcolor{comment}{//\ \ \ \ \ \ \ \ \ *\ Alpha\ channel\ will\ not\ be\ gamma\ corrected\ (unless\ flags\&STBIR\_FLAG\_GAMMA\_CORRECT)}}
\DoxyCodeLine{00281\ \textcolor{comment}{//\ \ \ \ \ \ \ \ \ *\ Filters\ will\ be\ weighted\ by\ alpha\ channel\ (unless\ flags\&STBIR\_FLAG\_ALPHA\_PREMULTIPLIED)}}
\DoxyCodeLine{00282\ \textcolor{comment}{//\ \ \ \ \ *\ Filter\ can\ be\ selected\ explicitly}}
\DoxyCodeLine{00283\ \textcolor{comment}{//\ \ \ \ \ *\ uint16\ image\ type}}
\DoxyCodeLine{00284\ \textcolor{comment}{//\ \ \ \ \ *\ sRGB\ colorspace\ available\ for\ all\ types}}
\DoxyCodeLine{00285\ \textcolor{comment}{//\ \ \ \ \ *\ context\ parameter\ for\ passing\ to\ STBIR\_MALLOC}}
\DoxyCodeLine{00286\ }
\DoxyCodeLine{00287\ \textcolor{keyword}{typedef}\ \textcolor{keyword}{enum}}
\DoxyCodeLine{00288\ \{}
\DoxyCodeLine{00289\ \ \ \ \ STBIR\_FILTER\_DEFAULT\ \ \ \ \ \ =\ 0,\ \ \textcolor{comment}{//\ use\ same\ filter\ type\ that\ easy-\/to-\/use\ API\ chooses}}
\DoxyCodeLine{00290\ \ \ \ \ STBIR\_FILTER\_BOX\ \ \ \ \ \ \ \ \ \ =\ 1,\ \ \textcolor{comment}{//\ A\ trapezoid\ w/1-\/pixel\ wide\ ramps,\ same\ result\ as\ box\ for\ integer\ scale\ ratios}}
\DoxyCodeLine{00291\ \ \ \ \ STBIR\_FILTER\_TRIANGLE\ \ \ \ \ =\ 2,\ \ \textcolor{comment}{//\ On\ upsampling,\ produces\ same\ results\ as\ bilinear\ texture\ filtering}}
\DoxyCodeLine{00292\ \ \ \ \ STBIR\_FILTER\_CUBICBSPLINE\ =\ 3,\ \ \textcolor{comment}{//\ The\ cubic\ b-\/spline\ (aka\ Mitchell-\/Netrevalli\ with\ B=1,C=0),\ gaussian-\/esque}}
\DoxyCodeLine{00293\ \ \ \ \ STBIR\_FILTER\_CATMULLROM\ \ \ =\ 4,\ \ \textcolor{comment}{//\ An\ interpolating\ cubic\ spline}}
\DoxyCodeLine{00294\ \ \ \ \ STBIR\_FILTER\_MITCHELL\ \ \ \ \ =\ 5,\ \ \textcolor{comment}{//\ Mitchell-\/Netrevalli\ filter\ with\ B=1/3,\ C=1/3}}
\DoxyCodeLine{00295\ \}\ stbir\_filter;}
\DoxyCodeLine{00296\ }
\DoxyCodeLine{00297\ \textcolor{keyword}{typedef}\ \textcolor{keyword}{enum}}
\DoxyCodeLine{00298\ \{}
\DoxyCodeLine{00299\ \ \ \ \ STBIR\_COLORSPACE\_LINEAR,}
\DoxyCodeLine{00300\ \ \ \ \ STBIR\_COLORSPACE\_SRGB,}
\DoxyCodeLine{00301\ }
\DoxyCodeLine{00302\ \ \ \ \ STBIR\_MAX\_COLORSPACES,}
\DoxyCodeLine{00303\ \}\ stbir\_colorspace;}
\DoxyCodeLine{00304\ }
\DoxyCodeLine{00305\ \textcolor{comment}{//\ The\ following\ functions\ are\ all\ identical\ except\ for\ the\ type\ of\ the\ image\ data}}
\DoxyCodeLine{00306\ }
\DoxyCodeLine{00307\ STBIRDEF\ \textcolor{keywordtype}{int}\ stbir\_resize\_uint8\_generic(\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{char}\ *input\_pixels\ ,\ \textcolor{keywordtype}{int}\ input\_w\ ,\ \textcolor{keywordtype}{int}\ input\_h\ ,\ \textcolor{keywordtype}{int}\ input\_stride\_in\_bytes,}
\DoxyCodeLine{00308\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{char}\ *output\_pixels,\ \textcolor{keywordtype}{int}\ output\_w,\ \textcolor{keywordtype}{int}\ output\_h,\ \textcolor{keywordtype}{int}\ output\_stride\_in\_bytes,}
\DoxyCodeLine{00309\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ num\_channels,\ \textcolor{keywordtype}{int}\ alpha\_channel,\ \textcolor{keywordtype}{int}\ flags,}
\DoxyCodeLine{00310\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ stbir\_edge\ edge\_wrap\_mode,\ stbir\_filter\ filter,\ stbir\_colorspace\ space,}
\DoxyCodeLine{00311\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ *alloc\_context);}
\DoxyCodeLine{00312\ }
\DoxyCodeLine{00313\ STBIRDEF\ \textcolor{keywordtype}{int}\ stbir\_resize\_uint16\_generic(\textcolor{keyword}{const}\ stbir\_uint16\ *input\_pixels\ \ ,\ \textcolor{keywordtype}{int}\ input\_w\ ,\ \textcolor{keywordtype}{int}\ input\_h\ ,\ \textcolor{keywordtype}{int}\ input\_stride\_in\_bytes,}
\DoxyCodeLine{00314\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ stbir\_uint16\ *output\_pixels\ ,\ \textcolor{keywordtype}{int}\ output\_w,\ \textcolor{keywordtype}{int}\ output\_h,\ \textcolor{keywordtype}{int}\ output\_stride\_in\_bytes,}
\DoxyCodeLine{00315\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ num\_channels,\ \textcolor{keywordtype}{int}\ alpha\_channel,\ \textcolor{keywordtype}{int}\ flags,}
\DoxyCodeLine{00316\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ stbir\_edge\ edge\_wrap\_mode,\ stbir\_filter\ filter,\ stbir\_colorspace\ space,}
\DoxyCodeLine{00317\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ *alloc\_context);}
\DoxyCodeLine{00318\ }
\DoxyCodeLine{00319\ STBIRDEF\ \textcolor{keywordtype}{int}\ stbir\_resize\_float\_generic(\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{float}\ *input\_pixels\ \ \ \ \ \ \ \ \ ,\ \textcolor{keywordtype}{int}\ input\_w\ ,\ \textcolor{keywordtype}{int}\ input\_h\ ,\ \textcolor{keywordtype}{int}\ input\_stride\_in\_bytes,}
\DoxyCodeLine{00320\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ *output\_pixels\ \ \ \ \ \ \ \ ,\ \textcolor{keywordtype}{int}\ output\_w,\ \textcolor{keywordtype}{int}\ output\_h,\ \textcolor{keywordtype}{int}\ output\_stride\_in\_bytes,}
\DoxyCodeLine{00321\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ num\_channels,\ \textcolor{keywordtype}{int}\ alpha\_channel,\ \textcolor{keywordtype}{int}\ flags,}
\DoxyCodeLine{00322\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ stbir\_edge\ edge\_wrap\_mode,\ stbir\_filter\ filter,\ stbir\_colorspace\ space,}
\DoxyCodeLine{00323\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ *alloc\_context);}
\DoxyCodeLine{00324\ }
\DoxyCodeLine{00325\ }
\DoxyCodeLine{00326\ }
\DoxyCodeLine{00328\ \textcolor{comment}{//}}
\DoxyCodeLine{00329\ \textcolor{comment}{//\ Full-\/complexity\ API}}
\DoxyCodeLine{00330\ \textcolor{comment}{//}}
\DoxyCodeLine{00331\ \textcolor{comment}{//\ This\ extends\ the\ medium\ API\ as\ follows:}}
\DoxyCodeLine{00332\ \textcolor{comment}{//}}
\DoxyCodeLine{00333\ \textcolor{comment}{//\ \ \ \ \ \ \ *\ uint32\ image\ type}}
\DoxyCodeLine{00334\ \textcolor{comment}{//\ \ \ \ \ *\ not\ typesafe}}
\DoxyCodeLine{00335\ \textcolor{comment}{//\ \ \ \ \ *\ separate\ filter\ types\ for\ each\ axis}}
\DoxyCodeLine{00336\ \textcolor{comment}{//\ \ \ \ \ *\ separate\ edge\ modes\ for\ each\ axis}}
\DoxyCodeLine{00337\ \textcolor{comment}{//\ \ \ \ \ *\ can\ specify\ scale\ explicitly\ for\ subpixel\ correctness}}
\DoxyCodeLine{00338\ \textcolor{comment}{//\ \ \ \ \ *\ can\ specify\ image\ source\ tile\ using\ texture\ coordinates}}
\DoxyCodeLine{00339\ }
\DoxyCodeLine{00340\ \textcolor{keyword}{typedef}\ \textcolor{keyword}{enum}}
\DoxyCodeLine{00341\ \{}
\DoxyCodeLine{00342\ \ \ \ \ STBIR\_TYPE\_UINT8\ ,}
\DoxyCodeLine{00343\ \ \ \ \ STBIR\_TYPE\_UINT16,}
\DoxyCodeLine{00344\ \ \ \ \ STBIR\_TYPE\_UINT32,}
\DoxyCodeLine{00345\ \ \ \ \ STBIR\_TYPE\_FLOAT\ ,}
\DoxyCodeLine{00346\ }
\DoxyCodeLine{00347\ \ \ \ \ STBIR\_MAX\_TYPES}
\DoxyCodeLine{00348\ \}\ stbir\_datatype;}
\DoxyCodeLine{00349\ }
\DoxyCodeLine{00350\ STBIRDEF\ \textcolor{keywordtype}{int}\ stbir\_resize(\ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{void}\ *input\_pixels\ ,\ \textcolor{keywordtype}{int}\ input\_w\ ,\ \textcolor{keywordtype}{int}\ input\_h\ ,\ \textcolor{keywordtype}{int}\ input\_stride\_in\_bytes,}
\DoxyCodeLine{00351\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ *output\_pixels,\ \textcolor{keywordtype}{int}\ output\_w,\ \textcolor{keywordtype}{int}\ output\_h,\ \textcolor{keywordtype}{int}\ output\_stride\_in\_bytes,}
\DoxyCodeLine{00352\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ stbir\_datatype\ datatype,}
\DoxyCodeLine{00353\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ num\_channels,\ \textcolor{keywordtype}{int}\ alpha\_channel,\ \textcolor{keywordtype}{int}\ flags,}
\DoxyCodeLine{00354\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ stbir\_edge\ edge\_mode\_horizontal,\ stbir\_edge\ edge\_mode\_vertical,}
\DoxyCodeLine{00355\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ stbir\_filter\ filter\_horizontal,\ \ stbir\_filter\ filter\_vertical,}
\DoxyCodeLine{00356\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ stbir\_colorspace\ space,\ \textcolor{keywordtype}{void}\ *alloc\_context);}
\DoxyCodeLine{00357\ }
\DoxyCodeLine{00358\ STBIRDEF\ \textcolor{keywordtype}{int}\ stbir\_resize\_subpixel(\textcolor{keyword}{const}\ \textcolor{keywordtype}{void}\ *input\_pixels\ ,\ \textcolor{keywordtype}{int}\ input\_w\ ,\ \textcolor{keywordtype}{int}\ input\_h\ ,\ \textcolor{keywordtype}{int}\ input\_stride\_in\_bytes,}
\DoxyCodeLine{00359\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ *output\_pixels,\ \textcolor{keywordtype}{int}\ output\_w,\ \textcolor{keywordtype}{int}\ output\_h,\ \textcolor{keywordtype}{int}\ output\_stride\_in\_bytes,}
\DoxyCodeLine{00360\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ stbir\_datatype\ datatype,}
\DoxyCodeLine{00361\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ num\_channels,\ \textcolor{keywordtype}{int}\ alpha\_channel,\ \textcolor{keywordtype}{int}\ flags,}
\DoxyCodeLine{00362\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ stbir\_edge\ edge\_mode\_horizontal,\ stbir\_edge\ edge\_mode\_vertical,}
\DoxyCodeLine{00363\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ stbir\_filter\ filter\_horizontal,\ \ stbir\_filter\ filter\_vertical,}
\DoxyCodeLine{00364\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ stbir\_colorspace\ space,\ \textcolor{keywordtype}{void}\ *alloc\_context,}
\DoxyCodeLine{00365\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ x\_scale,\ \textcolor{keywordtype}{float}\ y\_scale,}
\DoxyCodeLine{00366\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ x\_offset,\ \textcolor{keywordtype}{float}\ y\_offset);}
\DoxyCodeLine{00367\ }
\DoxyCodeLine{00368\ STBIRDEF\ \textcolor{keywordtype}{int}\ stbir\_resize\_region(\ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{void}\ *input\_pixels\ ,\ \textcolor{keywordtype}{int}\ input\_w\ ,\ \textcolor{keywordtype}{int}\ input\_h\ ,\ \textcolor{keywordtype}{int}\ input\_stride\_in\_bytes,}
\DoxyCodeLine{00369\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ *output\_pixels,\ \textcolor{keywordtype}{int}\ output\_w,\ \textcolor{keywordtype}{int}\ output\_h,\ \textcolor{keywordtype}{int}\ output\_stride\_in\_bytes,}
\DoxyCodeLine{00370\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ stbir\_datatype\ datatype,}
\DoxyCodeLine{00371\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ num\_channels,\ \textcolor{keywordtype}{int}\ alpha\_channel,\ \textcolor{keywordtype}{int}\ flags,}
\DoxyCodeLine{00372\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ stbir\_edge\ edge\_mode\_horizontal,\ stbir\_edge\ edge\_mode\_vertical,}
\DoxyCodeLine{00373\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ stbir\_filter\ filter\_horizontal,\ \ stbir\_filter\ filter\_vertical,}
\DoxyCodeLine{00374\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ stbir\_colorspace\ space,\ \textcolor{keywordtype}{void}\ *alloc\_context,}
\DoxyCodeLine{00375\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ s0,\ \textcolor{keywordtype}{float}\ t0,\ \textcolor{keywordtype}{float}\ s1,\ \textcolor{keywordtype}{float}\ t1);}
\DoxyCodeLine{00376\ \textcolor{comment}{//\ (s0,\ t0)\ \&\ (s1,\ t1)\ are\ the\ top-\/left\ and\ bottom\ right\ corner\ (uv\ addressing\ style:\ [0,\ 1]x[0,\ 1])\ of\ a\ region\ of\ the\ input\ image\ to\ use.}}
\DoxyCodeLine{00377\ }
\DoxyCodeLine{00378\ \textcolor{comment}{//}}
\DoxyCodeLine{00379\ \textcolor{comment}{//}}
\DoxyCodeLine{00381\ \textcolor{comment}{}\textcolor{preprocessor}{\#endif\ }\textcolor{comment}{//\ STBIR\_INCLUDE\_STB\_IMAGE\_RESIZE\_H}}
\DoxyCodeLine{00382\ }
\DoxyCodeLine{00383\ }
\DoxyCodeLine{00384\ }
\DoxyCodeLine{00385\ }
\DoxyCodeLine{00386\ }
\DoxyCodeLine{00387\ \textcolor{preprocessor}{\#ifdef\ STB\_IMAGE\_RESIZE\_IMPLEMENTATION}}
\DoxyCodeLine{00388\ }
\DoxyCodeLine{00389\ \textcolor{preprocessor}{\#ifndef\ STBIR\_ASSERT}}
\DoxyCodeLine{00390\ \textcolor{preprocessor}{\#include\ <assert.h>}}
\DoxyCodeLine{00391\ \textcolor{preprocessor}{\#define\ STBIR\_ASSERT(x)\ assert(x)}}
\DoxyCodeLine{00392\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00393\ }
\DoxyCodeLine{00394\ \textcolor{comment}{//\ For\ memset}}
\DoxyCodeLine{00395\ \textcolor{preprocessor}{\#include\ <string.h>}}
\DoxyCodeLine{00396\ }
\DoxyCodeLine{00397\ \textcolor{preprocessor}{\#include\ <math.h>}}
\DoxyCodeLine{00398\ }
\DoxyCodeLine{00399\ \textcolor{preprocessor}{\#ifndef\ STBIR\_MALLOC}}
\DoxyCodeLine{00400\ \textcolor{preprocessor}{\#include\ <stdlib.h>}}
\DoxyCodeLine{00401\ \textcolor{comment}{//\ use\ comma\ operator\ to\ evaluate\ c,\ to\ avoid\ "{}unused\ parameter"{}\ warnings}}
\DoxyCodeLine{00402\ \textcolor{preprocessor}{\#define\ STBIR\_MALLOC(size,c)\ ((void)(c),\ malloc(size))}}
\DoxyCodeLine{00403\ \textcolor{preprocessor}{\#define\ STBIR\_FREE(ptr,c)\ \ \ \ ((void)(c),\ free(ptr))}}
\DoxyCodeLine{00404\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00405\ }
\DoxyCodeLine{00406\ \textcolor{preprocessor}{\#ifndef\ \_MSC\_VER}}
\DoxyCodeLine{00407\ \textcolor{preprocessor}{\#ifdef\ \_\_cplusplus}}
\DoxyCodeLine{00408\ \textcolor{preprocessor}{\#define\ stbir\_\_inline\ inline}}
\DoxyCodeLine{00409\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{00410\ \textcolor{preprocessor}{\#define\ stbir\_\_inline}}
\DoxyCodeLine{00411\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00412\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{00413\ \textcolor{preprocessor}{\#define\ stbir\_\_inline\ \_\_forceinline}}
\DoxyCodeLine{00414\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00415\ }
\DoxyCodeLine{00416\ }
\DoxyCodeLine{00417\ \textcolor{comment}{//\ should\ produce\ compiler\ error\ if\ size\ is\ wrong}}
\DoxyCodeLine{00418\ \textcolor{keyword}{typedef}\ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{char}\ stbir\_\_validate\_uint32[\textcolor{keyword}{sizeof}(stbir\_uint32)\ ==\ 4\ ?\ 1\ :\ -\/1];}
\DoxyCodeLine{00419\ }
\DoxyCodeLine{00420\ \textcolor{preprocessor}{\#ifdef\ \_MSC\_VER}}
\DoxyCodeLine{00421\ \textcolor{preprocessor}{\#define\ STBIR\_\_NOTUSED(v)\ \ (void)(v)}}
\DoxyCodeLine{00422\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{00423\ \textcolor{preprocessor}{\#define\ STBIR\_\_NOTUSED(v)\ \ (void)sizeof(v)}}
\DoxyCodeLine{00424\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00425\ }
\DoxyCodeLine{00426\ \textcolor{preprocessor}{\#define\ STBIR\_\_ARRAY\_SIZE(a)\ (sizeof((a))/sizeof((a)[0]))}}
\DoxyCodeLine{00427\ }
\DoxyCodeLine{00428\ \textcolor{preprocessor}{\#ifndef\ STBIR\_DEFAULT\_FILTER\_UPSAMPLE}}
\DoxyCodeLine{00429\ \textcolor{preprocessor}{\#define\ STBIR\_DEFAULT\_FILTER\_UPSAMPLE\ \ \ \ STBIR\_FILTER\_CATMULLROM}}
\DoxyCodeLine{00430\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00431\ }
\DoxyCodeLine{00432\ \textcolor{preprocessor}{\#ifndef\ STBIR\_DEFAULT\_FILTER\_DOWNSAMPLE}}
\DoxyCodeLine{00433\ \textcolor{preprocessor}{\#define\ STBIR\_DEFAULT\_FILTER\_DOWNSAMPLE\ \ STBIR\_FILTER\_MITCHELL}}
\DoxyCodeLine{00434\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00435\ }
\DoxyCodeLine{00436\ \textcolor{preprocessor}{\#ifndef\ STBIR\_PROGRESS\_REPORT}}
\DoxyCodeLine{00437\ \textcolor{preprocessor}{\#define\ STBIR\_PROGRESS\_REPORT(float\_0\_to\_1)}}
\DoxyCodeLine{00438\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00439\ }
\DoxyCodeLine{00440\ \textcolor{preprocessor}{\#ifndef\ STBIR\_MAX\_CHANNELS}}
\DoxyCodeLine{00441\ \textcolor{preprocessor}{\#define\ STBIR\_MAX\_CHANNELS\ 64}}
\DoxyCodeLine{00442\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00443\ }
\DoxyCodeLine{00444\ \textcolor{preprocessor}{\#if\ STBIR\_MAX\_CHANNELS\ >\ 65536}}
\DoxyCodeLine{00445\ \textcolor{preprocessor}{\#error\ "{}Too\ many\ channels;\ STBIR\_MAX\_CHANNELS\ must\ be\ no\ more\ than\ 65536."{}}}
\DoxyCodeLine{00446\ \textcolor{comment}{//\ because\ we\ store\ the\ indices\ in\ 16-\/bit\ variables}}
\DoxyCodeLine{00447\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00448\ }
\DoxyCodeLine{00449\ \textcolor{comment}{//\ This\ value\ is\ added\ to\ alpha\ just\ before\ premultiplication\ to\ avoid}}
\DoxyCodeLine{00450\ \textcolor{comment}{//\ zeroing\ out\ color\ values.\ It\ is\ equivalent\ to\ 2\string^-\/80.\ If\ you\ don't\ want}}
\DoxyCodeLine{00451\ \textcolor{comment}{//\ that\ behavior\ (it\ may\ interfere\ if\ you\ have\ floating\ point\ images\ with}}
\DoxyCodeLine{00452\ \textcolor{comment}{//\ very\ small\ alpha\ values)\ then\ you\ can\ define\ STBIR\_NO\_ALPHA\_EPSILON\ to}}
\DoxyCodeLine{00453\ \textcolor{comment}{//\ disable\ it.}}
\DoxyCodeLine{00454\ \textcolor{preprocessor}{\#ifndef\ STBIR\_ALPHA\_EPSILON}}
\DoxyCodeLine{00455\ \textcolor{preprocessor}{\#define\ STBIR\_ALPHA\_EPSILON\ ((float)1\ /\ (1\ <<\ 20)\ /\ (1\ <<\ 20)\ /\ (1\ <<\ 20)\ /\ (1\ <<\ 20))}}
\DoxyCodeLine{00456\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00457\ }
\DoxyCodeLine{00458\ }
\DoxyCodeLine{00459\ }
\DoxyCodeLine{00460\ \textcolor{preprocessor}{\#ifdef\ \_MSC\_VER}}
\DoxyCodeLine{00461\ \textcolor{preprocessor}{\#define\ STBIR\_\_UNUSED\_PARAM(v)\ \ (void)(v)}}
\DoxyCodeLine{00462\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{00463\ \textcolor{preprocessor}{\#define\ STBIR\_\_UNUSED\_PARAM(v)\ \ (void)sizeof(v)}}
\DoxyCodeLine{00464\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00465\ }
\DoxyCodeLine{00466\ \textcolor{comment}{//\ must\ match\ stbir\_datatype}}
\DoxyCodeLine{00467\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{char}\ stbir\_\_type\_size[]\ =\ \{}
\DoxyCodeLine{00468\ \ \ \ \ 1,\ \textcolor{comment}{//\ STBIR\_TYPE\_UINT8}}
\DoxyCodeLine{00469\ \ \ \ \ 2,\ \textcolor{comment}{//\ STBIR\_TYPE\_UINT16}}
\DoxyCodeLine{00470\ \ \ \ \ 4,\ \textcolor{comment}{//\ STBIR\_TYPE\_UINT32}}
\DoxyCodeLine{00471\ \ \ \ \ 4,\ \textcolor{comment}{//\ STBIR\_TYPE\_FLOAT}}
\DoxyCodeLine{00472\ \};}
\DoxyCodeLine{00473\ }
\DoxyCodeLine{00474\ \textcolor{comment}{//\ Kernel\ function\ centered\ at\ 0}}
\DoxyCodeLine{00475\ \textcolor{keyword}{typedef}\ float\ (stbir\_\_kernel\_fn)(\textcolor{keywordtype}{float}\ x,\ \textcolor{keywordtype}{float}\ scale);}
\DoxyCodeLine{00476\ \textcolor{keyword}{typedef}\ float\ (stbir\_\_support\_fn)(\textcolor{keywordtype}{float}\ scale);}
\DoxyCodeLine{00477\ }
\DoxyCodeLine{00478\ \textcolor{keyword}{typedef}\ \textcolor{keyword}{struct}}
\DoxyCodeLine{00479\ \{}
\DoxyCodeLine{00480\ \ \ \ \ stbir\_\_kernel\_fn*\ kernel;}
\DoxyCodeLine{00481\ \ \ \ \ stbir\_\_support\_fn*\ support;}
\DoxyCodeLine{00482\ \}\ stbir\_\_filter\_info;}
\DoxyCodeLine{00483\ }
\DoxyCodeLine{00484\ \textcolor{comment}{//\ When\ upsampling,\ the\ contributors\ are\ which\ source\ pixels\ contribute.}}
\DoxyCodeLine{00485\ \textcolor{comment}{//\ When\ downsampling,\ the\ contributors\ are\ which\ destination\ pixels\ are\ contributed\ to.}}
\DoxyCodeLine{00486\ \textcolor{keyword}{typedef}\ \textcolor{keyword}{struct}}
\DoxyCodeLine{00487\ \{}
\DoxyCodeLine{00488\ \ \ \ \ \textcolor{keywordtype}{int}\ n0;\ \textcolor{comment}{//\ First\ contributing\ pixel}}
\DoxyCodeLine{00489\ \ \ \ \ \textcolor{keywordtype}{int}\ n1;\ \textcolor{comment}{//\ Last\ contributing\ pixel}}
\DoxyCodeLine{00490\ \}\ stbir\_\_contributors;}
\DoxyCodeLine{00491\ }
\DoxyCodeLine{00492\ \textcolor{keyword}{typedef}\ \textcolor{keyword}{struct}}
\DoxyCodeLine{00493\ \{}
\DoxyCodeLine{00494\ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{void}*\ input\_data;}
\DoxyCodeLine{00495\ \ \ \ \ \textcolor{keywordtype}{int}\ input\_w;}
\DoxyCodeLine{00496\ \ \ \ \ \textcolor{keywordtype}{int}\ input\_h;}
\DoxyCodeLine{00497\ \ \ \ \ \textcolor{keywordtype}{int}\ input\_stride\_bytes;}
\DoxyCodeLine{00498\ }
\DoxyCodeLine{00499\ \ \ \ \ \textcolor{keywordtype}{void}*\ output\_data;}
\DoxyCodeLine{00500\ \ \ \ \ \textcolor{keywordtype}{int}\ output\_w;}
\DoxyCodeLine{00501\ \ \ \ \ \textcolor{keywordtype}{int}\ output\_h;}
\DoxyCodeLine{00502\ \ \ \ \ \textcolor{keywordtype}{int}\ output\_stride\_bytes;}
\DoxyCodeLine{00503\ }
\DoxyCodeLine{00504\ \ \ \ \ \textcolor{keywordtype}{float}\ s0,\ t0,\ s1,\ t1;}
\DoxyCodeLine{00505\ }
\DoxyCodeLine{00506\ \ \ \ \ \textcolor{keywordtype}{float}\ horizontal\_shift;\ \textcolor{comment}{//\ Units:\ output\ pixels}}
\DoxyCodeLine{00507\ \ \ \ \ \textcolor{keywordtype}{float}\ vertical\_shift;\ \ \ \textcolor{comment}{//\ Units:\ output\ pixels}}
\DoxyCodeLine{00508\ \ \ \ \ \textcolor{keywordtype}{float}\ horizontal\_scale;}
\DoxyCodeLine{00509\ \ \ \ \ \textcolor{keywordtype}{float}\ vertical\_scale;}
\DoxyCodeLine{00510\ }
\DoxyCodeLine{00511\ \ \ \ \ \textcolor{keywordtype}{int}\ channels;}
\DoxyCodeLine{00512\ \ \ \ \ \textcolor{keywordtype}{int}\ alpha\_channel;}
\DoxyCodeLine{00513\ \ \ \ \ stbir\_uint32\ flags;}
\DoxyCodeLine{00514\ \ \ \ \ stbir\_datatype\ type;}
\DoxyCodeLine{00515\ \ \ \ \ stbir\_filter\ horizontal\_filter;}
\DoxyCodeLine{00516\ \ \ \ \ stbir\_filter\ vertical\_filter;}
\DoxyCodeLine{00517\ \ \ \ \ stbir\_edge\ edge\_horizontal;}
\DoxyCodeLine{00518\ \ \ \ \ stbir\_edge\ edge\_vertical;}
\DoxyCodeLine{00519\ \ \ \ \ stbir\_colorspace\ colorspace;}
\DoxyCodeLine{00520\ }
\DoxyCodeLine{00521\ \ \ \ \ stbir\_\_contributors*\ horizontal\_contributors;}
\DoxyCodeLine{00522\ \ \ \ \ \textcolor{keywordtype}{float}*\ horizontal\_coefficients;}
\DoxyCodeLine{00523\ }
\DoxyCodeLine{00524\ \ \ \ \ stbir\_\_contributors*\ vertical\_contributors;}
\DoxyCodeLine{00525\ \ \ \ \ \textcolor{keywordtype}{float}*\ vertical\_coefficients;}
\DoxyCodeLine{00526\ }
\DoxyCodeLine{00527\ \ \ \ \ \textcolor{keywordtype}{int}\ decode\_buffer\_pixels;}
\DoxyCodeLine{00528\ \ \ \ \ \textcolor{keywordtype}{float}*\ decode\_buffer;}
\DoxyCodeLine{00529\ }
\DoxyCodeLine{00530\ \ \ \ \ \textcolor{keywordtype}{float}*\ horizontal\_buffer;}
\DoxyCodeLine{00531\ }
\DoxyCodeLine{00532\ \ \ \ \ \textcolor{comment}{//\ cache\ these\ because\ ceil/floor\ are\ inexplicably\ showing\ up\ in\ profile}}
\DoxyCodeLine{00533\ \ \ \ \ \textcolor{keywordtype}{int}\ horizontal\_coefficient\_width;}
\DoxyCodeLine{00534\ \ \ \ \ \textcolor{keywordtype}{int}\ vertical\_coefficient\_width;}
\DoxyCodeLine{00535\ \ \ \ \ \textcolor{keywordtype}{int}\ horizontal\_filter\_pixel\_width;}
\DoxyCodeLine{00536\ \ \ \ \ \textcolor{keywordtype}{int}\ vertical\_filter\_pixel\_width;}
\DoxyCodeLine{00537\ \ \ \ \ \textcolor{keywordtype}{int}\ horizontal\_filter\_pixel\_margin;}
\DoxyCodeLine{00538\ \ \ \ \ \textcolor{keywordtype}{int}\ vertical\_filter\_pixel\_margin;}
\DoxyCodeLine{00539\ \ \ \ \ \textcolor{keywordtype}{int}\ horizontal\_num\_contributors;}
\DoxyCodeLine{00540\ \ \ \ \ \textcolor{keywordtype}{int}\ vertical\_num\_contributors;}
\DoxyCodeLine{00541\ }
\DoxyCodeLine{00542\ \ \ \ \ \textcolor{keywordtype}{int}\ ring\_buffer\_length\_bytes;\ \ \ \textcolor{comment}{//\ The\ length\ of\ an\ individual\ entry\ in\ the\ ring\ buffer.\ The\ total\ number\ of\ ring\ buffers\ is\ stbir\_\_get\_filter\_pixel\_width(filter)}}
\DoxyCodeLine{00543\ \ \ \ \ \textcolor{keywordtype}{int}\ ring\_buffer\_num\_entries;\ \ \ \ \textcolor{comment}{//\ Total\ number\ of\ entries\ in\ the\ ring\ buffer.}}
\DoxyCodeLine{00544\ \ \ \ \ \textcolor{keywordtype}{int}\ ring\_buffer\_first\_scanline;}
\DoxyCodeLine{00545\ \ \ \ \ \textcolor{keywordtype}{int}\ ring\_buffer\_last\_scanline;}
\DoxyCodeLine{00546\ \ \ \ \ \textcolor{keywordtype}{int}\ ring\_buffer\_begin\_index;\ \ \ \ \textcolor{comment}{//\ first\_scanline\ is\ at\ this\ index\ in\ the\ ring\ buffer}}
\DoxyCodeLine{00547\ \ \ \ \ \textcolor{keywordtype}{float}*\ ring\_buffer;}
\DoxyCodeLine{00548\ }
\DoxyCodeLine{00549\ \ \ \ \ \textcolor{keywordtype}{float}*\ encode\_buffer;\ \textcolor{comment}{//\ A\ temporary\ buffer\ to\ store\ floats\ so\ we\ don't\ lose\ precision\ while\ we\ do\ multiply-\/adds.}}
\DoxyCodeLine{00550\ }
\DoxyCodeLine{00551\ \ \ \ \ \textcolor{keywordtype}{int}\ horizontal\_contributors\_size;}
\DoxyCodeLine{00552\ \ \ \ \ \textcolor{keywordtype}{int}\ horizontal\_coefficients\_size;}
\DoxyCodeLine{00553\ \ \ \ \ \textcolor{keywordtype}{int}\ vertical\_contributors\_size;}
\DoxyCodeLine{00554\ \ \ \ \ \textcolor{keywordtype}{int}\ vertical\_coefficients\_size;}
\DoxyCodeLine{00555\ \ \ \ \ \textcolor{keywordtype}{int}\ decode\_buffer\_size;}
\DoxyCodeLine{00556\ \ \ \ \ \textcolor{keywordtype}{int}\ horizontal\_buffer\_size;}
\DoxyCodeLine{00557\ \ \ \ \ \textcolor{keywordtype}{int}\ ring\_buffer\_size;}
\DoxyCodeLine{00558\ \ \ \ \ \textcolor{keywordtype}{int}\ encode\_buffer\_size;}
\DoxyCodeLine{00559\ \}\ stbir\_\_info;}
\DoxyCodeLine{00560\ }
\DoxyCodeLine{00561\ }
\DoxyCodeLine{00562\ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{float}\ stbir\_\_max\_uint8\_as\_float\ \ =\ 255.0f;}
\DoxyCodeLine{00563\ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{float}\ stbir\_\_max\_uint16\_as\_float\ =\ 65535.0f;}
\DoxyCodeLine{00564\ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{double}\ stbir\_\_max\_uint32\_as\_float\ =\ 4294967295.0;}
\DoxyCodeLine{00565\ }
\DoxyCodeLine{00566\ }
\DoxyCodeLine{00567\ \textcolor{keyword}{static}\ stbir\_\_inline\ \textcolor{keywordtype}{int}\ stbir\_\_min(\textcolor{keywordtype}{int}\ a,\ \textcolor{keywordtype}{int}\ b)}
\DoxyCodeLine{00568\ \{}
\DoxyCodeLine{00569\ \ \ \ \ \textcolor{keywordflow}{return}\ a\ <\ b\ ?\ a\ :\ b;}
\DoxyCodeLine{00570\ \}}
\DoxyCodeLine{00571\ }
\DoxyCodeLine{00572\ \textcolor{keyword}{static}\ stbir\_\_inline\ \textcolor{keywordtype}{float}\ stbir\_\_saturate(\textcolor{keywordtype}{float}\ x)}
\DoxyCodeLine{00573\ \{}
\DoxyCodeLine{00574\ \ \ \ \ \textcolor{keywordflow}{if}\ (x\ <\ 0)}
\DoxyCodeLine{00575\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ 0;}
\DoxyCodeLine{00576\ }
\DoxyCodeLine{00577\ \ \ \ \ \textcolor{keywordflow}{if}\ (x\ >\ 1)}
\DoxyCodeLine{00578\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ 1;}
\DoxyCodeLine{00579\ }
\DoxyCodeLine{00580\ \ \ \ \ \textcolor{keywordflow}{return}\ x;}
\DoxyCodeLine{00581\ \}}
\DoxyCodeLine{00582\ }
\DoxyCodeLine{00583\ \textcolor{preprocessor}{\#ifdef\ STBIR\_SATURATE\_INT}}
\DoxyCodeLine{00584\ \textcolor{keyword}{static}\ stbir\_\_inline\ stbir\_uint8\ stbir\_\_saturate8(\textcolor{keywordtype}{int}\ x)}
\DoxyCodeLine{00585\ \{}
\DoxyCodeLine{00586\ \ \ \ \ \textcolor{keywordflow}{if}\ ((\textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int})\ x\ <=\ 255)}
\DoxyCodeLine{00587\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ x;}
\DoxyCodeLine{00588\ }
\DoxyCodeLine{00589\ \ \ \ \ \textcolor{keywordflow}{if}\ (x\ <\ 0)}
\DoxyCodeLine{00590\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ 0;}
\DoxyCodeLine{00591\ }
\DoxyCodeLine{00592\ \ \ \ \ \textcolor{keywordflow}{return}\ 255;}
\DoxyCodeLine{00593\ \}}
\DoxyCodeLine{00594\ }
\DoxyCodeLine{00595\ \textcolor{keyword}{static}\ stbir\_\_inline\ stbir\_uint16\ stbir\_\_saturate16(\textcolor{keywordtype}{int}\ x)}
\DoxyCodeLine{00596\ \{}
\DoxyCodeLine{00597\ \ \ \ \ \textcolor{keywordflow}{if}\ ((\textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int})\ x\ <=\ 65535)}
\DoxyCodeLine{00598\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ x;}
\DoxyCodeLine{00599\ }
\DoxyCodeLine{00600\ \ \ \ \ \textcolor{keywordflow}{if}\ (x\ <\ 0)}
\DoxyCodeLine{00601\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ 0;}
\DoxyCodeLine{00602\ }
\DoxyCodeLine{00603\ \ \ \ \ \textcolor{keywordflow}{return}\ 65535;}
\DoxyCodeLine{00604\ \}}
\DoxyCodeLine{00605\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00606\ }
\DoxyCodeLine{00607\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{float}\ stbir\_\_srgb\_uchar\_to\_linear\_float[256]\ =\ \{}
\DoxyCodeLine{00608\ \ \ \ \ 0.000000f,\ 0.000304f,\ 0.000607f,\ 0.000911f,\ 0.001214f,\ 0.001518f,\ 0.001821f,\ 0.002125f,\ 0.002428f,\ 0.002732f,\ 0.003035f,}
\DoxyCodeLine{00609\ \ \ \ \ 0.003347f,\ 0.003677f,\ 0.004025f,\ 0.004391f,\ 0.004777f,\ 0.005182f,\ 0.005605f,\ 0.006049f,\ 0.006512f,\ 0.006995f,\ 0.007499f,}
\DoxyCodeLine{00610\ \ \ \ \ 0.008023f,\ 0.008568f,\ 0.009134f,\ 0.009721f,\ 0.010330f,\ 0.010960f,\ 0.011612f,\ 0.012286f,\ 0.012983f,\ 0.013702f,\ 0.014444f,}
\DoxyCodeLine{00611\ \ \ \ \ 0.015209f,\ 0.015996f,\ 0.016807f,\ 0.017642f,\ 0.018500f,\ 0.019382f,\ 0.020289f,\ 0.021219f,\ 0.022174f,\ 0.023153f,\ 0.024158f,}
\DoxyCodeLine{00612\ \ \ \ \ 0.025187f,\ 0.026241f,\ 0.027321f,\ 0.028426f,\ 0.029557f,\ 0.030713f,\ 0.031896f,\ 0.033105f,\ 0.034340f,\ 0.035601f,\ 0.036889f,}
\DoxyCodeLine{00613\ \ \ \ \ 0.038204f,\ 0.039546f,\ 0.040915f,\ 0.042311f,\ 0.043735f,\ 0.045186f,\ 0.046665f,\ 0.048172f,\ 0.049707f,\ 0.051269f,\ 0.052861f,}
\DoxyCodeLine{00614\ \ \ \ \ 0.054480f,\ 0.056128f,\ 0.057805f,\ 0.059511f,\ 0.061246f,\ 0.063010f,\ 0.064803f,\ 0.066626f,\ 0.068478f,\ 0.070360f,\ 0.072272f,}
\DoxyCodeLine{00615\ \ \ \ \ 0.074214f,\ 0.076185f,\ 0.078187f,\ 0.080220f,\ 0.082283f,\ 0.084376f,\ 0.086500f,\ 0.088656f,\ 0.090842f,\ 0.093059f,\ 0.095307f,}
\DoxyCodeLine{00616\ \ \ \ \ 0.097587f,\ 0.099899f,\ 0.102242f,\ 0.104616f,\ 0.107023f,\ 0.109462f,\ 0.111932f,\ 0.114435f,\ 0.116971f,\ 0.119538f,\ 0.122139f,}
\DoxyCodeLine{00617\ \ \ \ \ 0.124772f,\ 0.127438f,\ 0.130136f,\ 0.132868f,\ 0.135633f,\ 0.138432f,\ 0.141263f,\ 0.144128f,\ 0.147027f,\ 0.149960f,\ 0.152926f,}
\DoxyCodeLine{00618\ \ \ \ \ 0.155926f,\ 0.158961f,\ 0.162029f,\ 0.165132f,\ 0.168269f,\ 0.171441f,\ 0.174647f,\ 0.177888f,\ 0.181164f,\ 0.184475f,\ 0.187821f,}
\DoxyCodeLine{00619\ \ \ \ \ 0.191202f,\ 0.194618f,\ 0.198069f,\ 0.201556f,\ 0.205079f,\ 0.208637f,\ 0.212231f,\ 0.215861f,\ 0.219526f,\ 0.223228f,\ 0.226966f,}
\DoxyCodeLine{00620\ \ \ \ \ 0.230740f,\ 0.234551f,\ 0.238398f,\ 0.242281f,\ 0.246201f,\ 0.250158f,\ 0.254152f,\ 0.258183f,\ 0.262251f,\ 0.266356f,\ 0.270498f,}
\DoxyCodeLine{00621\ \ \ \ \ 0.274677f,\ 0.278894f,\ 0.283149f,\ 0.287441f,\ 0.291771f,\ 0.296138f,\ 0.300544f,\ 0.304987f,\ 0.309469f,\ 0.313989f,\ 0.318547f,}
\DoxyCodeLine{00622\ \ \ \ \ 0.323143f,\ 0.327778f,\ 0.332452f,\ 0.337164f,\ 0.341914f,\ 0.346704f,\ 0.351533f,\ 0.356400f,\ 0.361307f,\ 0.366253f,\ 0.371238f,}
\DoxyCodeLine{00623\ \ \ \ \ 0.376262f,\ 0.381326f,\ 0.386430f,\ 0.391573f,\ 0.396755f,\ 0.401978f,\ 0.407240f,\ 0.412543f,\ 0.417885f,\ 0.423268f,\ 0.428691f,}
\DoxyCodeLine{00624\ \ \ \ \ 0.434154f,\ 0.439657f,\ 0.445201f,\ 0.450786f,\ 0.456411f,\ 0.462077f,\ 0.467784f,\ 0.473532f,\ 0.479320f,\ 0.485150f,\ 0.491021f,}
\DoxyCodeLine{00625\ \ \ \ \ 0.496933f,\ 0.502887f,\ 0.508881f,\ 0.514918f,\ 0.520996f,\ 0.527115f,\ 0.533276f,\ 0.539480f,\ 0.545725f,\ 0.552011f,\ 0.558340f,}
\DoxyCodeLine{00626\ \ \ \ \ 0.564712f,\ 0.571125f,\ 0.577581f,\ 0.584078f,\ 0.590619f,\ 0.597202f,\ 0.603827f,\ 0.610496f,\ 0.617207f,\ 0.623960f,\ 0.630757f,}
\DoxyCodeLine{00627\ \ \ \ \ 0.637597f,\ 0.644480f,\ 0.651406f,\ 0.658375f,\ 0.665387f,\ 0.672443f,\ 0.679543f,\ 0.686685f,\ 0.693872f,\ 0.701102f,\ 0.708376f,}
\DoxyCodeLine{00628\ \ \ \ \ 0.715694f,\ 0.723055f,\ 0.730461f,\ 0.737911f,\ 0.745404f,\ 0.752942f,\ 0.760525f,\ 0.768151f,\ 0.775822f,\ 0.783538f,\ 0.791298f,}
\DoxyCodeLine{00629\ \ \ \ \ 0.799103f,\ 0.806952f,\ 0.814847f,\ 0.822786f,\ 0.830770f,\ 0.838799f,\ 0.846873f,\ 0.854993f,\ 0.863157f,\ 0.871367f,\ 0.879622f,}
\DoxyCodeLine{00630\ \ \ \ \ 0.887923f,\ 0.896269f,\ 0.904661f,\ 0.913099f,\ 0.921582f,\ 0.930111f,\ 0.938686f,\ 0.947307f,\ 0.955974f,\ 0.964686f,\ 0.973445f,}
\DoxyCodeLine{00631\ \ \ \ \ 0.982251f,\ 0.991102f,\ 1.0f}
\DoxyCodeLine{00632\ \};}
\DoxyCodeLine{00633\ }
\DoxyCodeLine{00634\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{float}\ stbir\_\_srgb\_to\_linear(\textcolor{keywordtype}{float}\ f)}
\DoxyCodeLine{00635\ \{}
\DoxyCodeLine{00636\ \ \ \ \ \textcolor{keywordflow}{if}\ (f\ <=\ 0.04045f)}
\DoxyCodeLine{00637\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ f\ /\ 12.92f;}
\DoxyCodeLine{00638\ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{00639\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ (\textcolor{keywordtype}{float})pow((f\ +\ 0.055f)\ /\ 1.055f,\ 2.4f);}
\DoxyCodeLine{00640\ \}}
\DoxyCodeLine{00641\ }
\DoxyCodeLine{00642\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{float}\ stbir\_\_linear\_to\_srgb(\textcolor{keywordtype}{float}\ f)}
\DoxyCodeLine{00643\ \{}
\DoxyCodeLine{00644\ \ \ \ \ \textcolor{keywordflow}{if}\ (f\ <=\ 0.0031308f)}
\DoxyCodeLine{00645\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ f\ *\ 12.92f;}
\DoxyCodeLine{00646\ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{00647\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ 1.055f\ *\ (float)pow(f,\ 1\ /\ 2.4f)\ -\/\ 0.055f;}
\DoxyCodeLine{00648\ \}}
\DoxyCodeLine{00649\ }
\DoxyCodeLine{00650\ \textcolor{preprocessor}{\#ifndef\ STBIR\_NON\_IEEE\_FLOAT}}
\DoxyCodeLine{00651\ \textcolor{comment}{//\ From\ https://gist.github.com/rygorous/2203834}}
\DoxyCodeLine{00652\ }
\DoxyCodeLine{00653\ \textcolor{keyword}{typedef}\ \textcolor{keyword}{union}}
\DoxyCodeLine{00654\ \{}
\DoxyCodeLine{00655\ \ \ \ \ stbir\_uint32\ u;}
\DoxyCodeLine{00656\ \ \ \ \ \textcolor{keywordtype}{float}\ f;}
\DoxyCodeLine{00657\ \}\ stbir\_\_FP32;}
\DoxyCodeLine{00658\ }
\DoxyCodeLine{00659\ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ stbir\_uint32\ fp32\_to\_srgb8\_tab4[104]\ =\ \{}
\DoxyCodeLine{00660\ \ \ \ \ 0x0073000d,\ 0x007a000d,\ 0x0080000d,\ 0x0087000d,\ 0x008d000d,\ 0x0094000d,\ 0x009a000d,\ 0x00a1000d,}
\DoxyCodeLine{00661\ \ \ \ \ 0x00a7001a,\ 0x00b4001a,\ 0x00c1001a,\ 0x00ce001a,\ 0x00da001a,\ 0x00e7001a,\ 0x00f4001a,\ 0x0101001a,}
\DoxyCodeLine{00662\ \ \ \ \ 0x010e0033,\ 0x01280033,\ 0x01410033,\ 0x015b0033,\ 0x01750033,\ 0x018f0033,\ 0x01a80033,\ 0x01c20033,}
\DoxyCodeLine{00663\ \ \ \ \ 0x01dc0067,\ 0x020f0067,\ 0x02430067,\ 0x02760067,\ 0x02aa0067,\ 0x02dd0067,\ 0x03110067,\ 0x03440067,}
\DoxyCodeLine{00664\ \ \ \ \ 0x037800ce,\ 0x03df00ce,\ 0x044600ce,\ 0x04ad00ce,\ 0x051400ce,\ 0x057b00c5,\ 0x05dd00bc,\ 0x063b00b5,}
\DoxyCodeLine{00665\ \ \ \ \ 0x06970158,\ 0x07420142,\ 0x07e30130,\ 0x087b0120,\ 0x090b0112,\ 0x09940106,\ 0x0a1700fc,\ 0x0a9500f2,}
\DoxyCodeLine{00666\ \ \ \ \ 0x0b0f01cb,\ 0x0bf401ae,\ 0x0ccb0195,\ 0x0d950180,\ 0x0e56016e,\ 0x0f0d015e,\ 0x0fbc0150,\ 0x10630143,}
\DoxyCodeLine{00667\ \ \ \ \ 0x11070264,\ 0x1238023e,\ 0x1357021d,\ 0x14660201,\ 0x156601e9,\ 0x165a01d3,\ 0x174401c0,\ 0x182401af,}
\DoxyCodeLine{00668\ \ \ \ \ 0x18fe0331,\ 0x1a9602fe,\ 0x1c1502d2,\ 0x1d7e02ad,\ 0x1ed4028d,\ 0x201a0270,\ 0x21520256,\ 0x227d0240,}
\DoxyCodeLine{00669\ \ \ \ \ 0x239f0443,\ 0x25c003fe,\ 0x27bf03c4,\ 0x29a10392,\ 0x2b6a0367,\ 0x2d1d0341,\ 0x2ebe031f,\ 0x304d0300,}
\DoxyCodeLine{00670\ \ \ \ \ 0x31d105b0,\ 0x34a80555,\ 0x37520507,\ 0x39d504c5,\ 0x3c37048b,\ 0x3e7c0458,\ 0x40a8042a,\ 0x42bd0401,}
\DoxyCodeLine{00671\ \ \ \ \ 0x44c20798,\ 0x488e071e,\ 0x4c1c06b6,\ 0x4f76065d,\ 0x52a50610,\ 0x55ac05cc,\ 0x5892058f,\ 0x5b590559,}
\DoxyCodeLine{00672\ \ \ \ \ 0x5e0c0a23,\ 0x631c0980,\ 0x67db08f6,\ 0x6c55087f,\ 0x70940818,\ 0x74a007bd,\ 0x787d076c,\ 0x7c330723,}
\DoxyCodeLine{00673\ \};}
\DoxyCodeLine{00674\ }
\DoxyCodeLine{00675\ \textcolor{keyword}{static}\ stbir\_uint8\ stbir\_\_linear\_to\_srgb\_uchar(\textcolor{keywordtype}{float}\ in)}
\DoxyCodeLine{00676\ \{}
\DoxyCodeLine{00677\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ stbir\_\_FP32\ almostone\ =\ \{\ 0x3f7fffff\ \};\ \textcolor{comment}{//\ 1-\/eps}}
\DoxyCodeLine{00678\ \ \ \ \ \textcolor{keyword}{static}\ \textcolor{keyword}{const}\ stbir\_\_FP32\ minval\ =\ \{\ (127-\/13)\ <<\ 23\ \};}
\DoxyCodeLine{00679\ \ \ \ \ stbir\_uint32\ tab,bias,scale,t;}
\DoxyCodeLine{00680\ \ \ \ \ stbir\_\_FP32\ f;}
\DoxyCodeLine{00681\ }
\DoxyCodeLine{00682\ \ \ \ \ \textcolor{comment}{//\ Clamp\ to\ [2\string^(-\/13),\ 1-\/eps];\ these\ two\ values\ map\ to\ 0\ and\ 1,\ respectively.}}
\DoxyCodeLine{00683\ \ \ \ \ \textcolor{comment}{//\ The\ tests\ are\ carefully\ written\ so\ that\ NaNs\ map\ to\ 0,\ same\ as\ in\ the\ reference}}
\DoxyCodeLine{00684\ \ \ \ \ \textcolor{comment}{//\ implementation.}}
\DoxyCodeLine{00685\ \ \ \ \ \textcolor{keywordflow}{if}\ (!(in\ >\ minval.f))\ \textcolor{comment}{//\ written\ this\ way\ to\ catch\ NaNs}}
\DoxyCodeLine{00686\ \ \ \ \ \ \ \ \ in\ =\ minval.f;}
\DoxyCodeLine{00687\ \ \ \ \ if\ (in\ >\ almostone.f)}
\DoxyCodeLine{00688\ \ \ \ \ \ \ \ \ in\ =\ almostone.f;}
\DoxyCodeLine{00689\ }
\DoxyCodeLine{00690\ \ \ \ \ \textcolor{comment}{//\ Do\ the\ table\ lookup\ and\ unpack\ bias,\ scale}}
\DoxyCodeLine{00691\ \ \ \ \ f.f\ =\ in;}
\DoxyCodeLine{00692\ \ \ \ \ tab\ =\ fp32\_to\_srgb8\_tab4[(f.u\ -\/\ minval.u)\ >>\ 20];}
\DoxyCodeLine{00693\ \ \ \ \ bias\ =\ (tab\ >>\ 16)\ <<\ 9;}
\DoxyCodeLine{00694\ \ \ \ \ scale\ =\ tab\ \&\ 0xffff;}
\DoxyCodeLine{00695\ }
\DoxyCodeLine{00696\ \ \ \ \ \textcolor{comment}{//\ Grab\ next-\/highest\ mantissa\ bits\ and\ perform\ linear\ interpolation}}
\DoxyCodeLine{00697\ \ \ \ \ t\ =\ (f.u\ >>\ 12)\ \&\ 0xff;}
\DoxyCodeLine{00698\ \ \ \ \ \textcolor{keywordflow}{return}\ (\textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{char})\ ((bias\ +\ scale*t)\ >>\ 16);}
\DoxyCodeLine{00699\ \}}
\DoxyCodeLine{00700\ }
\DoxyCodeLine{00701\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{00702\ \textcolor{comment}{//\ sRGB\ transition\ values,\ scaled\ by\ 1<<28}}
\DoxyCodeLine{00703\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{int}\ stbir\_\_srgb\_offset\_to\_linear\_scaled[256]\ =}
\DoxyCodeLine{00704\ \{}
\DoxyCodeLine{00705\ \ \ \ \ \ \ \ \ \ \ \ \ 0,\ \ \ \ \ 40738,\ \ \ \ 122216,\ \ \ \ 203693,\ \ \ \ 285170,\ \ \ \ 366648,\ \ \ \ 448125,\ \ \ \ 529603,}
\DoxyCodeLine{00706\ \ \ \ \ \ \ \ 611080,\ \ \ \ 692557,\ \ \ \ 774035,\ \ \ \ 855852,\ \ \ \ 942009,\ \ \ 1033024,\ \ \ 1128971,\ \ \ 1229926,}
\DoxyCodeLine{00707\ \ \ \ \ \ \ 1335959,\ \ \ 1447142,\ \ \ 1563542,\ \ \ 1685229,\ \ \ 1812268,\ \ \ 1944725,\ \ \ 2082664,\ \ \ 2226148,}
\DoxyCodeLine{00708\ \ \ \ \ \ \ 2375238,\ \ \ 2529996,\ \ \ 2690481,\ \ \ 2856753,\ \ \ 3028870,\ \ \ 3206888,\ \ \ 3390865,\ \ \ 3580856,}
\DoxyCodeLine{00709\ \ \ \ \ \ \ 3776916,\ \ \ 3979100,\ \ \ 4187460,\ \ \ 4402049,\ \ \ 4622919,\ \ \ 4850123,\ \ \ 5083710,\ \ \ 5323731,}
\DoxyCodeLine{00710\ \ \ \ \ \ \ 5570236,\ \ \ 5823273,\ \ \ 6082892,\ \ \ 6349140,\ \ \ 6622065,\ \ \ 6901714,\ \ \ 7188133,\ \ \ 7481369,}
\DoxyCodeLine{00711\ \ \ \ \ \ \ 7781466,\ \ \ 8088471,\ \ \ 8402427,\ \ \ 8723380,\ \ \ 9051372,\ \ \ 9386448,\ \ \ 9728650,\ \ 10078021,}
\DoxyCodeLine{00712\ \ \ \ \ \ 10434603,\ \ 10798439,\ \ 11169569,\ \ 11548036,\ \ 11933879,\ \ 12327139,\ \ 12727857,\ \ 13136073,}
\DoxyCodeLine{00713\ \ \ \ \ \ 13551826,\ \ 13975156,\ \ 14406100,\ \ 14844697,\ \ 15290987,\ \ 15745007,\ \ 16206795,\ \ 16676389,}
\DoxyCodeLine{00714\ \ \ \ \ \ 17153826,\ \ 17639142,\ \ 18132374,\ \ 18633560,\ \ 19142734,\ \ 19659934,\ \ 20185196,\ \ 20718552,}
\DoxyCodeLine{00715\ \ \ \ \ \ 21260042,\ \ 21809696,\ \ 22367554,\ \ 22933648,\ \ 23508010,\ \ 24090680,\ \ 24681686,\ \ 25281066,}
\DoxyCodeLine{00716\ \ \ \ \ \ 25888850,\ \ 26505076,\ \ 27129772,\ \ 27762974,\ \ 28404716,\ \ 29055026,\ \ 29713942,\ \ 30381490,}
\DoxyCodeLine{00717\ \ \ \ \ \ 31057708,\ \ 31742624,\ \ 32436272,\ \ 33138682,\ \ 33849884,\ \ 34569912,\ \ 35298800,\ \ 36036568,}
\DoxyCodeLine{00718\ \ \ \ \ \ 36783260,\ \ 37538896,\ \ 38303512,\ \ 39077136,\ \ 39859796,\ \ 40651528,\ \ 41452360,\ \ 42262316,}
\DoxyCodeLine{00719\ \ \ \ \ \ 43081432,\ \ 43909732,\ \ 44747252,\ \ 45594016,\ \ 46450052,\ \ 47315392,\ \ 48190064,\ \ 49074096,}
\DoxyCodeLine{00720\ \ \ \ \ \ 49967516,\ \ 50870356,\ \ 51782636,\ \ 52704392,\ \ 53635648,\ \ 54576432,\ \ 55526772,\ \ 56486700,}
\DoxyCodeLine{00721\ \ \ \ \ \ 57456236,\ \ 58435408,\ \ 59424248,\ \ 60422780,\ \ 61431036,\ \ 62449032,\ \ 63476804,\ \ 64514376,}
\DoxyCodeLine{00722\ \ \ \ \ \ 65561776,\ \ 66619028,\ \ 67686160,\ \ 68763192,\ \ 69850160,\ \ 70947088,\ \ 72053992,\ \ 73170912,}
\DoxyCodeLine{00723\ \ \ \ \ \ 74297864,\ \ 75434880,\ \ 76581976,\ \ 77739184,\ \ 78906536,\ \ 80084040,\ \ 81271736,\ \ 82469648,}
\DoxyCodeLine{00724\ \ \ \ \ \ 83677792,\ \ 84896192,\ \ 86124888,\ \ 87363888,\ \ 88613232,\ \ 89872928,\ \ 91143016,\ \ 92423512,}
\DoxyCodeLine{00725\ \ \ \ \ \ 93714432,\ \ 95015816,\ \ 96327688,\ \ 97650056,\ \ 98982952,\ 100326408,\ 101680440,\ 103045072,}
\DoxyCodeLine{00726\ \ \ \ \ 104420320,\ 105806224,\ 107202800,\ 108610064,\ 110028048,\ 111456776,\ 112896264,\ 114346544,}
\DoxyCodeLine{00727\ \ \ \ \ 115807632,\ 117279552,\ 118762328,\ 120255976,\ 121760536,\ 123276016,\ 124802440,\ 126339832,}
\DoxyCodeLine{00728\ \ \ \ \ 127888216,\ 129447616,\ 131018048,\ 132599544,\ 134192112,\ 135795792,\ 137410592,\ 139036528,}
\DoxyCodeLine{00729\ \ \ \ \ 140673648,\ 142321952,\ 143981456,\ 145652208,\ 147334208,\ 149027488,\ 150732064,\ 152447968,}
\DoxyCodeLine{00730\ \ \ \ \ 154175200,\ 155913792,\ 157663776,\ 159425168,\ 161197984,\ 162982240,\ 164777968,\ 166585184,}
\DoxyCodeLine{00731\ \ \ \ \ 168403904,\ 170234160,\ 172075968,\ 173929344,\ 175794320,\ 177670896,\ 179559120,\ 181458992,}
\DoxyCodeLine{00732\ \ \ \ \ 183370528,\ 185293776,\ 187228736,\ 189175424,\ 191133888,\ 193104112,\ 195086128,\ 197079968,}
\DoxyCodeLine{00733\ \ \ \ \ 199085648,\ 201103184,\ 203132592,\ 205173888,\ 207227120,\ 209292272,\ 211369392,\ 213458480,}
\DoxyCodeLine{00734\ \ \ \ \ 215559568,\ 217672656,\ 219797792,\ 221934976,\ 224084240,\ 226245600,\ 228419056,\ 230604656,}
\DoxyCodeLine{00735\ \ \ \ \ 232802400,\ 235012320,\ 237234432,\ 239468736,\ 241715280,\ 243974080,\ 246245120,\ 248528464,}
\DoxyCodeLine{00736\ \ \ \ \ 250824112,\ 253132064,\ 255452368,\ 257785040,\ 260130080,\ 262487520,\ 264857376,\ 267239664,}
\DoxyCodeLine{00737\ \};}
\DoxyCodeLine{00738\ }
\DoxyCodeLine{00739\ \textcolor{keyword}{static}\ stbir\_uint8\ stbir\_\_linear\_to\_srgb\_uchar(\textcolor{keywordtype}{float}\ f)}
\DoxyCodeLine{00740\ \{}
\DoxyCodeLine{00741\ \ \ \ \ \textcolor{keywordtype}{int}\ x\ =\ (int)\ (f\ *\ (1\ <<\ 28));\ \textcolor{comment}{//\ has\ headroom\ so\ you\ don't\ need\ to\ clamp}}
\DoxyCodeLine{00742\ \ \ \ \ \textcolor{keywordtype}{int}\ v\ =\ 0;}
\DoxyCodeLine{00743\ \ \ \ \ \textcolor{keywordtype}{int}\ i;}
\DoxyCodeLine{00744\ }
\DoxyCodeLine{00745\ \ \ \ \ \textcolor{comment}{//\ Refine\ the\ guess\ with\ a\ short\ binary\ search.}}
\DoxyCodeLine{00746\ \ \ \ \ i\ =\ v\ +\ 128;\ \textcolor{keywordflow}{if}\ (x\ >=\ stbir\_\_srgb\_offset\_to\_linear\_scaled[i])\ v\ =\ i;}
\DoxyCodeLine{00747\ \ \ \ \ i\ =\ v\ +\ \ 64;\ \textcolor{keywordflow}{if}\ (x\ >=\ stbir\_\_srgb\_offset\_to\_linear\_scaled[i])\ v\ =\ i;}
\DoxyCodeLine{00748\ \ \ \ \ i\ =\ v\ +\ \ 32;\ \textcolor{keywordflow}{if}\ (x\ >=\ stbir\_\_srgb\_offset\_to\_linear\_scaled[i])\ v\ =\ i;}
\DoxyCodeLine{00749\ \ \ \ \ i\ =\ v\ +\ \ 16;\ \textcolor{keywordflow}{if}\ (x\ >=\ stbir\_\_srgb\_offset\_to\_linear\_scaled[i])\ v\ =\ i;}
\DoxyCodeLine{00750\ \ \ \ \ i\ =\ v\ +\ \ \ 8;\ \textcolor{keywordflow}{if}\ (x\ >=\ stbir\_\_srgb\_offset\_to\_linear\_scaled[i])\ v\ =\ i;}
\DoxyCodeLine{00751\ \ \ \ \ i\ =\ v\ +\ \ \ 4;\ \textcolor{keywordflow}{if}\ (x\ >=\ stbir\_\_srgb\_offset\_to\_linear\_scaled[i])\ v\ =\ i;}
\DoxyCodeLine{00752\ \ \ \ \ i\ =\ v\ +\ \ \ 2;\ \textcolor{keywordflow}{if}\ (x\ >=\ stbir\_\_srgb\_offset\_to\_linear\_scaled[i])\ v\ =\ i;}
\DoxyCodeLine{00753\ \ \ \ \ i\ =\ v\ +\ \ \ 1;\ \textcolor{keywordflow}{if}\ (x\ >=\ stbir\_\_srgb\_offset\_to\_linear\_scaled[i])\ v\ =\ i;}
\DoxyCodeLine{00754\ }
\DoxyCodeLine{00755\ \ \ \ \ \textcolor{keywordflow}{return}\ (stbir\_uint8)\ v;}
\DoxyCodeLine{00756\ \}}
\DoxyCodeLine{00757\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00758\ }
\DoxyCodeLine{00759\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{float}\ stbir\_\_filter\_trapezoid(\textcolor{keywordtype}{float}\ x,\ \textcolor{keywordtype}{float}\ scale)}
\DoxyCodeLine{00760\ \{}
\DoxyCodeLine{00761\ \ \ \ \ \textcolor{keywordtype}{float}\ halfscale\ =\ scale\ /\ 2;}
\DoxyCodeLine{00762\ \ \ \ \ \textcolor{keywordtype}{float}\ t\ =\ 0.5f\ +\ halfscale;}
\DoxyCodeLine{00763\ \ \ \ \ STBIR\_ASSERT(scale\ <=\ 1);}
\DoxyCodeLine{00764\ }
\DoxyCodeLine{00765\ \ \ \ \ x\ =\ (float)fabs(x);}
\DoxyCodeLine{00766\ }
\DoxyCodeLine{00767\ \ \ \ \ \textcolor{keywordflow}{if}\ (x\ >=\ t)}
\DoxyCodeLine{00768\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ 0;}
\DoxyCodeLine{00769\ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{00770\ \ \ \ \ \{}
\DoxyCodeLine{00771\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ r\ =\ 0.5f\ -\/\ halfscale;}
\DoxyCodeLine{00772\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (x\ <=\ r)}
\DoxyCodeLine{00773\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ 1;}
\DoxyCodeLine{00774\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{00775\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ (t\ -\/\ x)\ /\ scale;}
\DoxyCodeLine{00776\ \ \ \ \ \}}
\DoxyCodeLine{00777\ \}}
\DoxyCodeLine{00778\ }
\DoxyCodeLine{00779\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{float}\ stbir\_\_support\_trapezoid(\textcolor{keywordtype}{float}\ scale)}
\DoxyCodeLine{00780\ \{}
\DoxyCodeLine{00781\ \ \ \ \ STBIR\_ASSERT(scale\ <=\ 1);}
\DoxyCodeLine{00782\ \ \ \ \ \textcolor{keywordflow}{return}\ 0.5f\ +\ scale\ /\ 2;}
\DoxyCodeLine{00783\ \}}
\DoxyCodeLine{00784\ }
\DoxyCodeLine{00785\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{float}\ stbir\_\_filter\_triangle(\textcolor{keywordtype}{float}\ x,\ \textcolor{keywordtype}{float}\ s)}
\DoxyCodeLine{00786\ \{}
\DoxyCodeLine{00787\ \ \ \ \ STBIR\_\_UNUSED\_PARAM(s);}
\DoxyCodeLine{00788\ }
\DoxyCodeLine{00789\ \ \ \ \ x\ =\ (float)fabs(x);}
\DoxyCodeLine{00790\ }
\DoxyCodeLine{00791\ \ \ \ \ \textcolor{keywordflow}{if}\ (x\ <=\ 1.0f)}
\DoxyCodeLine{00792\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ 1\ -\/\ x;}
\DoxyCodeLine{00793\ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{00794\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ 0;}
\DoxyCodeLine{00795\ \}}
\DoxyCodeLine{00796\ }
\DoxyCodeLine{00797\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{float}\ stbir\_\_filter\_cubic(\textcolor{keywordtype}{float}\ x,\ \textcolor{keywordtype}{float}\ s)}
\DoxyCodeLine{00798\ \{}
\DoxyCodeLine{00799\ \ \ \ \ STBIR\_\_UNUSED\_PARAM(s);}
\DoxyCodeLine{00800\ }
\DoxyCodeLine{00801\ \ \ \ \ x\ =\ (float)fabs(x);}
\DoxyCodeLine{00802\ }
\DoxyCodeLine{00803\ \ \ \ \ \textcolor{keywordflow}{if}\ (x\ <\ 1.0f)}
\DoxyCodeLine{00804\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ (4\ +\ x*x*(3*x\ -\/\ 6))/6;}
\DoxyCodeLine{00805\ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (x\ <\ 2.0f)}
\DoxyCodeLine{00806\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ (8\ +\ x*(-\/12\ +\ x*(6\ -\/\ x)))/6;}
\DoxyCodeLine{00807\ }
\DoxyCodeLine{00808\ \ \ \ \ \textcolor{keywordflow}{return}\ (0.0f);}
\DoxyCodeLine{00809\ \}}
\DoxyCodeLine{00810\ }
\DoxyCodeLine{00811\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{float}\ stbir\_\_filter\_catmullrom(\textcolor{keywordtype}{float}\ x,\ \textcolor{keywordtype}{float}\ s)}
\DoxyCodeLine{00812\ \{}
\DoxyCodeLine{00813\ \ \ \ \ STBIR\_\_UNUSED\_PARAM(s);}
\DoxyCodeLine{00814\ }
\DoxyCodeLine{00815\ \ \ \ \ x\ =\ (float)fabs(x);}
\DoxyCodeLine{00816\ }
\DoxyCodeLine{00817\ \ \ \ \ \textcolor{keywordflow}{if}\ (x\ <\ 1.0f)}
\DoxyCodeLine{00818\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ 1\ -\/\ x*x*(2.5f\ -\/\ 1.5f*x);}
\DoxyCodeLine{00819\ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (x\ <\ 2.0f)}
\DoxyCodeLine{00820\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ 2\ -\/\ x*(4\ +\ x*(0.5f*x\ -\/\ 2.5f));}
\DoxyCodeLine{00821\ }
\DoxyCodeLine{00822\ \ \ \ \ \textcolor{keywordflow}{return}\ (0.0f);}
\DoxyCodeLine{00823\ \}}
\DoxyCodeLine{00824\ }
\DoxyCodeLine{00825\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{float}\ stbir\_\_filter\_mitchell(\textcolor{keywordtype}{float}\ x,\ \textcolor{keywordtype}{float}\ s)}
\DoxyCodeLine{00826\ \{}
\DoxyCodeLine{00827\ \ \ \ \ STBIR\_\_UNUSED\_PARAM(s);}
\DoxyCodeLine{00828\ }
\DoxyCodeLine{00829\ \ \ \ \ x\ =\ (float)fabs(x);}
\DoxyCodeLine{00830\ }
\DoxyCodeLine{00831\ \ \ \ \ \textcolor{keywordflow}{if}\ (x\ <\ 1.0f)}
\DoxyCodeLine{00832\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ (16\ +\ x*x*(21\ *\ x\ -\/\ 36))/18;}
\DoxyCodeLine{00833\ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (x\ <\ 2.0f)}
\DoxyCodeLine{00834\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ (32\ +\ x*(-\/60\ +\ x*(36\ -\/\ 7*x)))/18;}
\DoxyCodeLine{00835\ }
\DoxyCodeLine{00836\ \ \ \ \ \textcolor{keywordflow}{return}\ (0.0f);}
\DoxyCodeLine{00837\ \}}
\DoxyCodeLine{00838\ }
\DoxyCodeLine{00839\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{float}\ stbir\_\_support\_zero(\textcolor{keywordtype}{float}\ s)}
\DoxyCodeLine{00840\ \{}
\DoxyCodeLine{00841\ \ \ \ \ STBIR\_\_UNUSED\_PARAM(s);}
\DoxyCodeLine{00842\ \ \ \ \ \textcolor{keywordflow}{return}\ 0;}
\DoxyCodeLine{00843\ \}}
\DoxyCodeLine{00844\ }
\DoxyCodeLine{00845\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{float}\ stbir\_\_support\_one(\textcolor{keywordtype}{float}\ s)}
\DoxyCodeLine{00846\ \{}
\DoxyCodeLine{00847\ \ \ \ \ STBIR\_\_UNUSED\_PARAM(s);}
\DoxyCodeLine{00848\ \ \ \ \ \textcolor{keywordflow}{return}\ 1;}
\DoxyCodeLine{00849\ \}}
\DoxyCodeLine{00850\ }
\DoxyCodeLine{00851\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{float}\ stbir\_\_support\_two(\textcolor{keywordtype}{float}\ s)}
\DoxyCodeLine{00852\ \{}
\DoxyCodeLine{00853\ \ \ \ \ STBIR\_\_UNUSED\_PARAM(s);}
\DoxyCodeLine{00854\ \ \ \ \ \textcolor{keywordflow}{return}\ 2;}
\DoxyCodeLine{00855\ \}}
\DoxyCodeLine{00856\ }
\DoxyCodeLine{00857\ \textcolor{keyword}{static}\ stbir\_\_filter\_info\ stbir\_\_filter\_info\_table[]\ =\ \{}
\DoxyCodeLine{00858\ \ \ \ \ \ \ \ \ \{\ NULL,\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ stbir\_\_support\_zero\ \},}
\DoxyCodeLine{00859\ \ \ \ \ \ \ \ \ \{\ stbir\_\_filter\_trapezoid,\ \ stbir\_\_support\_trapezoid\ \},}
\DoxyCodeLine{00860\ \ \ \ \ \ \ \ \ \{\ stbir\_\_filter\_triangle,\ \ \ stbir\_\_support\_one\ \},}
\DoxyCodeLine{00861\ \ \ \ \ \ \ \ \ \{\ stbir\_\_filter\_cubic,\ \ \ \ \ \ stbir\_\_support\_two\ \},}
\DoxyCodeLine{00862\ \ \ \ \ \ \ \ \ \{\ stbir\_\_filter\_catmullrom,\ stbir\_\_support\_two\ \},}
\DoxyCodeLine{00863\ \ \ \ \ \ \ \ \ \{\ stbir\_\_filter\_mitchell,\ \ \ stbir\_\_support\_two\ \},}
\DoxyCodeLine{00864\ \};}
\DoxyCodeLine{00865\ }
\DoxyCodeLine{00866\ stbir\_\_inline\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{int}\ stbir\_\_use\_upsampling(\textcolor{keywordtype}{float}\ ratio)}
\DoxyCodeLine{00867\ \{}
\DoxyCodeLine{00868\ \ \ \ \ \textcolor{keywordflow}{return}\ ratio\ >\ 1;}
\DoxyCodeLine{00869\ \}}
\DoxyCodeLine{00870\ }
\DoxyCodeLine{00871\ stbir\_\_inline\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{int}\ stbir\_\_use\_width\_upsampling(stbir\_\_info*\ stbir\_info)}
\DoxyCodeLine{00872\ \{}
\DoxyCodeLine{00873\ \ \ \ \ \textcolor{keywordflow}{return}\ stbir\_\_use\_upsampling(stbir\_info-\/>horizontal\_scale);}
\DoxyCodeLine{00874\ \}}
\DoxyCodeLine{00875\ }
\DoxyCodeLine{00876\ stbir\_\_inline\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{int}\ stbir\_\_use\_height\_upsampling(stbir\_\_info*\ stbir\_info)}
\DoxyCodeLine{00877\ \{}
\DoxyCodeLine{00878\ \ \ \ \ \textcolor{keywordflow}{return}\ stbir\_\_use\_upsampling(stbir\_info-\/>vertical\_scale);}
\DoxyCodeLine{00879\ \}}
\DoxyCodeLine{00880\ }
\DoxyCodeLine{00881\ \textcolor{comment}{//\ This\ is\ the\ maximum\ number\ of\ input\ samples\ that\ can\ affect\ an\ output\ sample}}
\DoxyCodeLine{00882\ \textcolor{comment}{//\ with\ the\ given\ filter}}
\DoxyCodeLine{00883\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{int}\ stbir\_\_get\_filter\_pixel\_width(stbir\_filter\ filter,\ \textcolor{keywordtype}{float}\ scale)}
\DoxyCodeLine{00884\ \{}
\DoxyCodeLine{00885\ \ \ \ \ STBIR\_ASSERT(filter\ !=\ 0);}
\DoxyCodeLine{00886\ \ \ \ \ STBIR\_ASSERT(filter\ <\ STBIR\_\_ARRAY\_SIZE(stbir\_\_filter\_info\_table));}
\DoxyCodeLine{00887\ }
\DoxyCodeLine{00888\ \ \ \ \ \textcolor{keywordflow}{if}\ (stbir\_\_use\_upsampling(scale))}
\DoxyCodeLine{00889\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ (\textcolor{keywordtype}{int})ceil(stbir\_\_filter\_info\_table[filter].support(1/scale)\ *\ 2);}
\DoxyCodeLine{00890\ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{00891\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ (\textcolor{keywordtype}{int})ceil(stbir\_\_filter\_info\_table[filter].support(scale)\ *\ 2\ /\ scale);}
\DoxyCodeLine{00892\ \}}
\DoxyCodeLine{00893\ }
\DoxyCodeLine{00894\ \textcolor{comment}{//\ This\ is\ how\ much\ to\ expand\ buffers\ to\ account\ for\ filters\ seeking\ outside}}
\DoxyCodeLine{00895\ \textcolor{comment}{//\ the\ image\ boundaries.}}
\DoxyCodeLine{00896\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{int}\ stbir\_\_get\_filter\_pixel\_margin(stbir\_filter\ filter,\ \textcolor{keywordtype}{float}\ scale)}
\DoxyCodeLine{00897\ \{}
\DoxyCodeLine{00898\ \ \ \ \ \textcolor{keywordflow}{return}\ stbir\_\_get\_filter\_pixel\_width(filter,\ scale)\ /\ 2;}
\DoxyCodeLine{00899\ \}}
\DoxyCodeLine{00900\ }
\DoxyCodeLine{00901\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{int}\ stbir\_\_get\_coefficient\_width(stbir\_filter\ filter,\ \textcolor{keywordtype}{float}\ scale)}
\DoxyCodeLine{00902\ \{}
\DoxyCodeLine{00903\ \ \ \ \ \textcolor{keywordflow}{if}\ (stbir\_\_use\_upsampling(scale))}
\DoxyCodeLine{00904\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ (\textcolor{keywordtype}{int})ceil(stbir\_\_filter\_info\_table[filter].support(1\ /\ scale)\ *\ 2);}
\DoxyCodeLine{00905\ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{00906\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ (\textcolor{keywordtype}{int})ceil(stbir\_\_filter\_info\_table[filter].support(scale)\ *\ 2);}
\DoxyCodeLine{00907\ \}}
\DoxyCodeLine{00908\ }
\DoxyCodeLine{00909\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{int}\ stbir\_\_get\_contributors(\textcolor{keywordtype}{float}\ scale,\ stbir\_filter\ filter,\ \textcolor{keywordtype}{int}\ input\_size,\ \textcolor{keywordtype}{int}\ output\_size)}
\DoxyCodeLine{00910\ \{}
\DoxyCodeLine{00911\ \ \ \ \ \textcolor{keywordflow}{if}\ (stbir\_\_use\_upsampling(scale))}
\DoxyCodeLine{00912\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ output\_size;}
\DoxyCodeLine{00913\ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{00914\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ (input\_size\ +\ stbir\_\_get\_filter\_pixel\_margin(filter,\ scale)\ *\ 2);}
\DoxyCodeLine{00915\ \}}
\DoxyCodeLine{00916\ }
\DoxyCodeLine{00917\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{int}\ stbir\_\_get\_total\_horizontal\_coefficients(stbir\_\_info*\ info)}
\DoxyCodeLine{00918\ \{}
\DoxyCodeLine{00919\ \ \ \ \ \textcolor{keywordflow}{return}\ info-\/>horizontal\_num\_contributors}
\DoxyCodeLine{00920\ \ \ \ \ \ \ \ \ \ *\ stbir\_\_get\_coefficient\_width\ \ \ \ \ \ (info-\/>horizontal\_filter,\ info-\/>horizontal\_scale);}
\DoxyCodeLine{00921\ \}}
\DoxyCodeLine{00922\ }
\DoxyCodeLine{00923\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{int}\ stbir\_\_get\_total\_vertical\_coefficients(stbir\_\_info*\ info)}
\DoxyCodeLine{00924\ \{}
\DoxyCodeLine{00925\ \ \ \ \ \textcolor{keywordflow}{return}\ info-\/>vertical\_num\_contributors}
\DoxyCodeLine{00926\ \ \ \ \ \ \ \ \ \ *\ stbir\_\_get\_coefficient\_width\ \ \ \ \ \ (info-\/>vertical\_filter,\ info-\/>vertical\_scale);}
\DoxyCodeLine{00927\ \}}
\DoxyCodeLine{00928\ }
\DoxyCodeLine{00929\ \textcolor{keyword}{static}\ stbir\_\_contributors*\ stbir\_\_get\_contributor(stbir\_\_contributors*\ contributors,\ \textcolor{keywordtype}{int}\ n)}
\DoxyCodeLine{00930\ \{}
\DoxyCodeLine{00931\ \ \ \ \ \textcolor{keywordflow}{return}\ \&contributors[n];}
\DoxyCodeLine{00932\ \}}
\DoxyCodeLine{00933\ }
\DoxyCodeLine{00934\ \textcolor{comment}{//\ For\ perf\ reasons\ this\ code\ is\ duplicated\ in\ stbir\_\_resample\_horizontal\_upsample/downsample,}}
\DoxyCodeLine{00935\ \textcolor{comment}{//\ if\ you\ change\ it\ here\ change\ it\ there\ too.}}
\DoxyCodeLine{00936\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{float}*\ stbir\_\_get\_coefficient(\textcolor{keywordtype}{float}*\ coefficients,\ stbir\_filter\ filter,\ \textcolor{keywordtype}{float}\ scale,\ \textcolor{keywordtype}{int}\ n,\ \textcolor{keywordtype}{int}\ c)}
\DoxyCodeLine{00937\ \{}
\DoxyCodeLine{00938\ \ \ \ \ \textcolor{keywordtype}{int}\ width\ =\ stbir\_\_get\_coefficient\_width(filter,\ scale);}
\DoxyCodeLine{00939\ \ \ \ \ \textcolor{keywordflow}{return}\ \&coefficients[width*n\ +\ c];}
\DoxyCodeLine{00940\ \}}
\DoxyCodeLine{00941\ }
\DoxyCodeLine{00942\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{int}\ stbir\_\_edge\_wrap\_slow(stbir\_edge\ edge,\ \textcolor{keywordtype}{int}\ n,\ \textcolor{keywordtype}{int}\ max)}
\DoxyCodeLine{00943\ \{}
\DoxyCodeLine{00944\ \ \ \ \ \textcolor{keywordflow}{switch}\ (edge)}
\DoxyCodeLine{00945\ \ \ \ \ \{}
\DoxyCodeLine{00946\ \ \ \ \ \textcolor{keywordflow}{case}\ STBIR\_EDGE\_ZERO:}
\DoxyCodeLine{00947\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ 0;\ \textcolor{comment}{//\ we'll\ decode\ the\ wrong\ pixel\ here,\ and\ then\ overwrite\ with\ 0s\ later}}
\DoxyCodeLine{00948\ }
\DoxyCodeLine{00949\ \ \ \ \ \textcolor{keywordflow}{case}\ STBIR\_EDGE\_CLAMP:}
\DoxyCodeLine{00950\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (n\ <\ 0)}
\DoxyCodeLine{00951\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ 0;}
\DoxyCodeLine{00952\ }
\DoxyCodeLine{00953\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (n\ >=\ max)}
\DoxyCodeLine{00954\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ max\ -\/\ 1;}
\DoxyCodeLine{00955\ }
\DoxyCodeLine{00956\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ n;\ \textcolor{comment}{//\ NOTREACHED}}
\DoxyCodeLine{00957\ }
\DoxyCodeLine{00958\ \ \ \ \ \textcolor{keywordflow}{case}\ STBIR\_EDGE\_REFLECT:}
\DoxyCodeLine{00959\ \ \ \ \ \{}
\DoxyCodeLine{00960\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (n\ <\ 0)}
\DoxyCodeLine{00961\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00962\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (n\ <\ max)}
\DoxyCodeLine{00963\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ -\/n;}
\DoxyCodeLine{00964\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{00965\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ max\ -\/\ 1;}
\DoxyCodeLine{00966\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00967\ }
\DoxyCodeLine{00968\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (n\ >=\ max)}
\DoxyCodeLine{00969\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00970\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ max2\ =\ max\ *\ 2;}
\DoxyCodeLine{00971\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (n\ >=\ max2)}
\DoxyCodeLine{00972\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ 0;}
\DoxyCodeLine{00973\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{00974\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ max2\ -\/\ n\ -\/\ 1;}
\DoxyCodeLine{00975\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00976\ }
\DoxyCodeLine{00977\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ n;\ \textcolor{comment}{//\ NOTREACHED}}
\DoxyCodeLine{00978\ \ \ \ \ \}}
\DoxyCodeLine{00979\ }
\DoxyCodeLine{00980\ \ \ \ \ \textcolor{keywordflow}{case}\ STBIR\_EDGE\_WRAP:}
\DoxyCodeLine{00981\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (n\ >=\ 0)}
\DoxyCodeLine{00982\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ (n\ \%\ max);}
\DoxyCodeLine{00983\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{00984\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{00985\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ m\ =\ (-\/n)\ \%\ max;}
\DoxyCodeLine{00986\ }
\DoxyCodeLine{00987\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (m\ !=\ 0)}
\DoxyCodeLine{00988\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ m\ =\ max\ -\/\ m;}
\DoxyCodeLine{00989\ }
\DoxyCodeLine{00990\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ (m);}
\DoxyCodeLine{00991\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00992\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ NOTREACHED}}
\DoxyCodeLine{00993\ }
\DoxyCodeLine{00994\ \ \ \ \ \textcolor{keywordflow}{default}:}
\DoxyCodeLine{00995\ \ \ \ \ \ \ \ \ STBIR\_ASSERT(!\textcolor{stringliteral}{"{}Unimplemented\ edge\ type"{}});}
\DoxyCodeLine{00996\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ 0;}
\DoxyCodeLine{00997\ \ \ \ \ \}}
\DoxyCodeLine{00998\ \}}
\DoxyCodeLine{00999\ }
\DoxyCodeLine{01000\ stbir\_\_inline\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{int}\ stbir\_\_edge\_wrap(stbir\_edge\ edge,\ \textcolor{keywordtype}{int}\ n,\ \textcolor{keywordtype}{int}\ max)}
\DoxyCodeLine{01001\ \{}
\DoxyCodeLine{01002\ \ \ \ \ \textcolor{comment}{//\ avoid\ per-\/pixel\ switch}}
\DoxyCodeLine{01003\ \ \ \ \ \textcolor{keywordflow}{if}\ (n\ >=\ 0\ \&\&\ n\ <\ max)}
\DoxyCodeLine{01004\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ n;}
\DoxyCodeLine{01005\ \ \ \ \ \textcolor{keywordflow}{return}\ stbir\_\_edge\_wrap\_slow(edge,\ n,\ max);}
\DoxyCodeLine{01006\ \}}
\DoxyCodeLine{01007\ }
\DoxyCodeLine{01008\ \textcolor{comment}{//\ What\ input\ pixels\ contribute\ to\ this\ output\ pixel?}}
\DoxyCodeLine{01009\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ stbir\_\_calculate\_sample\_range\_upsample(\textcolor{keywordtype}{int}\ n,\ \textcolor{keywordtype}{float}\ out\_filter\_radius,\ \textcolor{keywordtype}{float}\ scale\_ratio,\ \textcolor{keywordtype}{float}\ out\_shift,\ \textcolor{keywordtype}{int}*\ in\_first\_pixel,\ \textcolor{keywordtype}{int}*\ in\_last\_pixel,\ \textcolor{keywordtype}{float}*\ in\_center\_of\_out)}
\DoxyCodeLine{01010\ \{}
\DoxyCodeLine{01011\ \ \ \ \ \textcolor{keywordtype}{float}\ out\_pixel\_center\ =\ (float)n\ +\ 0.5f;}
\DoxyCodeLine{01012\ \ \ \ \ \textcolor{keywordtype}{float}\ out\_pixel\_influence\_lowerbound\ =\ out\_pixel\_center\ -\/\ out\_filter\_radius;}
\DoxyCodeLine{01013\ \ \ \ \ \textcolor{keywordtype}{float}\ out\_pixel\_influence\_upperbound\ =\ out\_pixel\_center\ +\ out\_filter\_radius;}
\DoxyCodeLine{01014\ }
\DoxyCodeLine{01015\ \ \ \ \ \textcolor{keywordtype}{float}\ in\_pixel\_influence\_lowerbound\ =\ (out\_pixel\_influence\_lowerbound\ +\ out\_shift)\ /\ scale\_ratio;}
\DoxyCodeLine{01016\ \ \ \ \ \textcolor{keywordtype}{float}\ in\_pixel\_influence\_upperbound\ =\ (out\_pixel\_influence\_upperbound\ +\ out\_shift)\ /\ scale\_ratio;}
\DoxyCodeLine{01017\ }
\DoxyCodeLine{01018\ \ \ \ \ *in\_center\_of\_out\ =\ (out\_pixel\_center\ +\ out\_shift)\ /\ scale\_ratio;}
\DoxyCodeLine{01019\ \ \ \ \ *in\_first\_pixel\ =\ (int)(floor(in\_pixel\_influence\_lowerbound\ +\ 0.5));}
\DoxyCodeLine{01020\ \ \ \ \ *in\_last\_pixel\ =\ (int)(floor(in\_pixel\_influence\_upperbound\ -\/\ 0.5));}
\DoxyCodeLine{01021\ \}}
\DoxyCodeLine{01022\ }
\DoxyCodeLine{01023\ \textcolor{comment}{//\ What\ output\ pixels\ does\ this\ input\ pixel\ contribute\ to?}}
\DoxyCodeLine{01024\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ stbir\_\_calculate\_sample\_range\_downsample(\textcolor{keywordtype}{int}\ n,\ \textcolor{keywordtype}{float}\ in\_pixels\_radius,\ \textcolor{keywordtype}{float}\ scale\_ratio,\ \textcolor{keywordtype}{float}\ out\_shift,\ \textcolor{keywordtype}{int}*\ out\_first\_pixel,\ \textcolor{keywordtype}{int}*\ out\_last\_pixel,\ \textcolor{keywordtype}{float}*\ out\_center\_of\_in)}
\DoxyCodeLine{01025\ \{}
\DoxyCodeLine{01026\ \ \ \ \ \textcolor{keywordtype}{float}\ in\_pixel\_center\ =\ (float)n\ +\ 0.5f;}
\DoxyCodeLine{01027\ \ \ \ \ \textcolor{keywordtype}{float}\ in\_pixel\_influence\_lowerbound\ =\ in\_pixel\_center\ -\/\ in\_pixels\_radius;}
\DoxyCodeLine{01028\ \ \ \ \ \textcolor{keywordtype}{float}\ in\_pixel\_influence\_upperbound\ =\ in\_pixel\_center\ +\ in\_pixels\_radius;}
\DoxyCodeLine{01029\ }
\DoxyCodeLine{01030\ \ \ \ \ \textcolor{keywordtype}{float}\ out\_pixel\_influence\_lowerbound\ =\ in\_pixel\_influence\_lowerbound\ *\ scale\_ratio\ -\/\ out\_shift;}
\DoxyCodeLine{01031\ \ \ \ \ \textcolor{keywordtype}{float}\ out\_pixel\_influence\_upperbound\ =\ in\_pixel\_influence\_upperbound\ *\ scale\_ratio\ -\/\ out\_shift;}
\DoxyCodeLine{01032\ }
\DoxyCodeLine{01033\ \ \ \ \ *out\_center\_of\_in\ =\ in\_pixel\_center\ *\ scale\_ratio\ -\/\ out\_shift;}
\DoxyCodeLine{01034\ \ \ \ \ *out\_first\_pixel\ =\ (int)(floor(out\_pixel\_influence\_lowerbound\ +\ 0.5));}
\DoxyCodeLine{01035\ \ \ \ \ *out\_last\_pixel\ =\ (int)(floor(out\_pixel\_influence\_upperbound\ -\/\ 0.5));}
\DoxyCodeLine{01036\ \}}
\DoxyCodeLine{01037\ }
\DoxyCodeLine{01038\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ stbir\_\_calculate\_coefficients\_upsample(stbir\_filter\ filter,\ \textcolor{keywordtype}{float}\ scale,\ \textcolor{keywordtype}{int}\ in\_first\_pixel,\ \textcolor{keywordtype}{int}\ in\_last\_pixel,\ \textcolor{keywordtype}{float}\ in\_center\_of\_out,\ stbir\_\_contributors*\ contributor,\ \textcolor{keywordtype}{float}*\ coefficient\_group)}
\DoxyCodeLine{01039\ \{}
\DoxyCodeLine{01040\ \ \ \ \ \textcolor{keywordtype}{int}\ i;}
\DoxyCodeLine{01041\ \ \ \ \ \textcolor{keywordtype}{float}\ total\_filter\ =\ 0;}
\DoxyCodeLine{01042\ \ \ \ \ \textcolor{keywordtype}{float}\ filter\_scale;}
\DoxyCodeLine{01043\ }
\DoxyCodeLine{01044\ \ \ \ \ STBIR\_ASSERT(in\_last\_pixel\ -\/\ in\_first\_pixel\ <=\ (\textcolor{keywordtype}{int})ceil(stbir\_\_filter\_info\_table[filter].support(1/scale)\ *\ 2));\ \textcolor{comment}{//\ Taken\ directly\ from\ stbir\_\_get\_coefficient\_width()\ which\ we\ can't\ call\ because\ we\ don't\ know\ if\ we're\ horizontal\ or\ vertical.}}
\DoxyCodeLine{01045\ }
\DoxyCodeLine{01046\ \ \ \ \ contributor-\/>n0\ =\ in\_first\_pixel;}
\DoxyCodeLine{01047\ \ \ \ \ contributor-\/>n1\ =\ in\_last\_pixel;}
\DoxyCodeLine{01048\ }
\DoxyCodeLine{01049\ \ \ \ \ STBIR\_ASSERT(contributor-\/>n1\ >=\ contributor-\/>n0);}
\DoxyCodeLine{01050\ }
\DoxyCodeLine{01051\ \ \ \ \ \textcolor{keywordflow}{for}\ (i\ =\ 0;\ i\ <=\ in\_last\_pixel\ -\/\ in\_first\_pixel;\ i++)}
\DoxyCodeLine{01052\ \ \ \ \ \{}
\DoxyCodeLine{01053\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ in\_pixel\_center\ =\ (float)(i\ +\ in\_first\_pixel)\ +\ 0.5f;}
\DoxyCodeLine{01054\ \ \ \ \ \ \ \ \ coefficient\_group[i]\ =\ stbir\_\_filter\_info\_table[filter].kernel(in\_center\_of\_out\ -\/\ in\_pixel\_center,\ 1\ /\ scale);}
\DoxyCodeLine{01055\ }
\DoxyCodeLine{01056\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ If\ the\ coefficient\ is\ zero,\ skip\ it.\ (Don't\ do\ the\ <0\ check\ here,\ we\ want\ the\ influence\ of\ those\ outside\ pixels.)}}
\DoxyCodeLine{01057\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (i\ ==\ 0\ \&\&\ !coefficient\_group[i])}
\DoxyCodeLine{01058\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01059\ \ \ \ \ \ \ \ \ \ \ \ \ contributor-\/>n0\ =\ ++in\_first\_pixel;}
\DoxyCodeLine{01060\ \ \ \ \ \ \ \ \ \ \ \ \ i-\/-\/;}
\DoxyCodeLine{01061\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{continue};}
\DoxyCodeLine{01062\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01063\ }
\DoxyCodeLine{01064\ \ \ \ \ \ \ \ \ total\_filter\ +=\ coefficient\_group[i];}
\DoxyCodeLine{01065\ \ \ \ \ \}}
\DoxyCodeLine{01066\ }
\DoxyCodeLine{01067\ \ \ \ \ \textcolor{comment}{//\ NOTE(fg):\ Not\ actually\ true\ in\ general,\ nor\ is\ there\ any\ reason\ to\ expect\ it\ should\ be.}}
\DoxyCodeLine{01068\ \ \ \ \ \textcolor{comment}{//\ It\ would\ be\ true\ in\ exact\ math\ but\ is\ at\ best\ approximately\ true\ in\ floating-\/point\ math,}}
\DoxyCodeLine{01069\ \ \ \ \ \textcolor{comment}{//\ and\ it\ would\ not\ make\ sense\ to\ try\ and\ put\ actual\ bounds\ on\ this\ here\ because\ it\ depends}}
\DoxyCodeLine{01070\ \ \ \ \ \textcolor{comment}{//\ on\ the\ image\ aspect\ ratio\ which\ can\ get\ pretty\ extreme.}}
\DoxyCodeLine{01071\ \ \ \ \ \textcolor{comment}{//STBIR\_ASSERT(stbir\_\_filter\_info\_table[filter].kernel((float)(in\_last\_pixel\ +\ 1)\ +\ 0.5f\ -\/\ in\_center\_of\_out,\ 1/scale)\ ==\ 0);}}
\DoxyCodeLine{01072\ }
\DoxyCodeLine{01073\ \ \ \ \ STBIR\_ASSERT(total\_filter\ >\ 0.9);}
\DoxyCodeLine{01074\ \ \ \ \ STBIR\_ASSERT(total\_filter\ <\ 1.1f);\ \textcolor{comment}{//\ Make\ sure\ it's\ not\ way\ off.}}
\DoxyCodeLine{01075\ }
\DoxyCodeLine{01076\ \ \ \ \ \textcolor{comment}{//\ Make\ sure\ the\ sum\ of\ all\ coefficients\ is\ 1.}}
\DoxyCodeLine{01077\ \ \ \ \ filter\_scale\ =\ 1\ /\ total\_filter;}
\DoxyCodeLine{01078\ }
\DoxyCodeLine{01079\ \ \ \ \ \textcolor{keywordflow}{for}\ (i\ =\ 0;\ i\ <=\ in\_last\_pixel\ -\/\ in\_first\_pixel;\ i++)}
\DoxyCodeLine{01080\ \ \ \ \ \ \ \ \ coefficient\_group[i]\ *=\ filter\_scale;}
\DoxyCodeLine{01081\ }
\DoxyCodeLine{01082\ \ \ \ \ \textcolor{keywordflow}{for}\ (i\ =\ in\_last\_pixel\ -\/\ in\_first\_pixel;\ i\ >=\ 0;\ i-\/-\/)}
\DoxyCodeLine{01083\ \ \ \ \ \{}
\DoxyCodeLine{01084\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (coefficient\_group[i])}
\DoxyCodeLine{01085\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{01086\ }
\DoxyCodeLine{01087\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ This\ line\ has\ no\ weight.\ We\ can\ skip\ it.}}
\DoxyCodeLine{01088\ \ \ \ \ \ \ \ \ contributor-\/>n1\ =\ contributor-\/>n0\ +\ i\ -\/\ 1;}
\DoxyCodeLine{01089\ \ \ \ \ \}}
\DoxyCodeLine{01090\ \}}
\DoxyCodeLine{01091\ }
\DoxyCodeLine{01092\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ stbir\_\_calculate\_coefficients\_downsample(stbir\_filter\ filter,\ \textcolor{keywordtype}{float}\ scale\_ratio,\ \textcolor{keywordtype}{int}\ out\_first\_pixel,\ \textcolor{keywordtype}{int}\ out\_last\_pixel,\ \textcolor{keywordtype}{float}\ out\_center\_of\_in,\ stbir\_\_contributors*\ contributor,\ \textcolor{keywordtype}{float}*\ coefficient\_group)}
\DoxyCodeLine{01093\ \{}
\DoxyCodeLine{01094\ \ \ \ \ \textcolor{keywordtype}{int}\ i;}
\DoxyCodeLine{01095\ }
\DoxyCodeLine{01096\ \ \ \ \ STBIR\_ASSERT(out\_last\_pixel\ -\/\ out\_first\_pixel\ <=\ (\textcolor{keywordtype}{int})ceil(stbir\_\_filter\_info\_table[filter].support(scale\_ratio)\ *\ 2));\ \textcolor{comment}{//\ Taken\ directly\ from\ stbir\_\_get\_coefficient\_width()\ which\ we\ can't\ call\ because\ we\ don't\ know\ if\ we're\ horizontal\ or\ vertical.}}
\DoxyCodeLine{01097\ }
\DoxyCodeLine{01098\ \ \ \ \ contributor-\/>n0\ =\ out\_first\_pixel;}
\DoxyCodeLine{01099\ \ \ \ \ contributor-\/>n1\ =\ out\_last\_pixel;}
\DoxyCodeLine{01100\ }
\DoxyCodeLine{01101\ \ \ \ \ STBIR\_ASSERT(contributor-\/>n1\ >=\ contributor-\/>n0);}
\DoxyCodeLine{01102\ }
\DoxyCodeLine{01103\ \ \ \ \ \textcolor{keywordflow}{for}\ (i\ =\ 0;\ i\ <=\ out\_last\_pixel\ -\/\ out\_first\_pixel;\ i++)}
\DoxyCodeLine{01104\ \ \ \ \ \{}
\DoxyCodeLine{01105\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ out\_pixel\_center\ =\ (float)(i\ +\ out\_first\_pixel)\ +\ 0.5f;}
\DoxyCodeLine{01106\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ x\ =\ out\_pixel\_center\ -\/\ out\_center\_of\_in;}
\DoxyCodeLine{01107\ \ \ \ \ \ \ \ \ coefficient\_group[i]\ =\ stbir\_\_filter\_info\_table[filter].kernel(x,\ scale\_ratio)\ *\ scale\_ratio;}
\DoxyCodeLine{01108\ \ \ \ \ \}}
\DoxyCodeLine{01109\ }
\DoxyCodeLine{01110\ \ \ \ \ \textcolor{comment}{//\ NOTE(fg):\ Not\ actually\ true\ in\ general,\ nor\ is\ there\ any\ reason\ to\ expect\ it\ should\ be.}}
\DoxyCodeLine{01111\ \ \ \ \ \textcolor{comment}{//\ It\ would\ be\ true\ in\ exact\ math\ but\ is\ at\ best\ approximately\ true\ in\ floating-\/point\ math,}}
\DoxyCodeLine{01112\ \ \ \ \ \textcolor{comment}{//\ and\ it\ would\ not\ make\ sense\ to\ try\ and\ put\ actual\ bounds\ on\ this\ here\ because\ it\ depends}}
\DoxyCodeLine{01113\ \ \ \ \ \textcolor{comment}{//\ on\ the\ image\ aspect\ ratio\ which\ can\ get\ pretty\ extreme.}}
\DoxyCodeLine{01114\ \ \ \ \ \textcolor{comment}{//STBIR\_ASSERT(stbir\_\_filter\_info\_table[filter].kernel((float)(out\_last\_pixel\ +\ 1)\ +\ 0.5f\ -\/\ out\_center\_of\_in,\ scale\_ratio)\ ==\ 0);}}
\DoxyCodeLine{01115\ }
\DoxyCodeLine{01116\ \ \ \ \ \textcolor{keywordflow}{for}\ (i\ =\ out\_last\_pixel\ -\/\ out\_first\_pixel;\ i\ >=\ 0;\ i-\/-\/)}
\DoxyCodeLine{01117\ \ \ \ \ \{}
\DoxyCodeLine{01118\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (coefficient\_group[i])}
\DoxyCodeLine{01119\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{01120\ }
\DoxyCodeLine{01121\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ This\ line\ has\ no\ weight.\ We\ can\ skip\ it.}}
\DoxyCodeLine{01122\ \ \ \ \ \ \ \ \ contributor-\/>n1\ =\ contributor-\/>n0\ +\ i\ -\/\ 1;}
\DoxyCodeLine{01123\ \ \ \ \ \}}
\DoxyCodeLine{01124\ \}}
\DoxyCodeLine{01125\ }
\DoxyCodeLine{01126\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ stbir\_\_normalize\_downsample\_coefficients(stbir\_\_contributors*\ contributors,\ \textcolor{keywordtype}{float}*\ coefficients,\ stbir\_filter\ filter,\ \textcolor{keywordtype}{float}\ scale\_ratio,\ \textcolor{keywordtype}{int}\ input\_size,\ \textcolor{keywordtype}{int}\ output\_size)}
\DoxyCodeLine{01127\ \{}
\DoxyCodeLine{01128\ \ \ \ \ \textcolor{keywordtype}{int}\ num\_contributors\ =\ stbir\_\_get\_contributors(scale\_ratio,\ filter,\ input\_size,\ output\_size);}
\DoxyCodeLine{01129\ \ \ \ \ \textcolor{keywordtype}{int}\ num\_coefficients\ =\ stbir\_\_get\_coefficient\_width(filter,\ scale\_ratio);}
\DoxyCodeLine{01130\ \ \ \ \ \textcolor{keywordtype}{int}\ i,\ j;}
\DoxyCodeLine{01131\ \ \ \ \ \textcolor{keywordtype}{int}\ skip;}
\DoxyCodeLine{01132\ }
\DoxyCodeLine{01133\ \ \ \ \ \textcolor{keywordflow}{for}\ (i\ =\ 0;\ i\ <\ output\_size;\ i++)}
\DoxyCodeLine{01134\ \ \ \ \ \{}
\DoxyCodeLine{01135\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ scale;}
\DoxyCodeLine{01136\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ total\ =\ 0;}
\DoxyCodeLine{01137\ }
\DoxyCodeLine{01138\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (j\ =\ 0;\ j\ <\ num\_contributors;\ j++)}
\DoxyCodeLine{01139\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01140\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (i\ >=\ contributors[j].n0\ \&\&\ i\ <=\ contributors[j].n1)}
\DoxyCodeLine{01141\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01142\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ coefficient\ =\ *stbir\_\_get\_coefficient(coefficients,\ filter,\ scale\_ratio,\ j,\ i\ -\/\ contributors[j].n0);}
\DoxyCodeLine{01143\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ total\ +=\ coefficient;}
\DoxyCodeLine{01144\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01145\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (i\ <\ contributors[j].n0)}
\DoxyCodeLine{01146\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{01147\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01148\ }
\DoxyCodeLine{01149\ \ \ \ \ \ \ \ \ STBIR\_ASSERT(total\ >\ 0.9f);}
\DoxyCodeLine{01150\ \ \ \ \ \ \ \ \ STBIR\_ASSERT(total\ <\ 1.1f);}
\DoxyCodeLine{01151\ }
\DoxyCodeLine{01152\ \ \ \ \ \ \ \ \ scale\ =\ 1\ /\ total;}
\DoxyCodeLine{01153\ }
\DoxyCodeLine{01154\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (j\ =\ 0;\ j\ <\ num\_contributors;\ j++)}
\DoxyCodeLine{01155\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01156\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (i\ >=\ contributors[j].n0\ \&\&\ i\ <=\ contributors[j].n1)}
\DoxyCodeLine{01157\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ *stbir\_\_get\_coefficient(coefficients,\ filter,\ scale\_ratio,\ j,\ i\ -\/\ contributors[j].n0)\ *=\ scale;}
\DoxyCodeLine{01158\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \textcolor{keywordflow}{if}\ (i\ <\ contributors[j].n0)}
\DoxyCodeLine{01159\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{01160\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01161\ \ \ \ \ \}}
\DoxyCodeLine{01162\ }
\DoxyCodeLine{01163\ \ \ \ \ \textcolor{comment}{//\ Optimize:\ Skip\ zero\ coefficients\ and\ contributions\ outside\ of\ image\ bounds.}}
\DoxyCodeLine{01164\ \ \ \ \ \textcolor{comment}{//\ Do\ this\ after\ normalizing\ because\ normalization\ depends\ on\ the\ n0/n1\ values.}}
\DoxyCodeLine{01165\ \ \ \ \ \textcolor{keywordflow}{for}\ (j\ =\ 0;\ j\ <\ num\_contributors;\ j++)}
\DoxyCodeLine{01166\ \ \ \ \ \{}
\DoxyCodeLine{01167\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ range,\ max,\ width;}
\DoxyCodeLine{01168\ }
\DoxyCodeLine{01169\ \ \ \ \ \ \ \ \ skip\ =\ 0;}
\DoxyCodeLine{01170\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{while}\ (*stbir\_\_get\_coefficient(coefficients,\ filter,\ scale\_ratio,\ j,\ skip)\ ==\ 0)}
\DoxyCodeLine{01171\ \ \ \ \ \ \ \ \ \ \ \ \ skip++;}
\DoxyCodeLine{01172\ }
\DoxyCodeLine{01173\ \ \ \ \ \ \ \ \ contributors[j].n0\ +=\ skip;}
\DoxyCodeLine{01174\ }
\DoxyCodeLine{01175\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{while}\ (contributors[j].n0\ <\ 0)}
\DoxyCodeLine{01176\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01177\ \ \ \ \ \ \ \ \ \ \ \ \ contributors[j].n0++;}
\DoxyCodeLine{01178\ \ \ \ \ \ \ \ \ \ \ \ \ skip++;}
\DoxyCodeLine{01179\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01180\ }
\DoxyCodeLine{01181\ \ \ \ \ \ \ \ \ range\ =\ contributors[j].n1\ -\/\ contributors[j].n0\ +\ 1;}
\DoxyCodeLine{01182\ \ \ \ \ \ \ \ \ max\ =\ stbir\_\_min(num\_coefficients,\ range);}
\DoxyCodeLine{01183\ }
\DoxyCodeLine{01184\ \ \ \ \ \ \ \ \ width\ =\ stbir\_\_get\_coefficient\_width(filter,\ scale\_ratio);}
\DoxyCodeLine{01185\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (i\ =\ 0;\ i\ <\ max;\ i++)}
\DoxyCodeLine{01186\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01187\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (i\ +\ skip\ >=\ width)}
\DoxyCodeLine{01188\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{01189\ }
\DoxyCodeLine{01190\ \ \ \ \ \ \ \ \ \ \ \ \ *stbir\_\_get\_coefficient(coefficients,\ filter,\ scale\_ratio,\ j,\ i)\ =\ *stbir\_\_get\_coefficient(coefficients,\ filter,\ scale\_ratio,\ j,\ i\ +\ skip);}
\DoxyCodeLine{01191\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01192\ }
\DoxyCodeLine{01193\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{continue};}
\DoxyCodeLine{01194\ \ \ \ \ \}}
\DoxyCodeLine{01195\ }
\DoxyCodeLine{01196\ \ \ \ \ \textcolor{comment}{//\ Using\ min\ to\ avoid\ writing\ into\ invalid\ pixels.}}
\DoxyCodeLine{01197\ \ \ \ \ \textcolor{keywordflow}{for}\ (i\ =\ 0;\ i\ <\ num\_contributors;\ i++)}
\DoxyCodeLine{01198\ \ \ \ \ \ \ \ \ contributors[i].n1\ =\ stbir\_\_min(contributors[i].n1,\ output\_size\ -\/\ 1);}
\DoxyCodeLine{01199\ \}}
\DoxyCodeLine{01200\ }
\DoxyCodeLine{01201\ \textcolor{comment}{//\ Each\ scan\ line\ uses\ the\ same\ kernel\ values\ so\ we\ should\ calculate\ the\ kernel}}
\DoxyCodeLine{01202\ \textcolor{comment}{//\ values\ once\ and\ then\ we\ can\ use\ them\ for\ every\ scan\ line.}}
\DoxyCodeLine{01203\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ stbir\_\_calculate\_filters(stbir\_\_contributors*\ contributors,\ \textcolor{keywordtype}{float}*\ coefficients,\ stbir\_filter\ filter,\ \textcolor{keywordtype}{float}\ scale\_ratio,\ \textcolor{keywordtype}{float}\ shift,\ \textcolor{keywordtype}{int}\ input\_size,\ \textcolor{keywordtype}{int}\ output\_size)}
\DoxyCodeLine{01204\ \{}
\DoxyCodeLine{01205\ \ \ \ \ \textcolor{keywordtype}{int}\ n;}
\DoxyCodeLine{01206\ \ \ \ \ \textcolor{keywordtype}{int}\ total\_contributors\ =\ stbir\_\_get\_contributors(scale\_ratio,\ filter,\ input\_size,\ output\_size);}
\DoxyCodeLine{01207\ }
\DoxyCodeLine{01208\ \ \ \ \ \textcolor{keywordflow}{if}\ (stbir\_\_use\_upsampling(scale\_ratio))}
\DoxyCodeLine{01209\ \ \ \ \ \{}
\DoxyCodeLine{01210\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ out\_pixels\_radius\ =\ stbir\_\_filter\_info\_table[filter].support(1\ /\ scale\_ratio)\ *\ scale\_ratio;}
\DoxyCodeLine{01211\ }
\DoxyCodeLine{01212\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Looping\ through\ out\ pixels}}
\DoxyCodeLine{01213\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (n\ =\ 0;\ n\ <\ total\_contributors;\ n++)}
\DoxyCodeLine{01214\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01215\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ in\_center\_of\_out;\ \textcolor{comment}{//\ Center\ of\ the\ current\ out\ pixel\ in\ the\ in\ pixel\ space}}
\DoxyCodeLine{01216\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ in\_first\_pixel,\ in\_last\_pixel;}
\DoxyCodeLine{01217\ }
\DoxyCodeLine{01218\ \ \ \ \ \ \ \ \ \ \ \ \ stbir\_\_calculate\_sample\_range\_upsample(n,\ out\_pixels\_radius,\ scale\_ratio,\ shift,\ \&in\_first\_pixel,\ \&in\_last\_pixel,\ \&in\_center\_of\_out);}
\DoxyCodeLine{01219\ }
\DoxyCodeLine{01220\ \ \ \ \ \ \ \ \ \ \ \ \ stbir\_\_calculate\_coefficients\_upsample(filter,\ scale\_ratio,\ in\_first\_pixel,\ in\_last\_pixel,\ in\_center\_of\_out,\ stbir\_\_get\_contributor(contributors,\ n),\ stbir\_\_get\_coefficient(coefficients,\ filter,\ scale\_ratio,\ n,\ 0));}
\DoxyCodeLine{01221\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01222\ \ \ \ \ \}}
\DoxyCodeLine{01223\ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{01224\ \ \ \ \ \{}
\DoxyCodeLine{01225\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ in\_pixels\_radius\ =\ stbir\_\_filter\_info\_table[filter].support(scale\_ratio)\ /\ scale\_ratio;}
\DoxyCodeLine{01226\ }
\DoxyCodeLine{01227\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Looping\ through\ in\ pixels}}
\DoxyCodeLine{01228\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (n\ =\ 0;\ n\ <\ total\_contributors;\ n++)}
\DoxyCodeLine{01229\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01230\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ out\_center\_of\_in;\ \textcolor{comment}{//\ Center\ of\ the\ current\ out\ pixel\ in\ the\ in\ pixel\ space}}
\DoxyCodeLine{01231\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ out\_first\_pixel,\ out\_last\_pixel;}
\DoxyCodeLine{01232\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ n\_adjusted\ =\ n\ -\/\ stbir\_\_get\_filter\_pixel\_margin(filter,\ scale\_ratio);}
\DoxyCodeLine{01233\ }
\DoxyCodeLine{01234\ \ \ \ \ \ \ \ \ \ \ \ \ stbir\_\_calculate\_sample\_range\_downsample(n\_adjusted,\ in\_pixels\_radius,\ scale\_ratio,\ shift,\ \&out\_first\_pixel,\ \&out\_last\_pixel,\ \&out\_center\_of\_in);}
\DoxyCodeLine{01235\ }
\DoxyCodeLine{01236\ \ \ \ \ \ \ \ \ \ \ \ \ stbir\_\_calculate\_coefficients\_downsample(filter,\ scale\_ratio,\ out\_first\_pixel,\ out\_last\_pixel,\ out\_center\_of\_in,\ stbir\_\_get\_contributor(contributors,\ n),\ stbir\_\_get\_coefficient(coefficients,\ filter,\ scale\_ratio,\ n,\ 0));}
\DoxyCodeLine{01237\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01238\ }
\DoxyCodeLine{01239\ \ \ \ \ \ \ \ \ stbir\_\_normalize\_downsample\_coefficients(contributors,\ coefficients,\ filter,\ scale\_ratio,\ input\_size,\ output\_size);}
\DoxyCodeLine{01240\ \ \ \ \ \}}
\DoxyCodeLine{01241\ \}}
\DoxyCodeLine{01242\ }
\DoxyCodeLine{01243\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{float}*\ stbir\_\_get\_decode\_buffer(stbir\_\_info*\ stbir\_info)}
\DoxyCodeLine{01244\ \{}
\DoxyCodeLine{01245\ \ \ \ \ \textcolor{comment}{//\ The\ 0\ index\ of\ the\ decode\ buffer\ starts\ after\ the\ margin.\ This\ makes}}
\DoxyCodeLine{01246\ \ \ \ \ \textcolor{comment}{//\ it\ okay\ to\ use\ negative\ indexes\ on\ the\ decode\ buffer.}}
\DoxyCodeLine{01247\ \ \ \ \ \textcolor{keywordflow}{return}\ \&stbir\_info-\/>decode\_buffer[stbir\_info-\/>horizontal\_filter\_pixel\_margin\ *\ stbir\_info-\/>channels];}
\DoxyCodeLine{01248\ \}}
\DoxyCodeLine{01249\ }
\DoxyCodeLine{01250\ \textcolor{preprocessor}{\#define\ STBIR\_\_DECODE(type,\ colorspace)\ ((int)(type)\ *\ (STBIR\_MAX\_COLORSPACES)\ +\ (int)(colorspace))}}
\DoxyCodeLine{01251\ }
\DoxyCodeLine{01252\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ stbir\_\_decode\_scanline(stbir\_\_info*\ stbir\_info,\ \textcolor{keywordtype}{int}\ n)}
\DoxyCodeLine{01253\ \{}
\DoxyCodeLine{01254\ \ \ \ \ \textcolor{keywordtype}{int}\ c;}
\DoxyCodeLine{01255\ \ \ \ \ \textcolor{keywordtype}{int}\ channels\ =\ stbir\_info-\/>channels;}
\DoxyCodeLine{01256\ \ \ \ \ \textcolor{keywordtype}{int}\ alpha\_channel\ =\ stbir\_info-\/>alpha\_channel;}
\DoxyCodeLine{01257\ \ \ \ \ \textcolor{keywordtype}{int}\ type\ =\ stbir\_info-\/>type;}
\DoxyCodeLine{01258\ \ \ \ \ \textcolor{keywordtype}{int}\ colorspace\ =\ stbir\_info-\/>colorspace;}
\DoxyCodeLine{01259\ \ \ \ \ \textcolor{keywordtype}{int}\ input\_w\ =\ stbir\_info-\/>input\_w;}
\DoxyCodeLine{01260\ \ \ \ \ \textcolor{keywordtype}{size\_t}\ input\_stride\_bytes\ =\ stbir\_info-\/>input\_stride\_bytes;}
\DoxyCodeLine{01261\ \ \ \ \ \textcolor{keywordtype}{float}*\ decode\_buffer\ =\ stbir\_\_get\_decode\_buffer(stbir\_info);}
\DoxyCodeLine{01262\ \ \ \ \ stbir\_edge\ edge\_horizontal\ =\ stbir\_info-\/>edge\_horizontal;}
\DoxyCodeLine{01263\ \ \ \ \ stbir\_edge\ edge\_vertical\ =\ stbir\_info-\/>edge\_vertical;}
\DoxyCodeLine{01264\ \ \ \ \ \textcolor{keywordtype}{size\_t}\ in\_buffer\_row\_offset\ =\ stbir\_\_edge\_wrap(edge\_vertical,\ n,\ stbir\_info-\/>input\_h)\ *\ input\_stride\_bytes;}
\DoxyCodeLine{01265\ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{void}*\ input\_data\ =\ (\textcolor{keywordtype}{char}\ *)\ stbir\_info-\/>input\_data\ +\ in\_buffer\_row\_offset;}
\DoxyCodeLine{01266\ \ \ \ \ \textcolor{keywordtype}{int}\ max\_x\ =\ input\_w\ +\ stbir\_info-\/>horizontal\_filter\_pixel\_margin;}
\DoxyCodeLine{01267\ \ \ \ \ \textcolor{keywordtype}{int}\ decode\ =\ STBIR\_\_DECODE(type,\ colorspace);}
\DoxyCodeLine{01268\ }
\DoxyCodeLine{01269\ \ \ \ \ \textcolor{keywordtype}{int}\ x\ =\ -\/stbir\_info-\/>horizontal\_filter\_pixel\_margin;}
\DoxyCodeLine{01270\ }
\DoxyCodeLine{01271\ \ \ \ \ \textcolor{comment}{//\ special\ handling\ for\ STBIR\_EDGE\_ZERO\ because\ it\ needs\ to\ return\ an\ item\ that\ doesn't\ appear\ in\ the\ input,}}
\DoxyCodeLine{01272\ \ \ \ \ \textcolor{comment}{//\ and\ we\ want\ to\ avoid\ paying\ overhead\ on\ every\ pixel\ if\ not\ STBIR\_EDGE\_ZERO}}
\DoxyCodeLine{01273\ \ \ \ \ \textcolor{keywordflow}{if}\ (edge\_vertical\ ==\ STBIR\_EDGE\_ZERO\ \&\&\ (n\ <\ 0\ ||\ n\ >=\ stbir\_info-\/>input\_h))}
\DoxyCodeLine{01274\ \ \ \ \ \{}
\DoxyCodeLine{01275\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (;\ x\ <\ max\_x;\ x++)}
\DoxyCodeLine{01276\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (c\ =\ 0;\ c\ <\ channels;\ c++)}
\DoxyCodeLine{01277\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ decode\_buffer[x*channels\ +\ c]\ =\ 0;}
\DoxyCodeLine{01278\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{01279\ \ \ \ \ \}}
\DoxyCodeLine{01280\ }
\DoxyCodeLine{01281\ \ \ \ \ \textcolor{keywordflow}{switch}\ (decode)}
\DoxyCodeLine{01282\ \ \ \ \ \{}
\DoxyCodeLine{01283\ \ \ \ \ \textcolor{keywordflow}{case}\ STBIR\_\_DECODE(STBIR\_TYPE\_UINT8,\ STBIR\_COLORSPACE\_LINEAR):}
\DoxyCodeLine{01284\ \ \ \ \ \ \ \ \ for\ (;\ x\ <\ max\_x;\ x++)}
\DoxyCodeLine{01285\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01286\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ decode\_pixel\_index\ =\ x\ *\ channels;}
\DoxyCodeLine{01287\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ input\_pixel\_index\ =\ stbir\_\_edge\_wrap(edge\_horizontal,\ x,\ input\_w)\ *\ channels;}
\DoxyCodeLine{01288\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (c\ =\ 0;\ c\ <\ channels;\ c++)}
\DoxyCodeLine{01289\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ decode\_buffer[decode\_pixel\_index\ +\ c]\ =\ ((\textcolor{keywordtype}{float})((\textcolor{keyword}{const}\ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{char}*)input\_data)[input\_pixel\_index\ +\ c])\ /\ stbir\_\_max\_uint8\_as\_float;}
\DoxyCodeLine{01290\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01291\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{01292\ }
\DoxyCodeLine{01293\ \ \ \ \ \textcolor{keywordflow}{case}\ STBIR\_\_DECODE(STBIR\_TYPE\_UINT8,\ STBIR\_COLORSPACE\_SRGB):}
\DoxyCodeLine{01294\ \ \ \ \ \ \ \ \ for\ (;\ x\ <\ max\_x;\ x++)}
\DoxyCodeLine{01295\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01296\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ decode\_pixel\_index\ =\ x\ *\ channels;}
\DoxyCodeLine{01297\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ input\_pixel\_index\ =\ stbir\_\_edge\_wrap(edge\_horizontal,\ x,\ input\_w)\ *\ channels;}
\DoxyCodeLine{01298\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (c\ =\ 0;\ c\ <\ channels;\ c++)}
\DoxyCodeLine{01299\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ decode\_buffer[decode\_pixel\_index\ +\ c]\ =\ stbir\_\_srgb\_uchar\_to\_linear\_float[((\textcolor{keyword}{const}\ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{char}*)input\_data)[input\_pixel\_index\ +\ c]];}
\DoxyCodeLine{01300\ }
\DoxyCodeLine{01301\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!(stbir\_info-\/>flags\&STBIR\_FLAG\_ALPHA\_USES\_COLORSPACE))}
\DoxyCodeLine{01302\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ decode\_buffer[decode\_pixel\_index\ +\ alpha\_channel]\ =\ ((float)((\textcolor{keyword}{const}\ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{char}*)input\_data)[input\_pixel\_index\ +\ alpha\_channel])\ /\ stbir\_\_max\_uint8\_as\_float;}
\DoxyCodeLine{01303\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01304\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{01305\ }
\DoxyCodeLine{01306\ \ \ \ \ \textcolor{keywordflow}{case}\ STBIR\_\_DECODE(STBIR\_TYPE\_UINT16,\ STBIR\_COLORSPACE\_LINEAR):}
\DoxyCodeLine{01307\ \ \ \ \ \ \ \ \ for\ (;\ x\ <\ max\_x;\ x++)}
\DoxyCodeLine{01308\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01309\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ decode\_pixel\_index\ =\ x\ *\ channels;}
\DoxyCodeLine{01310\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ input\_pixel\_index\ =\ stbir\_\_edge\_wrap(edge\_horizontal,\ x,\ input\_w)\ *\ channels;}
\DoxyCodeLine{01311\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (c\ =\ 0;\ c\ <\ channels;\ c++)}
\DoxyCodeLine{01312\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ decode\_buffer[decode\_pixel\_index\ +\ c]\ =\ ((\textcolor{keywordtype}{float})((\textcolor{keyword}{const}\ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{short}*)input\_data)[input\_pixel\_index\ +\ c])\ /\ stbir\_\_max\_uint16\_as\_float;}
\DoxyCodeLine{01313\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01314\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{01315\ }
\DoxyCodeLine{01316\ \ \ \ \ \textcolor{keywordflow}{case}\ STBIR\_\_DECODE(STBIR\_TYPE\_UINT16,\ STBIR\_COLORSPACE\_SRGB):}
\DoxyCodeLine{01317\ \ \ \ \ \ \ \ \ for\ (;\ x\ <\ max\_x;\ x++)}
\DoxyCodeLine{01318\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01319\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ decode\_pixel\_index\ =\ x\ *\ channels;}
\DoxyCodeLine{01320\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ input\_pixel\_index\ =\ stbir\_\_edge\_wrap(edge\_horizontal,\ x,\ input\_w)\ *\ channels;}
\DoxyCodeLine{01321\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (c\ =\ 0;\ c\ <\ channels;\ c++)}
\DoxyCodeLine{01322\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ decode\_buffer[decode\_pixel\_index\ +\ c]\ =\ stbir\_\_srgb\_to\_linear(((\textcolor{keywordtype}{float})((\textcolor{keyword}{const}\ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{short}*)input\_data)[input\_pixel\_index\ +\ c])\ /\ stbir\_\_max\_uint16\_as\_float);}
\DoxyCodeLine{01323\ }
\DoxyCodeLine{01324\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!(stbir\_info-\/>flags\&STBIR\_FLAG\_ALPHA\_USES\_COLORSPACE))}
\DoxyCodeLine{01325\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ decode\_buffer[decode\_pixel\_index\ +\ alpha\_channel]\ =\ ((float)((\textcolor{keyword}{const}\ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{short}*)input\_data)[input\_pixel\_index\ +\ alpha\_channel])\ /\ stbir\_\_max\_uint16\_as\_float;}
\DoxyCodeLine{01326\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01327\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{01328\ }
\DoxyCodeLine{01329\ \ \ \ \ \textcolor{keywordflow}{case}\ STBIR\_\_DECODE(STBIR\_TYPE\_UINT32,\ STBIR\_COLORSPACE\_LINEAR):}
\DoxyCodeLine{01330\ \ \ \ \ \ \ \ \ for\ (;\ x\ <\ max\_x;\ x++)}
\DoxyCodeLine{01331\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01332\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ decode\_pixel\_index\ =\ x\ *\ channels;}
\DoxyCodeLine{01333\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ input\_pixel\_index\ =\ stbir\_\_edge\_wrap(edge\_horizontal,\ x,\ input\_w)\ *\ channels;}
\DoxyCodeLine{01334\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (c\ =\ 0;\ c\ <\ channels;\ c++)}
\DoxyCodeLine{01335\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ decode\_buffer[decode\_pixel\_index\ +\ c]\ =\ (\textcolor{keywordtype}{float})(((double)((\textcolor{keyword}{const}\ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}*)input\_data)[input\_pixel\_index\ +\ c])\ /\ stbir\_\_max\_uint32\_as\_float);}
\DoxyCodeLine{01336\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01337\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{01338\ }
\DoxyCodeLine{01339\ \ \ \ \ \textcolor{keywordflow}{case}\ STBIR\_\_DECODE(STBIR\_TYPE\_UINT32,\ STBIR\_COLORSPACE\_SRGB):}
\DoxyCodeLine{01340\ \ \ \ \ \ \ \ \ for\ (;\ x\ <\ max\_x;\ x++)}
\DoxyCodeLine{01341\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01342\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ decode\_pixel\_index\ =\ x\ *\ channels;}
\DoxyCodeLine{01343\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ input\_pixel\_index\ =\ stbir\_\_edge\_wrap(edge\_horizontal,\ x,\ input\_w)\ *\ channels;}
\DoxyCodeLine{01344\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (c\ =\ 0;\ c\ <\ channels;\ c++)}
\DoxyCodeLine{01345\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ decode\_buffer[decode\_pixel\_index\ +\ c]\ =\ stbir\_\_srgb\_to\_linear((\textcolor{keywordtype}{float})(((\textcolor{keywordtype}{double})((\textcolor{keyword}{const}\ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}*)input\_data)[input\_pixel\_index\ +\ c])\ /\ stbir\_\_max\_uint32\_as\_float));}
\DoxyCodeLine{01346\ }
\DoxyCodeLine{01347\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!(stbir\_info-\/>flags\&STBIR\_FLAG\_ALPHA\_USES\_COLORSPACE))}
\DoxyCodeLine{01348\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ decode\_buffer[decode\_pixel\_index\ +\ alpha\_channel]\ =\ (float)(((\textcolor{keywordtype}{double})((\textcolor{keyword}{const}\ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}*)input\_data)[input\_pixel\_index\ +\ alpha\_channel])\ /\ stbir\_\_max\_uint32\_as\_float);}
\DoxyCodeLine{01349\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01350\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{01351\ }
\DoxyCodeLine{01352\ \ \ \ \ \textcolor{keywordflow}{case}\ STBIR\_\_DECODE(STBIR\_TYPE\_FLOAT,\ STBIR\_COLORSPACE\_LINEAR):}
\DoxyCodeLine{01353\ \ \ \ \ \ \ \ \ for\ (;\ x\ <\ max\_x;\ x++)}
\DoxyCodeLine{01354\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01355\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ decode\_pixel\_index\ =\ x\ *\ channels;}
\DoxyCodeLine{01356\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ input\_pixel\_index\ =\ stbir\_\_edge\_wrap(edge\_horizontal,\ x,\ input\_w)\ *\ channels;}
\DoxyCodeLine{01357\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (c\ =\ 0;\ c\ <\ channels;\ c++)}
\DoxyCodeLine{01358\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ decode\_buffer[decode\_pixel\_index\ +\ c]\ =\ ((\textcolor{keyword}{const}\ \textcolor{keywordtype}{float}*)input\_data)[input\_pixel\_index\ +\ c];}
\DoxyCodeLine{01359\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01360\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{01361\ }
\DoxyCodeLine{01362\ \ \ \ \ \textcolor{keywordflow}{case}\ STBIR\_\_DECODE(STBIR\_TYPE\_FLOAT,\ STBIR\_COLORSPACE\_SRGB):}
\DoxyCodeLine{01363\ \ \ \ \ \ \ \ \ for\ (;\ x\ <\ max\_x;\ x++)}
\DoxyCodeLine{01364\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01365\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ decode\_pixel\_index\ =\ x\ *\ channels;}
\DoxyCodeLine{01366\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ input\_pixel\_index\ =\ stbir\_\_edge\_wrap(edge\_horizontal,\ x,\ input\_w)\ *\ channels;}
\DoxyCodeLine{01367\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (c\ =\ 0;\ c\ <\ channels;\ c++)}
\DoxyCodeLine{01368\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ decode\_buffer[decode\_pixel\_index\ +\ c]\ =\ stbir\_\_srgb\_to\_linear(((\textcolor{keyword}{const}\ \textcolor{keywordtype}{float}*)input\_data)[input\_pixel\_index\ +\ c]);}
\DoxyCodeLine{01369\ }
\DoxyCodeLine{01370\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!(stbir\_info-\/>flags\&STBIR\_FLAG\_ALPHA\_USES\_COLORSPACE))}
\DoxyCodeLine{01371\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ decode\_buffer[decode\_pixel\_index\ +\ alpha\_channel]\ =\ ((\textcolor{keyword}{const}\ \textcolor{keywordtype}{float}*)input\_data)[input\_pixel\_index\ +\ alpha\_channel];}
\DoxyCodeLine{01372\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01373\ }
\DoxyCodeLine{01374\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{01375\ }
\DoxyCodeLine{01376\ \ \ \ \ \textcolor{keywordflow}{default}:}
\DoxyCodeLine{01377\ \ \ \ \ \ \ \ \ STBIR\_ASSERT(!\textcolor{stringliteral}{"{}Unknown\ type/colorspace/channels\ combination."{}});}
\DoxyCodeLine{01378\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{01379\ \ \ \ \ \}}
\DoxyCodeLine{01380\ }
\DoxyCodeLine{01381\ \ \ \ \ \textcolor{keywordflow}{if}\ (!(stbir\_info-\/>flags\ \&\ STBIR\_FLAG\_ALPHA\_PREMULTIPLIED))}
\DoxyCodeLine{01382\ \ \ \ \ \{}
\DoxyCodeLine{01383\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (x\ =\ -\/stbir\_info-\/>horizontal\_filter\_pixel\_margin;\ x\ <\ max\_x;\ x++)}
\DoxyCodeLine{01384\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01385\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ decode\_pixel\_index\ =\ x\ *\ channels;}
\DoxyCodeLine{01386\ }
\DoxyCodeLine{01387\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ If\ the\ alpha\ value\ is\ 0\ it\ will\ clobber\ the\ color\ values.\ Make\ sure\ it's\ not.}}
\DoxyCodeLine{01388\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ alpha\ =\ decode\_buffer[decode\_pixel\_index\ +\ alpha\_channel];}
\DoxyCodeLine{01389\ \textcolor{preprocessor}{\#ifndef\ STBIR\_NO\_ALPHA\_EPSILON}}
\DoxyCodeLine{01390\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (stbir\_info-\/>type\ !=\ STBIR\_TYPE\_FLOAT)\ \{}
\DoxyCodeLine{01391\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ alpha\ +=\ STBIR\_ALPHA\_EPSILON;}
\DoxyCodeLine{01392\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ decode\_buffer[decode\_pixel\_index\ +\ alpha\_channel]\ =\ alpha;}
\DoxyCodeLine{01393\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01394\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{01395\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (c\ =\ 0;\ c\ <\ channels;\ c++)}
\DoxyCodeLine{01396\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01397\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (c\ ==\ alpha\_channel)}
\DoxyCodeLine{01398\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{continue};}
\DoxyCodeLine{01399\ }
\DoxyCodeLine{01400\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ decode\_buffer[decode\_pixel\_index\ +\ c]\ *=\ alpha;}
\DoxyCodeLine{01401\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01402\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01403\ \ \ \ \ \}}
\DoxyCodeLine{01404\ }
\DoxyCodeLine{01405\ \ \ \ \ \textcolor{keywordflow}{if}\ (edge\_horizontal\ ==\ STBIR\_EDGE\_ZERO)}
\DoxyCodeLine{01406\ \ \ \ \ \{}
\DoxyCodeLine{01407\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (x\ =\ -\/stbir\_info-\/>horizontal\_filter\_pixel\_margin;\ x\ <\ 0;\ x++)}
\DoxyCodeLine{01408\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01409\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (c\ =\ 0;\ c\ <\ channels;\ c++)}
\DoxyCodeLine{01410\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ decode\_buffer[x*channels\ +\ c]\ =\ 0;}
\DoxyCodeLine{01411\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01412\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (x\ =\ input\_w;\ x\ <\ max\_x;\ x++)}
\DoxyCodeLine{01413\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01414\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (c\ =\ 0;\ c\ <\ channels;\ c++)}
\DoxyCodeLine{01415\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ decode\_buffer[x*channels\ +\ c]\ =\ 0;}
\DoxyCodeLine{01416\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01417\ \ \ \ \ \}}
\DoxyCodeLine{01418\ \}}
\DoxyCodeLine{01419\ }
\DoxyCodeLine{01420\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{float}*\ stbir\_\_get\_ring\_buffer\_entry(\textcolor{keywordtype}{float}*\ ring\_buffer,\ \textcolor{keywordtype}{int}\ index,\ \textcolor{keywordtype}{int}\ ring\_buffer\_length)}
\DoxyCodeLine{01421\ \{}
\DoxyCodeLine{01422\ \ \ \ \ \textcolor{keywordflow}{return}\ \&ring\_buffer[index\ *\ ring\_buffer\_length];}
\DoxyCodeLine{01423\ \}}
\DoxyCodeLine{01424\ }
\DoxyCodeLine{01425\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{float}*\ stbir\_\_add\_empty\_ring\_buffer\_entry(stbir\_\_info*\ stbir\_info,\ \textcolor{keywordtype}{int}\ n)}
\DoxyCodeLine{01426\ \{}
\DoxyCodeLine{01427\ \ \ \ \ \textcolor{keywordtype}{int}\ ring\_buffer\_index;}
\DoxyCodeLine{01428\ \ \ \ \ \textcolor{keywordtype}{float}*\ ring\_buffer;}
\DoxyCodeLine{01429\ }
\DoxyCodeLine{01430\ \ \ \ \ stbir\_info-\/>ring\_buffer\_last\_scanline\ =\ n;}
\DoxyCodeLine{01431\ }
\DoxyCodeLine{01432\ \ \ \ \ \textcolor{keywordflow}{if}\ (stbir\_info-\/>ring\_buffer\_begin\_index\ <\ 0)}
\DoxyCodeLine{01433\ \ \ \ \ \{}
\DoxyCodeLine{01434\ \ \ \ \ \ \ \ \ ring\_buffer\_index\ =\ stbir\_info-\/>ring\_buffer\_begin\_index\ =\ 0;}
\DoxyCodeLine{01435\ \ \ \ \ \ \ \ \ stbir\_info-\/>ring\_buffer\_first\_scanline\ =\ n;}
\DoxyCodeLine{01436\ \ \ \ \ \}}
\DoxyCodeLine{01437\ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{01438\ \ \ \ \ \{}
\DoxyCodeLine{01439\ \ \ \ \ \ \ \ \ ring\_buffer\_index\ =\ (stbir\_info-\/>ring\_buffer\_begin\_index\ +\ (stbir\_info-\/>ring\_buffer\_last\_scanline\ -\/\ stbir\_info-\/>ring\_buffer\_first\_scanline))\ \%\ stbir\_info-\/>ring\_buffer\_num\_entries;}
\DoxyCodeLine{01440\ \ \ \ \ \ \ \ \ STBIR\_ASSERT(ring\_buffer\_index\ !=\ stbir\_info-\/>ring\_buffer\_begin\_index);}
\DoxyCodeLine{01441\ \ \ \ \ \}}
\DoxyCodeLine{01442\ }
\DoxyCodeLine{01443\ \ \ \ \ ring\_buffer\ =\ stbir\_\_get\_ring\_buffer\_entry(stbir\_info-\/>ring\_buffer,\ ring\_buffer\_index,\ stbir\_info-\/>ring\_buffer\_length\_bytes\ /\ \textcolor{keyword}{sizeof}(\textcolor{keywordtype}{float}));}
\DoxyCodeLine{01444\ \ \ \ \ memset(ring\_buffer,\ 0,\ stbir\_info-\/>ring\_buffer\_length\_bytes);}
\DoxyCodeLine{01445\ }
\DoxyCodeLine{01446\ \ \ \ \ \textcolor{keywordflow}{return}\ ring\_buffer;}
\DoxyCodeLine{01447\ \}}
\DoxyCodeLine{01448\ }
\DoxyCodeLine{01449\ }
\DoxyCodeLine{01450\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ stbir\_\_resample\_horizontal\_upsample(stbir\_\_info*\ stbir\_info,\ \textcolor{keywordtype}{float}*\ output\_buffer)}
\DoxyCodeLine{01451\ \{}
\DoxyCodeLine{01452\ \ \ \ \ \textcolor{keywordtype}{int}\ x,\ k;}
\DoxyCodeLine{01453\ \ \ \ \ \textcolor{keywordtype}{int}\ output\_w\ =\ stbir\_info-\/>output\_w;}
\DoxyCodeLine{01454\ \ \ \ \ \textcolor{keywordtype}{int}\ channels\ =\ stbir\_info-\/>channels;}
\DoxyCodeLine{01455\ \ \ \ \ \textcolor{keywordtype}{float}*\ decode\_buffer\ =\ stbir\_\_get\_decode\_buffer(stbir\_info);}
\DoxyCodeLine{01456\ \ \ \ \ stbir\_\_contributors*\ horizontal\_contributors\ =\ stbir\_info-\/>horizontal\_contributors;}
\DoxyCodeLine{01457\ \ \ \ \ \textcolor{keywordtype}{float}*\ horizontal\_coefficients\ =\ stbir\_info-\/>horizontal\_coefficients;}
\DoxyCodeLine{01458\ \ \ \ \ \textcolor{keywordtype}{int}\ coefficient\_width\ =\ stbir\_info-\/>horizontal\_coefficient\_width;}
\DoxyCodeLine{01459\ }
\DoxyCodeLine{01460\ \ \ \ \ \textcolor{keywordflow}{for}\ (x\ =\ 0;\ x\ <\ output\_w;\ x++)}
\DoxyCodeLine{01461\ \ \ \ \ \{}
\DoxyCodeLine{01462\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ n0\ =\ horizontal\_contributors[x].n0;}
\DoxyCodeLine{01463\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ n1\ =\ horizontal\_contributors[x].n1;}
\DoxyCodeLine{01464\ }
\DoxyCodeLine{01465\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ out\_pixel\_index\ =\ x\ *\ channels;}
\DoxyCodeLine{01466\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ coefficient\_group\ =\ coefficient\_width\ *\ x;}
\DoxyCodeLine{01467\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ coefficient\_counter\ =\ 0;}
\DoxyCodeLine{01468\ }
\DoxyCodeLine{01469\ \ \ \ \ \ \ \ \ STBIR\_ASSERT(n1\ >=\ n0);}
\DoxyCodeLine{01470\ \ \ \ \ \ \ \ \ STBIR\_ASSERT(n0\ >=\ -\/stbir\_info-\/>horizontal\_filter\_pixel\_margin);}
\DoxyCodeLine{01471\ \ \ \ \ \ \ \ \ STBIR\_ASSERT(n1\ >=\ -\/stbir\_info-\/>horizontal\_filter\_pixel\_margin);}
\DoxyCodeLine{01472\ \ \ \ \ \ \ \ \ STBIR\_ASSERT(n0\ <\ stbir\_info-\/>input\_w\ +\ stbir\_info-\/>horizontal\_filter\_pixel\_margin);}
\DoxyCodeLine{01473\ \ \ \ \ \ \ \ \ STBIR\_ASSERT(n1\ <\ stbir\_info-\/>input\_w\ +\ stbir\_info-\/>horizontal\_filter\_pixel\_margin);}
\DoxyCodeLine{01474\ }
\DoxyCodeLine{01475\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{switch}\ (channels)\ \{}
\DoxyCodeLine{01476\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ 1:}
\DoxyCodeLine{01477\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (k\ =\ n0;\ k\ <=\ n1;\ k++)}
\DoxyCodeLine{01478\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01479\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ in\_pixel\_index\ =\ k\ *\ 1;}
\DoxyCodeLine{01480\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ coefficient\ =\ horizontal\_coefficients[coefficient\_group\ +\ coefficient\_counter++];}
\DoxyCodeLine{01481\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ STBIR\_ASSERT(coefficient\ !=\ 0);}
\DoxyCodeLine{01482\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ output\_buffer[out\_pixel\_index\ +\ 0]\ +=\ decode\_buffer[in\_pixel\_index\ +\ 0]\ *\ coefficient;}
\DoxyCodeLine{01483\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01484\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{01485\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ 2:}
\DoxyCodeLine{01486\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (k\ =\ n0;\ k\ <=\ n1;\ k++)}
\DoxyCodeLine{01487\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01488\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ in\_pixel\_index\ =\ k\ *\ 2;}
\DoxyCodeLine{01489\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ coefficient\ =\ horizontal\_coefficients[coefficient\_group\ +\ coefficient\_counter++];}
\DoxyCodeLine{01490\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ STBIR\_ASSERT(coefficient\ !=\ 0);}
\DoxyCodeLine{01491\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ output\_buffer[out\_pixel\_index\ +\ 0]\ +=\ decode\_buffer[in\_pixel\_index\ +\ 0]\ *\ coefficient;}
\DoxyCodeLine{01492\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ output\_buffer[out\_pixel\_index\ +\ 1]\ +=\ decode\_buffer[in\_pixel\_index\ +\ 1]\ *\ coefficient;}
\DoxyCodeLine{01493\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01494\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{01495\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ 3:}
\DoxyCodeLine{01496\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (k\ =\ n0;\ k\ <=\ n1;\ k++)}
\DoxyCodeLine{01497\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01498\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ in\_pixel\_index\ =\ k\ *\ 3;}
\DoxyCodeLine{01499\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ coefficient\ =\ horizontal\_coefficients[coefficient\_group\ +\ coefficient\_counter++];}
\DoxyCodeLine{01500\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ STBIR\_ASSERT(coefficient\ !=\ 0);}
\DoxyCodeLine{01501\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ output\_buffer[out\_pixel\_index\ +\ 0]\ +=\ decode\_buffer[in\_pixel\_index\ +\ 0]\ *\ coefficient;}
\DoxyCodeLine{01502\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ output\_buffer[out\_pixel\_index\ +\ 1]\ +=\ decode\_buffer[in\_pixel\_index\ +\ 1]\ *\ coefficient;}
\DoxyCodeLine{01503\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ output\_buffer[out\_pixel\_index\ +\ 2]\ +=\ decode\_buffer[in\_pixel\_index\ +\ 2]\ *\ coefficient;}
\DoxyCodeLine{01504\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01505\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{01506\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ 4:}
\DoxyCodeLine{01507\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (k\ =\ n0;\ k\ <=\ n1;\ k++)}
\DoxyCodeLine{01508\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01509\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ in\_pixel\_index\ =\ k\ *\ 4;}
\DoxyCodeLine{01510\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ coefficient\ =\ horizontal\_coefficients[coefficient\_group\ +\ coefficient\_counter++];}
\DoxyCodeLine{01511\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ STBIR\_ASSERT(coefficient\ !=\ 0);}
\DoxyCodeLine{01512\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ output\_buffer[out\_pixel\_index\ +\ 0]\ +=\ decode\_buffer[in\_pixel\_index\ +\ 0]\ *\ coefficient;}
\DoxyCodeLine{01513\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ output\_buffer[out\_pixel\_index\ +\ 1]\ +=\ decode\_buffer[in\_pixel\_index\ +\ 1]\ *\ coefficient;}
\DoxyCodeLine{01514\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ output\_buffer[out\_pixel\_index\ +\ 2]\ +=\ decode\_buffer[in\_pixel\_index\ +\ 2]\ *\ coefficient;}
\DoxyCodeLine{01515\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ output\_buffer[out\_pixel\_index\ +\ 3]\ +=\ decode\_buffer[in\_pixel\_index\ +\ 3]\ *\ coefficient;}
\DoxyCodeLine{01516\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01517\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{01518\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{default}:}
\DoxyCodeLine{01519\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (k\ =\ n0;\ k\ <=\ n1;\ k++)}
\DoxyCodeLine{01520\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01521\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ in\_pixel\_index\ =\ k\ *\ channels;}
\DoxyCodeLine{01522\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ coefficient\ =\ horizontal\_coefficients[coefficient\_group\ +\ coefficient\_counter++];}
\DoxyCodeLine{01523\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ c;}
\DoxyCodeLine{01524\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ STBIR\_ASSERT(coefficient\ !=\ 0);}
\DoxyCodeLine{01525\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (c\ =\ 0;\ c\ <\ channels;\ c++)}
\DoxyCodeLine{01526\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ output\_buffer[out\_pixel\_index\ +\ c]\ +=\ decode\_buffer[in\_pixel\_index\ +\ c]\ *\ coefficient;}
\DoxyCodeLine{01527\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01528\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{01529\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01530\ \ \ \ \ \}}
\DoxyCodeLine{01531\ \}}
\DoxyCodeLine{01532\ }
\DoxyCodeLine{01533\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ stbir\_\_resample\_horizontal\_downsample(stbir\_\_info*\ stbir\_info,\ \textcolor{keywordtype}{float}*\ output\_buffer)}
\DoxyCodeLine{01534\ \{}
\DoxyCodeLine{01535\ \ \ \ \ \textcolor{keywordtype}{int}\ x,\ k;}
\DoxyCodeLine{01536\ \ \ \ \ \textcolor{keywordtype}{int}\ input\_w\ =\ stbir\_info-\/>input\_w;}
\DoxyCodeLine{01537\ \ \ \ \ \textcolor{keywordtype}{int}\ channels\ =\ stbir\_info-\/>channels;}
\DoxyCodeLine{01538\ \ \ \ \ \textcolor{keywordtype}{float}*\ decode\_buffer\ =\ stbir\_\_get\_decode\_buffer(stbir\_info);}
\DoxyCodeLine{01539\ \ \ \ \ stbir\_\_contributors*\ horizontal\_contributors\ =\ stbir\_info-\/>horizontal\_contributors;}
\DoxyCodeLine{01540\ \ \ \ \ \textcolor{keywordtype}{float}*\ horizontal\_coefficients\ =\ stbir\_info-\/>horizontal\_coefficients;}
\DoxyCodeLine{01541\ \ \ \ \ \textcolor{keywordtype}{int}\ coefficient\_width\ =\ stbir\_info-\/>horizontal\_coefficient\_width;}
\DoxyCodeLine{01542\ \ \ \ \ \textcolor{keywordtype}{int}\ filter\_pixel\_margin\ =\ stbir\_info-\/>horizontal\_filter\_pixel\_margin;}
\DoxyCodeLine{01543\ \ \ \ \ \textcolor{keywordtype}{int}\ max\_x\ =\ input\_w\ +\ filter\_pixel\_margin\ *\ 2;}
\DoxyCodeLine{01544\ }
\DoxyCodeLine{01545\ \ \ \ \ STBIR\_ASSERT(!stbir\_\_use\_width\_upsampling(stbir\_info));}
\DoxyCodeLine{01546\ }
\DoxyCodeLine{01547\ \ \ \ \ \textcolor{keywordflow}{switch}\ (channels)\ \{}
\DoxyCodeLine{01548\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ 1:}
\DoxyCodeLine{01549\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (x\ =\ 0;\ x\ <\ max\_x;\ x++)}
\DoxyCodeLine{01550\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01551\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ n0\ =\ horizontal\_contributors[x].n0;}
\DoxyCodeLine{01552\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ n1\ =\ horizontal\_contributors[x].n1;}
\DoxyCodeLine{01553\ }
\DoxyCodeLine{01554\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ in\_x\ =\ x\ -\/\ filter\_pixel\_margin;}
\DoxyCodeLine{01555\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ in\_pixel\_index\ =\ in\_x\ *\ 1;}
\DoxyCodeLine{01556\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ max\_n\ =\ n1;}
\DoxyCodeLine{01557\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ coefficient\_group\ =\ coefficient\_width\ *\ x;}
\DoxyCodeLine{01558\ }
\DoxyCodeLine{01559\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (k\ =\ n0;\ k\ <=\ max\_n;\ k++)}
\DoxyCodeLine{01560\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01561\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ out\_pixel\_index\ =\ k\ *\ 1;}
\DoxyCodeLine{01562\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ coefficient\ =\ horizontal\_coefficients[coefficient\_group\ +\ k\ -\/\ n0];}
\DoxyCodeLine{01563\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ output\_buffer[out\_pixel\_index\ +\ 0]\ +=\ decode\_buffer[in\_pixel\_index\ +\ 0]\ *\ coefficient;}
\DoxyCodeLine{01564\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01565\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01566\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{01567\ }
\DoxyCodeLine{01568\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ 2:}
\DoxyCodeLine{01569\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (x\ =\ 0;\ x\ <\ max\_x;\ x++)}
\DoxyCodeLine{01570\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01571\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ n0\ =\ horizontal\_contributors[x].n0;}
\DoxyCodeLine{01572\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ n1\ =\ horizontal\_contributors[x].n1;}
\DoxyCodeLine{01573\ }
\DoxyCodeLine{01574\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ in\_x\ =\ x\ -\/\ filter\_pixel\_margin;}
\DoxyCodeLine{01575\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ in\_pixel\_index\ =\ in\_x\ *\ 2;}
\DoxyCodeLine{01576\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ max\_n\ =\ n1;}
\DoxyCodeLine{01577\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ coefficient\_group\ =\ coefficient\_width\ *\ x;}
\DoxyCodeLine{01578\ }
\DoxyCodeLine{01579\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (k\ =\ n0;\ k\ <=\ max\_n;\ k++)}
\DoxyCodeLine{01580\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01581\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ out\_pixel\_index\ =\ k\ *\ 2;}
\DoxyCodeLine{01582\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ coefficient\ =\ horizontal\_coefficients[coefficient\_group\ +\ k\ -\/\ n0];}
\DoxyCodeLine{01583\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ output\_buffer[out\_pixel\_index\ +\ 0]\ +=\ decode\_buffer[in\_pixel\_index\ +\ 0]\ *\ coefficient;}
\DoxyCodeLine{01584\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ output\_buffer[out\_pixel\_index\ +\ 1]\ +=\ decode\_buffer[in\_pixel\_index\ +\ 1]\ *\ coefficient;}
\DoxyCodeLine{01585\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01586\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01587\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{01588\ }
\DoxyCodeLine{01589\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ 3:}
\DoxyCodeLine{01590\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (x\ =\ 0;\ x\ <\ max\_x;\ x++)}
\DoxyCodeLine{01591\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01592\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ n0\ =\ horizontal\_contributors[x].n0;}
\DoxyCodeLine{01593\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ n1\ =\ horizontal\_contributors[x].n1;}
\DoxyCodeLine{01594\ }
\DoxyCodeLine{01595\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ in\_x\ =\ x\ -\/\ filter\_pixel\_margin;}
\DoxyCodeLine{01596\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ in\_pixel\_index\ =\ in\_x\ *\ 3;}
\DoxyCodeLine{01597\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ max\_n\ =\ n1;}
\DoxyCodeLine{01598\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ coefficient\_group\ =\ coefficient\_width\ *\ x;}
\DoxyCodeLine{01599\ }
\DoxyCodeLine{01600\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (k\ =\ n0;\ k\ <=\ max\_n;\ k++)}
\DoxyCodeLine{01601\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01602\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ out\_pixel\_index\ =\ k\ *\ 3;}
\DoxyCodeLine{01603\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ coefficient\ =\ horizontal\_coefficients[coefficient\_group\ +\ k\ -\/\ n0];}
\DoxyCodeLine{01604\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ output\_buffer[out\_pixel\_index\ +\ 0]\ +=\ decode\_buffer[in\_pixel\_index\ +\ 0]\ *\ coefficient;}
\DoxyCodeLine{01605\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ output\_buffer[out\_pixel\_index\ +\ 1]\ +=\ decode\_buffer[in\_pixel\_index\ +\ 1]\ *\ coefficient;}
\DoxyCodeLine{01606\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ output\_buffer[out\_pixel\_index\ +\ 2]\ +=\ decode\_buffer[in\_pixel\_index\ +\ 2]\ *\ coefficient;}
\DoxyCodeLine{01607\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01608\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01609\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{01610\ }
\DoxyCodeLine{01611\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ 4:}
\DoxyCodeLine{01612\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (x\ =\ 0;\ x\ <\ max\_x;\ x++)}
\DoxyCodeLine{01613\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01614\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ n0\ =\ horizontal\_contributors[x].n0;}
\DoxyCodeLine{01615\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ n1\ =\ horizontal\_contributors[x].n1;}
\DoxyCodeLine{01616\ }
\DoxyCodeLine{01617\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ in\_x\ =\ x\ -\/\ filter\_pixel\_margin;}
\DoxyCodeLine{01618\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ in\_pixel\_index\ =\ in\_x\ *\ 4;}
\DoxyCodeLine{01619\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ max\_n\ =\ n1;}
\DoxyCodeLine{01620\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ coefficient\_group\ =\ coefficient\_width\ *\ x;}
\DoxyCodeLine{01621\ }
\DoxyCodeLine{01622\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (k\ =\ n0;\ k\ <=\ max\_n;\ k++)}
\DoxyCodeLine{01623\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01624\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ out\_pixel\_index\ =\ k\ *\ 4;}
\DoxyCodeLine{01625\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ coefficient\ =\ horizontal\_coefficients[coefficient\_group\ +\ k\ -\/\ n0];}
\DoxyCodeLine{01626\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ output\_buffer[out\_pixel\_index\ +\ 0]\ +=\ decode\_buffer[in\_pixel\_index\ +\ 0]\ *\ coefficient;}
\DoxyCodeLine{01627\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ output\_buffer[out\_pixel\_index\ +\ 1]\ +=\ decode\_buffer[in\_pixel\_index\ +\ 1]\ *\ coefficient;}
\DoxyCodeLine{01628\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ output\_buffer[out\_pixel\_index\ +\ 2]\ +=\ decode\_buffer[in\_pixel\_index\ +\ 2]\ *\ coefficient;}
\DoxyCodeLine{01629\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ output\_buffer[out\_pixel\_index\ +\ 3]\ +=\ decode\_buffer[in\_pixel\_index\ +\ 3]\ *\ coefficient;}
\DoxyCodeLine{01630\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01631\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01632\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{01633\ }
\DoxyCodeLine{01634\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{default}:}
\DoxyCodeLine{01635\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (x\ =\ 0;\ x\ <\ max\_x;\ x++)}
\DoxyCodeLine{01636\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01637\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ n0\ =\ horizontal\_contributors[x].n0;}
\DoxyCodeLine{01638\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ n1\ =\ horizontal\_contributors[x].n1;}
\DoxyCodeLine{01639\ }
\DoxyCodeLine{01640\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ in\_x\ =\ x\ -\/\ filter\_pixel\_margin;}
\DoxyCodeLine{01641\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ in\_pixel\_index\ =\ in\_x\ *\ channels;}
\DoxyCodeLine{01642\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ max\_n\ =\ n1;}
\DoxyCodeLine{01643\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ coefficient\_group\ =\ coefficient\_width\ *\ x;}
\DoxyCodeLine{01644\ }
\DoxyCodeLine{01645\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (k\ =\ n0;\ k\ <=\ max\_n;\ k++)}
\DoxyCodeLine{01646\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01647\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ c;}
\DoxyCodeLine{01648\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ out\_pixel\_index\ =\ k\ *\ channels;}
\DoxyCodeLine{01649\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ coefficient\ =\ horizontal\_coefficients[coefficient\_group\ +\ k\ -\/\ n0];}
\DoxyCodeLine{01650\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (c\ =\ 0;\ c\ <\ channels;\ c++)}
\DoxyCodeLine{01651\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ output\_buffer[out\_pixel\_index\ +\ c]\ +=\ decode\_buffer[in\_pixel\_index\ +\ c]\ *\ coefficient;}
\DoxyCodeLine{01652\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01653\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01654\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{01655\ \ \ \ \ \}}
\DoxyCodeLine{01656\ \}}
\DoxyCodeLine{01657\ }
\DoxyCodeLine{01658\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ stbir\_\_decode\_and\_resample\_upsample(stbir\_\_info*\ stbir\_info,\ \textcolor{keywordtype}{int}\ n)}
\DoxyCodeLine{01659\ \{}
\DoxyCodeLine{01660\ \ \ \ \ \textcolor{comment}{//\ Decode\ the\ nth\ scanline\ from\ the\ source\ image\ into\ the\ decode\ buffer.}}
\DoxyCodeLine{01661\ \ \ \ \ stbir\_\_decode\_scanline(stbir\_info,\ n);}
\DoxyCodeLine{01662\ }
\DoxyCodeLine{01663\ \ \ \ \ \textcolor{comment}{//\ Now\ resample\ it\ into\ the\ ring\ buffer.}}
\DoxyCodeLine{01664\ \ \ \ \ \textcolor{keywordflow}{if}\ (stbir\_\_use\_width\_upsampling(stbir\_info))}
\DoxyCodeLine{01665\ \ \ \ \ \ \ \ \ stbir\_\_resample\_horizontal\_upsample(stbir\_info,\ stbir\_\_add\_empty\_ring\_buffer\_entry(stbir\_info,\ n));}
\DoxyCodeLine{01666\ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{01667\ \ \ \ \ \ \ \ \ stbir\_\_resample\_horizontal\_downsample(stbir\_info,\ stbir\_\_add\_empty\_ring\_buffer\_entry(stbir\_info,\ n));}
\DoxyCodeLine{01668\ }
\DoxyCodeLine{01669\ \ \ \ \ \textcolor{comment}{//\ Now\ it's\ sitting\ in\ the\ ring\ buffer\ ready\ to\ be\ used\ as\ source\ for\ the\ vertical\ sampling.}}
\DoxyCodeLine{01670\ \}}
\DoxyCodeLine{01671\ }
\DoxyCodeLine{01672\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ stbir\_\_decode\_and\_resample\_downsample(stbir\_\_info*\ stbir\_info,\ \textcolor{keywordtype}{int}\ n)}
\DoxyCodeLine{01673\ \{}
\DoxyCodeLine{01674\ \ \ \ \ \textcolor{comment}{//\ Decode\ the\ nth\ scanline\ from\ the\ source\ image\ into\ the\ decode\ buffer.}}
\DoxyCodeLine{01675\ \ \ \ \ stbir\_\_decode\_scanline(stbir\_info,\ n);}
\DoxyCodeLine{01676\ }
\DoxyCodeLine{01677\ \ \ \ \ memset(stbir\_info-\/>horizontal\_buffer,\ 0,\ stbir\_info-\/>output\_w\ *\ stbir\_info-\/>channels\ *\ \textcolor{keyword}{sizeof}(\textcolor{keywordtype}{float}));}
\DoxyCodeLine{01678\ }
\DoxyCodeLine{01679\ \ \ \ \ \textcolor{comment}{//\ Now\ resample\ it\ into\ the\ horizontal\ buffer.}}
\DoxyCodeLine{01680\ \ \ \ \ \textcolor{keywordflow}{if}\ (stbir\_\_use\_width\_upsampling(stbir\_info))}
\DoxyCodeLine{01681\ \ \ \ \ \ \ \ \ stbir\_\_resample\_horizontal\_upsample(stbir\_info,\ stbir\_info-\/>horizontal\_buffer);}
\DoxyCodeLine{01682\ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{01683\ \ \ \ \ \ \ \ \ stbir\_\_resample\_horizontal\_downsample(stbir\_info,\ stbir\_info-\/>horizontal\_buffer);}
\DoxyCodeLine{01684\ }
\DoxyCodeLine{01685\ \ \ \ \ \textcolor{comment}{//\ Now\ it's\ sitting\ in\ the\ horizontal\ buffer\ ready\ to\ be\ distributed\ into\ the\ ring\ buffers.}}
\DoxyCodeLine{01686\ \}}
\DoxyCodeLine{01687\ }
\DoxyCodeLine{01688\ \textcolor{comment}{//\ Get\ the\ specified\ scan\ line\ from\ the\ ring\ buffer.}}
\DoxyCodeLine{01689\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{float}*\ stbir\_\_get\_ring\_buffer\_scanline(\textcolor{keywordtype}{int}\ get\_scanline,\ \textcolor{keywordtype}{float}*\ ring\_buffer,\ \textcolor{keywordtype}{int}\ begin\_index,\ \textcolor{keywordtype}{int}\ first\_scanline,\ \textcolor{keywordtype}{int}\ ring\_buffer\_num\_entries,\ \textcolor{keywordtype}{int}\ ring\_buffer\_length)}
\DoxyCodeLine{01690\ \{}
\DoxyCodeLine{01691\ \ \ \ \ \textcolor{keywordtype}{int}\ ring\_buffer\_index\ =\ (begin\_index\ +\ (get\_scanline\ -\/\ first\_scanline))\ \%\ ring\_buffer\_num\_entries;}
\DoxyCodeLine{01692\ \ \ \ \ \textcolor{keywordflow}{return}\ stbir\_\_get\_ring\_buffer\_entry(ring\_buffer,\ ring\_buffer\_index,\ ring\_buffer\_length);}
\DoxyCodeLine{01693\ \}}
\DoxyCodeLine{01694\ }
\DoxyCodeLine{01695\ }
\DoxyCodeLine{01696\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ stbir\_\_encode\_scanline(stbir\_\_info*\ stbir\_info,\ \textcolor{keywordtype}{int}\ num\_pixels,\ \textcolor{keywordtype}{void}\ *output\_buffer,\ \textcolor{keywordtype}{float}\ *encode\_buffer,\ \textcolor{keywordtype}{int}\ channels,\ \textcolor{keywordtype}{int}\ alpha\_channel,\ \textcolor{keywordtype}{int}\ decode)}
\DoxyCodeLine{01697\ \{}
\DoxyCodeLine{01698\ \ \ \ \ \textcolor{keywordtype}{int}\ x;}
\DoxyCodeLine{01699\ \ \ \ \ \textcolor{keywordtype}{int}\ n;}
\DoxyCodeLine{01700\ \ \ \ \ \textcolor{keywordtype}{int}\ num\_nonalpha;}
\DoxyCodeLine{01701\ \ \ \ \ stbir\_uint16\ nonalpha[STBIR\_MAX\_CHANNELS];}
\DoxyCodeLine{01702\ }
\DoxyCodeLine{01703\ \ \ \ \ \textcolor{keywordflow}{if}\ (!(stbir\_info-\/>flags\&STBIR\_FLAG\_ALPHA\_PREMULTIPLIED))}
\DoxyCodeLine{01704\ \ \ \ \ \{}
\DoxyCodeLine{01705\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (x=0;\ x\ <\ num\_pixels;\ ++x)}
\DoxyCodeLine{01706\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01707\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ pixel\_index\ =\ x*channels;}
\DoxyCodeLine{01708\ }
\DoxyCodeLine{01709\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ alpha\ =\ encode\_buffer[pixel\_index\ +\ alpha\_channel];}
\DoxyCodeLine{01710\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ reciprocal\_alpha\ =\ alpha\ ?\ 1.0f\ /\ alpha\ :\ 0;}
\DoxyCodeLine{01711\ }
\DoxyCodeLine{01712\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ unrolling\ this\ produced\ a\ 1\%\ slowdown\ upscaling\ a\ large\ RGBA\ linear-\/space\ image\ on\ my\ machine\ -\/\ stb}}
\DoxyCodeLine{01713\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (n\ =\ 0;\ n\ <\ channels;\ n++)}
\DoxyCodeLine{01714\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (n\ !=\ alpha\_channel)}
\DoxyCodeLine{01715\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ encode\_buffer[pixel\_index\ +\ n]\ *=\ reciprocal\_alpha;}
\DoxyCodeLine{01716\ }
\DoxyCodeLine{01717\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ We\ added\ in\ a\ small\ epsilon\ to\ prevent\ the\ color\ channel\ from\ being\ deleted\ with\ zero\ alpha.}}
\DoxyCodeLine{01718\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Because\ we\ only\ add\ it\ for\ integer\ types,\ it\ will\ automatically\ be\ discarded\ on\ integer}}
\DoxyCodeLine{01719\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ conversion,\ so\ we\ don't\ need\ to\ subtract\ it\ back\ out\ (which\ would\ be\ problematic\ for}}
\DoxyCodeLine{01720\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ numeric\ precision\ reasons).}}
\DoxyCodeLine{01721\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01722\ \ \ \ \ \}}
\DoxyCodeLine{01723\ }
\DoxyCodeLine{01724\ \ \ \ \ \textcolor{comment}{//\ build\ a\ table\ of\ all\ channels\ that\ need\ colorspace\ correction,\ so}}
\DoxyCodeLine{01725\ \ \ \ \ \textcolor{comment}{//\ we\ don't\ perform\ colorspace\ correction\ on\ channels\ that\ don't\ need\ it.}}
\DoxyCodeLine{01726\ \ \ \ \ \textcolor{keywordflow}{for}\ (x\ =\ 0,\ num\_nonalpha\ =\ 0;\ x\ <\ channels;\ ++x)}
\DoxyCodeLine{01727\ \ \ \ \ \{}
\DoxyCodeLine{01728\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (x\ !=\ alpha\_channel\ ||\ (stbir\_info-\/>flags\ \&\ STBIR\_FLAG\_ALPHA\_USES\_COLORSPACE))}
\DoxyCodeLine{01729\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01730\ \ \ \ \ \ \ \ \ \ \ \ \ nonalpha[num\_nonalpha++]\ =\ (stbir\_uint16)x;}
\DoxyCodeLine{01731\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01732\ \ \ \ \ \}}
\DoxyCodeLine{01733\ }
\DoxyCodeLine{01734\ \textcolor{preprocessor}{\ \ \ \ \#define\ STBIR\_\_ROUND\_INT(f)\ \ \ \ ((int)\ \ \ \ \ \ \ \ \ \ ((f)+0.5))}}
\DoxyCodeLine{01735\ \textcolor{preprocessor}{\ \ \ \ \#define\ STBIR\_\_ROUND\_UINT(f)\ \ \ ((stbir\_uint32)\ ((f)+0.5))}}
\DoxyCodeLine{01736\ }
\DoxyCodeLine{01737\ \textcolor{preprocessor}{\ \ \ \ \#ifdef\ STBIR\_\_SATURATE\_INT}}
\DoxyCodeLine{01738\ \textcolor{preprocessor}{\ \ \ \ \#define\ STBIR\_\_ENCODE\_LINEAR8(f)\ \ \ stbir\_\_saturate8\ (STBIR\_\_ROUND\_INT((f)\ *\ stbir\_\_max\_uint8\_as\_float\ ))}}
\DoxyCodeLine{01739\ \textcolor{preprocessor}{\ \ \ \ \#define\ STBIR\_\_ENCODE\_LINEAR16(f)\ \ stbir\_\_saturate16(STBIR\_\_ROUND\_INT((f)\ *\ stbir\_\_max\_uint16\_as\_float))}}
\DoxyCodeLine{01740\ \textcolor{preprocessor}{\ \ \ \ \#else}}
\DoxyCodeLine{01741\ \textcolor{preprocessor}{\ \ \ \ \#define\ STBIR\_\_ENCODE\_LINEAR8(f)\ \ \ (unsigned\ char\ )\ STBIR\_\_ROUND\_INT(stbir\_\_saturate(f)\ *\ stbir\_\_max\_uint8\_as\_float\ )}}
\DoxyCodeLine{01742\ \textcolor{preprocessor}{\ \ \ \ \#define\ STBIR\_\_ENCODE\_LINEAR16(f)\ \ (unsigned\ short)\ STBIR\_\_ROUND\_INT(stbir\_\_saturate(f)\ *\ stbir\_\_max\_uint16\_as\_float)}}
\DoxyCodeLine{01743\ \textcolor{preprocessor}{\ \ \ \ \#endif}}
\DoxyCodeLine{01744\ }
\DoxyCodeLine{01745\ \ \ \ \ \textcolor{keywordflow}{switch}\ (decode)}
\DoxyCodeLine{01746\ \ \ \ \ \{}
\DoxyCodeLine{01747\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ STBIR\_\_DECODE(STBIR\_TYPE\_UINT8,\ STBIR\_COLORSPACE\_LINEAR):}
\DoxyCodeLine{01748\ \ \ \ \ \ \ \ \ \ \ \ \ for\ (x=0;\ x\ <\ num\_pixels;\ ++x)}
\DoxyCodeLine{01749\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01750\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ pixel\_index\ =\ x*channels;}
\DoxyCodeLine{01751\ }
\DoxyCodeLine{01752\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (n\ =\ 0;\ n\ <\ channels;\ n++)}
\DoxyCodeLine{01753\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01754\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ index\ =\ pixel\_index\ +\ n;}
\DoxyCodeLine{01755\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ((\textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{char}*)output\_buffer)[index]\ =\ STBIR\_\_ENCODE\_LINEAR8(encode\_buffer[index]);}
\DoxyCodeLine{01756\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01757\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01758\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{01759\ }
\DoxyCodeLine{01760\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ STBIR\_\_DECODE(STBIR\_TYPE\_UINT8,\ STBIR\_COLORSPACE\_SRGB):}
\DoxyCodeLine{01761\ \ \ \ \ \ \ \ \ \ \ \ \ for\ (x=0;\ x\ <\ num\_pixels;\ ++x)}
\DoxyCodeLine{01762\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01763\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ pixel\_index\ =\ x*channels;}
\DoxyCodeLine{01764\ }
\DoxyCodeLine{01765\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (n\ =\ 0;\ n\ <\ num\_nonalpha;\ n++)}
\DoxyCodeLine{01766\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01767\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ index\ =\ pixel\_index\ +\ nonalpha[n];}
\DoxyCodeLine{01768\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ((\textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{char}*)output\_buffer)[index]\ =\ stbir\_\_linear\_to\_srgb\_uchar(encode\_buffer[index]);}
\DoxyCodeLine{01769\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01770\ }
\DoxyCodeLine{01771\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!(stbir\_info-\/>flags\ \&\ STBIR\_FLAG\_ALPHA\_USES\_COLORSPACE))}
\DoxyCodeLine{01772\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ((\textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{char}\ *)output\_buffer)[pixel\_index\ +\ alpha\_channel]\ =\ STBIR\_\_ENCODE\_LINEAR8(encode\_buffer[pixel\_index+alpha\_channel]);}
\DoxyCodeLine{01773\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01774\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{01775\ }
\DoxyCodeLine{01776\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ STBIR\_\_DECODE(STBIR\_TYPE\_UINT16,\ STBIR\_COLORSPACE\_LINEAR):}
\DoxyCodeLine{01777\ \ \ \ \ \ \ \ \ \ \ \ \ for\ (x=0;\ x\ <\ num\_pixels;\ ++x)}
\DoxyCodeLine{01778\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01779\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ pixel\_index\ =\ x*channels;}
\DoxyCodeLine{01780\ }
\DoxyCodeLine{01781\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (n\ =\ 0;\ n\ <\ channels;\ n++)}
\DoxyCodeLine{01782\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01783\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ index\ =\ pixel\_index\ +\ n;}
\DoxyCodeLine{01784\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ((\textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{short}*)output\_buffer)[index]\ =\ STBIR\_\_ENCODE\_LINEAR16(encode\_buffer[index]);}
\DoxyCodeLine{01785\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01786\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01787\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{01788\ }
\DoxyCodeLine{01789\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ STBIR\_\_DECODE(STBIR\_TYPE\_UINT16,\ STBIR\_COLORSPACE\_SRGB):}
\DoxyCodeLine{01790\ \ \ \ \ \ \ \ \ \ \ \ \ for\ (x=0;\ x\ <\ num\_pixels;\ ++x)}
\DoxyCodeLine{01791\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01792\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ pixel\_index\ =\ x*channels;}
\DoxyCodeLine{01793\ }
\DoxyCodeLine{01794\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (n\ =\ 0;\ n\ <\ num\_nonalpha;\ n++)}
\DoxyCodeLine{01795\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01796\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ index\ =\ pixel\_index\ +\ nonalpha[n];}
\DoxyCodeLine{01797\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ((\textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{short}*)output\_buffer)[index]\ =\ (\textcolor{keywordtype}{unsigned}\ short)STBIR\_\_ROUND\_INT(stbir\_\_linear\_to\_srgb(stbir\_\_saturate(encode\_buffer[index]))\ *\ stbir\_\_max\_uint16\_as\_float);}
\DoxyCodeLine{01798\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01799\ }
\DoxyCodeLine{01800\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!(stbir\_info-\/>flags\&STBIR\_FLAG\_ALPHA\_USES\_COLORSPACE))}
\DoxyCodeLine{01801\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ((\textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{short}*)output\_buffer)[pixel\_index\ +\ alpha\_channel]\ =\ STBIR\_\_ENCODE\_LINEAR16(encode\_buffer[pixel\_index\ +\ alpha\_channel]);}
\DoxyCodeLine{01802\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01803\ }
\DoxyCodeLine{01804\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{01805\ }
\DoxyCodeLine{01806\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ STBIR\_\_DECODE(STBIR\_TYPE\_UINT32,\ STBIR\_COLORSPACE\_LINEAR):}
\DoxyCodeLine{01807\ \ \ \ \ \ \ \ \ \ \ \ \ for\ (x=0;\ x\ <\ num\_pixels;\ ++x)}
\DoxyCodeLine{01808\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01809\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ pixel\_index\ =\ x*channels;}
\DoxyCodeLine{01810\ }
\DoxyCodeLine{01811\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (n\ =\ 0;\ n\ <\ channels;\ n++)}
\DoxyCodeLine{01812\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01813\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ index\ =\ pixel\_index\ +\ n;}
\DoxyCodeLine{01814\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ((\textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}*)output\_buffer)[index]\ =\ (\textcolor{keywordtype}{unsigned}\ int)STBIR\_\_ROUND\_UINT(((\textcolor{keywordtype}{double})stbir\_\_saturate(encode\_buffer[index]))\ *\ stbir\_\_max\_uint32\_as\_float);}
\DoxyCodeLine{01815\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01816\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01817\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{01818\ }
\DoxyCodeLine{01819\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ STBIR\_\_DECODE(STBIR\_TYPE\_UINT32,\ STBIR\_COLORSPACE\_SRGB):}
\DoxyCodeLine{01820\ \ \ \ \ \ \ \ \ \ \ \ \ for\ (x=0;\ x\ <\ num\_pixels;\ ++x)}
\DoxyCodeLine{01821\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01822\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ pixel\_index\ =\ x*channels;}
\DoxyCodeLine{01823\ }
\DoxyCodeLine{01824\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (n\ =\ 0;\ n\ <\ num\_nonalpha;\ n++)}
\DoxyCodeLine{01825\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01826\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ index\ =\ pixel\_index\ +\ nonalpha[n];}
\DoxyCodeLine{01827\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ((\textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}*)output\_buffer)[index]\ =\ (\textcolor{keywordtype}{unsigned}\ int)STBIR\_\_ROUND\_UINT(((\textcolor{keywordtype}{double})stbir\_\_linear\_to\_srgb(stbir\_\_saturate(encode\_buffer[index])))\ *\ stbir\_\_max\_uint32\_as\_float);}
\DoxyCodeLine{01828\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01829\ }
\DoxyCodeLine{01830\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!(stbir\_info-\/>flags\&STBIR\_FLAG\_ALPHA\_USES\_COLORSPACE))}
\DoxyCodeLine{01831\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ((\textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}*)output\_buffer)[pixel\_index\ +\ alpha\_channel]\ =\ (\textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int})STBIR\_\_ROUND\_INT(((\textcolor{keywordtype}{double})stbir\_\_saturate(encode\_buffer[pixel\_index\ +\ alpha\_channel]))\ *\ stbir\_\_max\_uint32\_as\_float);}
\DoxyCodeLine{01832\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01833\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{01834\ }
\DoxyCodeLine{01835\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ STBIR\_\_DECODE(STBIR\_TYPE\_FLOAT,\ STBIR\_COLORSPACE\_LINEAR):}
\DoxyCodeLine{01836\ \ \ \ \ \ \ \ \ \ \ \ \ for\ (x=0;\ x\ <\ num\_pixels;\ ++x)}
\DoxyCodeLine{01837\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01838\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ pixel\_index\ =\ x*channels;}
\DoxyCodeLine{01839\ }
\DoxyCodeLine{01840\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (n\ =\ 0;\ n\ <\ channels;\ n++)}
\DoxyCodeLine{01841\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01842\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ index\ =\ pixel\_index\ +\ n;}
\DoxyCodeLine{01843\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ((\textcolor{keywordtype}{float}*)output\_buffer)[index]\ =\ encode\_buffer[index];}
\DoxyCodeLine{01844\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01845\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01846\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{01847\ }
\DoxyCodeLine{01848\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ STBIR\_\_DECODE(STBIR\_TYPE\_FLOAT,\ STBIR\_COLORSPACE\_SRGB):}
\DoxyCodeLine{01849\ \ \ \ \ \ \ \ \ \ \ \ \ for\ (x=0;\ x\ <\ num\_pixels;\ ++x)}
\DoxyCodeLine{01850\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01851\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ pixel\_index\ =\ x*channels;}
\DoxyCodeLine{01852\ }
\DoxyCodeLine{01853\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (n\ =\ 0;\ n\ <\ num\_nonalpha;\ n++)}
\DoxyCodeLine{01854\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01855\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ index\ =\ pixel\_index\ +\ nonalpha[n];}
\DoxyCodeLine{01856\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ((\textcolor{keywordtype}{float}*)output\_buffer)[index]\ =\ stbir\_\_linear\_to\_srgb(encode\_buffer[index]);}
\DoxyCodeLine{01857\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01858\ }
\DoxyCodeLine{01859\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (!(stbir\_info-\/>flags\&STBIR\_FLAG\_ALPHA\_USES\_COLORSPACE))}
\DoxyCodeLine{01860\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ((\textcolor{keywordtype}{float}*)output\_buffer)[pixel\_index\ +\ alpha\_channel]\ =\ encode\_buffer[pixel\_index\ +\ alpha\_channel];}
\DoxyCodeLine{01861\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01862\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{01863\ }
\DoxyCodeLine{01864\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{default}:}
\DoxyCodeLine{01865\ \ \ \ \ \ \ \ \ \ \ \ \ STBIR\_ASSERT(!\textcolor{stringliteral}{"{}Unknown\ type/colorspace/channels\ combination."{}});}
\DoxyCodeLine{01866\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{01867\ \ \ \ \ \}}
\DoxyCodeLine{01868\ \}}
\DoxyCodeLine{01869\ }
\DoxyCodeLine{01870\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ stbir\_\_resample\_vertical\_upsample(stbir\_\_info*\ stbir\_info,\ \textcolor{keywordtype}{int}\ n)}
\DoxyCodeLine{01871\ \{}
\DoxyCodeLine{01872\ \ \ \ \ \textcolor{keywordtype}{int}\ x,\ k;}
\DoxyCodeLine{01873\ \ \ \ \ \textcolor{keywordtype}{int}\ output\_w\ =\ stbir\_info-\/>output\_w;}
\DoxyCodeLine{01874\ \ \ \ \ stbir\_\_contributors*\ vertical\_contributors\ =\ stbir\_info-\/>vertical\_contributors;}
\DoxyCodeLine{01875\ \ \ \ \ \textcolor{keywordtype}{float}*\ vertical\_coefficients\ =\ stbir\_info-\/>vertical\_coefficients;}
\DoxyCodeLine{01876\ \ \ \ \ \textcolor{keywordtype}{int}\ channels\ =\ stbir\_info-\/>channels;}
\DoxyCodeLine{01877\ \ \ \ \ \textcolor{keywordtype}{int}\ alpha\_channel\ =\ stbir\_info-\/>alpha\_channel;}
\DoxyCodeLine{01878\ \ \ \ \ \textcolor{keywordtype}{int}\ type\ =\ stbir\_info-\/>type;}
\DoxyCodeLine{01879\ \ \ \ \ \textcolor{keywordtype}{int}\ colorspace\ =\ stbir\_info-\/>colorspace;}
\DoxyCodeLine{01880\ \ \ \ \ \textcolor{keywordtype}{int}\ ring\_buffer\_entries\ =\ stbir\_info-\/>ring\_buffer\_num\_entries;}
\DoxyCodeLine{01881\ \ \ \ \ \textcolor{keywordtype}{void}*\ output\_data\ =\ stbir\_info-\/>output\_data;}
\DoxyCodeLine{01882\ \ \ \ \ \textcolor{keywordtype}{float}*\ encode\_buffer\ =\ stbir\_info-\/>encode\_buffer;}
\DoxyCodeLine{01883\ \ \ \ \ \textcolor{keywordtype}{int}\ decode\ =\ STBIR\_\_DECODE(type,\ colorspace);}
\DoxyCodeLine{01884\ \ \ \ \ \textcolor{keywordtype}{int}\ coefficient\_width\ =\ stbir\_info-\/>vertical\_coefficient\_width;}
\DoxyCodeLine{01885\ \ \ \ \ \textcolor{keywordtype}{int}\ coefficient\_counter;}
\DoxyCodeLine{01886\ \ \ \ \ \textcolor{keywordtype}{int}\ contributor\ =\ n;}
\DoxyCodeLine{01887\ }
\DoxyCodeLine{01888\ \ \ \ \ \textcolor{keywordtype}{float}*\ ring\_buffer\ =\ stbir\_info-\/>ring\_buffer;}
\DoxyCodeLine{01889\ \ \ \ \ \textcolor{keywordtype}{int}\ ring\_buffer\_begin\_index\ =\ stbir\_info-\/>ring\_buffer\_begin\_index;}
\DoxyCodeLine{01890\ \ \ \ \ \textcolor{keywordtype}{int}\ ring\_buffer\_first\_scanline\ =\ stbir\_info-\/>ring\_buffer\_first\_scanline;}
\DoxyCodeLine{01891\ \ \ \ \ \textcolor{keywordtype}{int}\ ring\_buffer\_length\ =\ stbir\_info-\/>ring\_buffer\_length\_bytes/\textcolor{keyword}{sizeof}(float);}
\DoxyCodeLine{01892\ }
\DoxyCodeLine{01893\ \ \ \ \ \textcolor{keywordtype}{int}\ n0,n1,\ output\_row\_start;}
\DoxyCodeLine{01894\ \ \ \ \ \textcolor{keywordtype}{int}\ coefficient\_group\ =\ coefficient\_width\ *\ contributor;}
\DoxyCodeLine{01895\ }
\DoxyCodeLine{01896\ \ \ \ \ n0\ =\ vertical\_contributors[contributor].n0;}
\DoxyCodeLine{01897\ \ \ \ \ n1\ =\ vertical\_contributors[contributor].n1;}
\DoxyCodeLine{01898\ }
\DoxyCodeLine{01899\ \ \ \ \ output\_row\_start\ =\ n\ *\ stbir\_info-\/>output\_stride\_bytes;}
\DoxyCodeLine{01900\ }
\DoxyCodeLine{01901\ \ \ \ \ STBIR\_ASSERT(stbir\_\_use\_height\_upsampling(stbir\_info));}
\DoxyCodeLine{01902\ }
\DoxyCodeLine{01903\ \ \ \ \ memset(encode\_buffer,\ 0,\ output\_w\ *\ \textcolor{keyword}{sizeof}(\textcolor{keywordtype}{float})\ *\ channels);}
\DoxyCodeLine{01904\ }
\DoxyCodeLine{01905\ \ \ \ \ \textcolor{comment}{//\ I\ tried\ reblocking\ this\ for\ better\ cache\ usage\ of\ encode\_buffer}}
\DoxyCodeLine{01906\ \ \ \ \ \textcolor{comment}{//\ (using\ x\_outer,\ k,\ x\_inner),\ but\ it\ lost\ speed.\ -\/-\/\ stb}}
\DoxyCodeLine{01907\ }
\DoxyCodeLine{01908\ \ \ \ \ coefficient\_counter\ =\ 0;}
\DoxyCodeLine{01909\ \ \ \ \ \textcolor{keywordflow}{switch}\ (channels)\ \{}
\DoxyCodeLine{01910\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ 1:}
\DoxyCodeLine{01911\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (k\ =\ n0;\ k\ <=\ n1;\ k++)}
\DoxyCodeLine{01912\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01913\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ coefficient\_index\ =\ coefficient\_counter++;}
\DoxyCodeLine{01914\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}*\ ring\_buffer\_entry\ =\ stbir\_\_get\_ring\_buffer\_scanline(k,\ ring\_buffer,\ ring\_buffer\_begin\_index,\ ring\_buffer\_first\_scanline,\ ring\_buffer\_entries,\ ring\_buffer\_length);}
\DoxyCodeLine{01915\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ coefficient\ =\ vertical\_coefficients[coefficient\_group\ +\ coefficient\_index];}
\DoxyCodeLine{01916\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (x\ =\ 0;\ x\ <\ output\_w;\ ++x)}
\DoxyCodeLine{01917\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01918\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ in\_pixel\_index\ =\ x\ *\ 1;}
\DoxyCodeLine{01919\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ encode\_buffer[in\_pixel\_index\ +\ 0]\ +=\ ring\_buffer\_entry[in\_pixel\_index\ +\ 0]\ *\ coefficient;}
\DoxyCodeLine{01920\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01921\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01922\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{01923\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ 2:}
\DoxyCodeLine{01924\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (k\ =\ n0;\ k\ <=\ n1;\ k++)}
\DoxyCodeLine{01925\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01926\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ coefficient\_index\ =\ coefficient\_counter++;}
\DoxyCodeLine{01927\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}*\ ring\_buffer\_entry\ =\ stbir\_\_get\_ring\_buffer\_scanline(k,\ ring\_buffer,\ ring\_buffer\_begin\_index,\ ring\_buffer\_first\_scanline,\ ring\_buffer\_entries,\ ring\_buffer\_length);}
\DoxyCodeLine{01928\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ coefficient\ =\ vertical\_coefficients[coefficient\_group\ +\ coefficient\_index];}
\DoxyCodeLine{01929\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (x\ =\ 0;\ x\ <\ output\_w;\ ++x)}
\DoxyCodeLine{01930\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01931\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ in\_pixel\_index\ =\ x\ *\ 2;}
\DoxyCodeLine{01932\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ encode\_buffer[in\_pixel\_index\ +\ 0]\ +=\ ring\_buffer\_entry[in\_pixel\_index\ +\ 0]\ *\ coefficient;}
\DoxyCodeLine{01933\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ encode\_buffer[in\_pixel\_index\ +\ 1]\ +=\ ring\_buffer\_entry[in\_pixel\_index\ +\ 1]\ *\ coefficient;}
\DoxyCodeLine{01934\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01935\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01936\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{01937\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ 3:}
\DoxyCodeLine{01938\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (k\ =\ n0;\ k\ <=\ n1;\ k++)}
\DoxyCodeLine{01939\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01940\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ coefficient\_index\ =\ coefficient\_counter++;}
\DoxyCodeLine{01941\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}*\ ring\_buffer\_entry\ =\ stbir\_\_get\_ring\_buffer\_scanline(k,\ ring\_buffer,\ ring\_buffer\_begin\_index,\ ring\_buffer\_first\_scanline,\ ring\_buffer\_entries,\ ring\_buffer\_length);}
\DoxyCodeLine{01942\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ coefficient\ =\ vertical\_coefficients[coefficient\_group\ +\ coefficient\_index];}
\DoxyCodeLine{01943\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (x\ =\ 0;\ x\ <\ output\_w;\ ++x)}
\DoxyCodeLine{01944\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01945\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ in\_pixel\_index\ =\ x\ *\ 3;}
\DoxyCodeLine{01946\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ encode\_buffer[in\_pixel\_index\ +\ 0]\ +=\ ring\_buffer\_entry[in\_pixel\_index\ +\ 0]\ *\ coefficient;}
\DoxyCodeLine{01947\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ encode\_buffer[in\_pixel\_index\ +\ 1]\ +=\ ring\_buffer\_entry[in\_pixel\_index\ +\ 1]\ *\ coefficient;}
\DoxyCodeLine{01948\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ encode\_buffer[in\_pixel\_index\ +\ 2]\ +=\ ring\_buffer\_entry[in\_pixel\_index\ +\ 2]\ *\ coefficient;}
\DoxyCodeLine{01949\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01950\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01951\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{01952\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ 4:}
\DoxyCodeLine{01953\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (k\ =\ n0;\ k\ <=\ n1;\ k++)}
\DoxyCodeLine{01954\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01955\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ coefficient\_index\ =\ coefficient\_counter++;}
\DoxyCodeLine{01956\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}*\ ring\_buffer\_entry\ =\ stbir\_\_get\_ring\_buffer\_scanline(k,\ ring\_buffer,\ ring\_buffer\_begin\_index,\ ring\_buffer\_first\_scanline,\ ring\_buffer\_entries,\ ring\_buffer\_length);}
\DoxyCodeLine{01957\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ coefficient\ =\ vertical\_coefficients[coefficient\_group\ +\ coefficient\_index];}
\DoxyCodeLine{01958\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (x\ =\ 0;\ x\ <\ output\_w;\ ++x)}
\DoxyCodeLine{01959\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01960\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ in\_pixel\_index\ =\ x\ *\ 4;}
\DoxyCodeLine{01961\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ encode\_buffer[in\_pixel\_index\ +\ 0]\ +=\ ring\_buffer\_entry[in\_pixel\_index\ +\ 0]\ *\ coefficient;}
\DoxyCodeLine{01962\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ encode\_buffer[in\_pixel\_index\ +\ 1]\ +=\ ring\_buffer\_entry[in\_pixel\_index\ +\ 1]\ *\ coefficient;}
\DoxyCodeLine{01963\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ encode\_buffer[in\_pixel\_index\ +\ 2]\ +=\ ring\_buffer\_entry[in\_pixel\_index\ +\ 2]\ *\ coefficient;}
\DoxyCodeLine{01964\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ encode\_buffer[in\_pixel\_index\ +\ 3]\ +=\ ring\_buffer\_entry[in\_pixel\_index\ +\ 3]\ *\ coefficient;}
\DoxyCodeLine{01965\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01966\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01967\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{01968\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{default}:}
\DoxyCodeLine{01969\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (k\ =\ n0;\ k\ <=\ n1;\ k++)}
\DoxyCodeLine{01970\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01971\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ coefficient\_index\ =\ coefficient\_counter++;}
\DoxyCodeLine{01972\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}*\ ring\_buffer\_entry\ =\ stbir\_\_get\_ring\_buffer\_scanline(k,\ ring\_buffer,\ ring\_buffer\_begin\_index,\ ring\_buffer\_first\_scanline,\ ring\_buffer\_entries,\ ring\_buffer\_length);}
\DoxyCodeLine{01973\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ coefficient\ =\ vertical\_coefficients[coefficient\_group\ +\ coefficient\_index];}
\DoxyCodeLine{01974\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (x\ =\ 0;\ x\ <\ output\_w;\ ++x)}
\DoxyCodeLine{01975\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{01976\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ in\_pixel\_index\ =\ x\ *\ channels;}
\DoxyCodeLine{01977\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ c;}
\DoxyCodeLine{01978\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (c\ =\ 0;\ c\ <\ channels;\ c++)}
\DoxyCodeLine{01979\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ encode\_buffer[in\_pixel\_index\ +\ c]\ +=\ ring\_buffer\_entry[in\_pixel\_index\ +\ c]\ *\ coefficient;}
\DoxyCodeLine{01980\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01981\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{01982\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{01983\ \ \ \ \ \}}
\DoxyCodeLine{01984\ \ \ \ \ stbir\_\_encode\_scanline(stbir\_info,\ output\_w,\ (\textcolor{keywordtype}{char}\ *)\ output\_data\ +\ output\_row\_start,\ encode\_buffer,\ channels,\ alpha\_channel,\ decode);}
\DoxyCodeLine{01985\ \}}
\DoxyCodeLine{01986\ }
\DoxyCodeLine{01987\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ stbir\_\_resample\_vertical\_downsample(stbir\_\_info*\ stbir\_info,\ \textcolor{keywordtype}{int}\ n)}
\DoxyCodeLine{01988\ \{}
\DoxyCodeLine{01989\ \ \ \ \ \textcolor{keywordtype}{int}\ x,\ k;}
\DoxyCodeLine{01990\ \ \ \ \ \textcolor{keywordtype}{int}\ output\_w\ =\ stbir\_info-\/>output\_w;}
\DoxyCodeLine{01991\ \ \ \ \ stbir\_\_contributors*\ vertical\_contributors\ =\ stbir\_info-\/>vertical\_contributors;}
\DoxyCodeLine{01992\ \ \ \ \ \textcolor{keywordtype}{float}*\ vertical\_coefficients\ =\ stbir\_info-\/>vertical\_coefficients;}
\DoxyCodeLine{01993\ \ \ \ \ \textcolor{keywordtype}{int}\ channels\ =\ stbir\_info-\/>channels;}
\DoxyCodeLine{01994\ \ \ \ \ \textcolor{keywordtype}{int}\ ring\_buffer\_entries\ =\ stbir\_info-\/>ring\_buffer\_num\_entries;}
\DoxyCodeLine{01995\ \ \ \ \ \textcolor{keywordtype}{float}*\ horizontal\_buffer\ =\ stbir\_info-\/>horizontal\_buffer;}
\DoxyCodeLine{01996\ \ \ \ \ \textcolor{keywordtype}{int}\ coefficient\_width\ =\ stbir\_info-\/>vertical\_coefficient\_width;}
\DoxyCodeLine{01997\ \ \ \ \ \textcolor{keywordtype}{int}\ contributor\ =\ n\ +\ stbir\_info-\/>vertical\_filter\_pixel\_margin;}
\DoxyCodeLine{01998\ }
\DoxyCodeLine{01999\ \ \ \ \ \textcolor{keywordtype}{float}*\ ring\_buffer\ =\ stbir\_info-\/>ring\_buffer;}
\DoxyCodeLine{02000\ \ \ \ \ \textcolor{keywordtype}{int}\ ring\_buffer\_begin\_index\ =\ stbir\_info-\/>ring\_buffer\_begin\_index;}
\DoxyCodeLine{02001\ \ \ \ \ \textcolor{keywordtype}{int}\ ring\_buffer\_first\_scanline\ =\ stbir\_info-\/>ring\_buffer\_first\_scanline;}
\DoxyCodeLine{02002\ \ \ \ \ \textcolor{keywordtype}{int}\ ring\_buffer\_length\ =\ stbir\_info-\/>ring\_buffer\_length\_bytes/\textcolor{keyword}{sizeof}(float);}
\DoxyCodeLine{02003\ \ \ \ \ \textcolor{keywordtype}{int}\ n0,n1;}
\DoxyCodeLine{02004\ }
\DoxyCodeLine{02005\ \ \ \ \ n0\ =\ vertical\_contributors[contributor].n0;}
\DoxyCodeLine{02006\ \ \ \ \ n1\ =\ vertical\_contributors[contributor].n1;}
\DoxyCodeLine{02007\ }
\DoxyCodeLine{02008\ \ \ \ \ STBIR\_ASSERT(!stbir\_\_use\_height\_upsampling(stbir\_info));}
\DoxyCodeLine{02009\ }
\DoxyCodeLine{02010\ \ \ \ \ \textcolor{keywordflow}{for}\ (k\ =\ n0;\ k\ <=\ n1;\ k++)}
\DoxyCodeLine{02011\ \ \ \ \ \{}
\DoxyCodeLine{02012\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ coefficient\_index\ =\ k\ -\/\ n0;}
\DoxyCodeLine{02013\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ coefficient\_group\ =\ coefficient\_width\ *\ contributor;}
\DoxyCodeLine{02014\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ coefficient\ =\ vertical\_coefficients[coefficient\_group\ +\ coefficient\_index];}
\DoxyCodeLine{02015\ }
\DoxyCodeLine{02016\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}*\ ring\_buffer\_entry\ =\ stbir\_\_get\_ring\_buffer\_scanline(k,\ ring\_buffer,\ ring\_buffer\_begin\_index,\ ring\_buffer\_first\_scanline,\ ring\_buffer\_entries,\ ring\_buffer\_length);}
\DoxyCodeLine{02017\ }
\DoxyCodeLine{02018\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{switch}\ (channels)\ \{}
\DoxyCodeLine{02019\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ 1:}
\DoxyCodeLine{02020\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (x\ =\ 0;\ x\ <\ output\_w;\ x++)}
\DoxyCodeLine{02021\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{02022\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ in\_pixel\_index\ =\ x\ *\ 1;}
\DoxyCodeLine{02023\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ring\_buffer\_entry[in\_pixel\_index\ +\ 0]\ +=\ horizontal\_buffer[in\_pixel\_index\ +\ 0]\ *\ coefficient;}
\DoxyCodeLine{02024\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{02025\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{02026\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ 2:}
\DoxyCodeLine{02027\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (x\ =\ 0;\ x\ <\ output\_w;\ x++)}
\DoxyCodeLine{02028\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{02029\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ in\_pixel\_index\ =\ x\ *\ 2;}
\DoxyCodeLine{02030\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ring\_buffer\_entry[in\_pixel\_index\ +\ 0]\ +=\ horizontal\_buffer[in\_pixel\_index\ +\ 0]\ *\ coefficient;}
\DoxyCodeLine{02031\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ring\_buffer\_entry[in\_pixel\_index\ +\ 1]\ +=\ horizontal\_buffer[in\_pixel\_index\ +\ 1]\ *\ coefficient;}
\DoxyCodeLine{02032\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{02033\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{02034\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ 3:}
\DoxyCodeLine{02035\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (x\ =\ 0;\ x\ <\ output\_w;\ x++)}
\DoxyCodeLine{02036\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{02037\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ in\_pixel\_index\ =\ x\ *\ 3;}
\DoxyCodeLine{02038\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ring\_buffer\_entry[in\_pixel\_index\ +\ 0]\ +=\ horizontal\_buffer[in\_pixel\_index\ +\ 0]\ *\ coefficient;}
\DoxyCodeLine{02039\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ring\_buffer\_entry[in\_pixel\_index\ +\ 1]\ +=\ horizontal\_buffer[in\_pixel\_index\ +\ 1]\ *\ coefficient;}
\DoxyCodeLine{02040\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ring\_buffer\_entry[in\_pixel\_index\ +\ 2]\ +=\ horizontal\_buffer[in\_pixel\_index\ +\ 2]\ *\ coefficient;}
\DoxyCodeLine{02041\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{02042\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{02043\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{case}\ 4:}
\DoxyCodeLine{02044\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (x\ =\ 0;\ x\ <\ output\_w;\ x++)}
\DoxyCodeLine{02045\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{02046\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ in\_pixel\_index\ =\ x\ *\ 4;}
\DoxyCodeLine{02047\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ring\_buffer\_entry[in\_pixel\_index\ +\ 0]\ +=\ horizontal\_buffer[in\_pixel\_index\ +\ 0]\ *\ coefficient;}
\DoxyCodeLine{02048\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ring\_buffer\_entry[in\_pixel\_index\ +\ 1]\ +=\ horizontal\_buffer[in\_pixel\_index\ +\ 1]\ *\ coefficient;}
\DoxyCodeLine{02049\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ring\_buffer\_entry[in\_pixel\_index\ +\ 2]\ +=\ horizontal\_buffer[in\_pixel\_index\ +\ 2]\ *\ coefficient;}
\DoxyCodeLine{02050\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ring\_buffer\_entry[in\_pixel\_index\ +\ 3]\ +=\ horizontal\_buffer[in\_pixel\_index\ +\ 3]\ *\ coefficient;}
\DoxyCodeLine{02051\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{02052\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{02053\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{default}:}
\DoxyCodeLine{02054\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (x\ =\ 0;\ x\ <\ output\_w;\ x++)}
\DoxyCodeLine{02055\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{02056\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ in\_pixel\_index\ =\ x\ *\ channels;}
\DoxyCodeLine{02057\ }
\DoxyCodeLine{02058\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ c;}
\DoxyCodeLine{02059\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{for}\ (c\ =\ 0;\ c\ <\ channels;\ c++)}
\DoxyCodeLine{02060\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ ring\_buffer\_entry[in\_pixel\_index\ +\ c]\ +=\ horizontal\_buffer[in\_pixel\_index\ +\ c]\ *\ coefficient;}
\DoxyCodeLine{02061\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{02062\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{02063\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{02064\ \ \ \ \ \}}
\DoxyCodeLine{02065\ \}}
\DoxyCodeLine{02066\ }
\DoxyCodeLine{02067\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ stbir\_\_buffer\_loop\_upsample(stbir\_\_info*\ stbir\_info)}
\DoxyCodeLine{02068\ \{}
\DoxyCodeLine{02069\ \ \ \ \ \textcolor{keywordtype}{int}\ y;}
\DoxyCodeLine{02070\ \ \ \ \ \textcolor{keywordtype}{float}\ scale\_ratio\ =\ stbir\_info-\/>vertical\_scale;}
\DoxyCodeLine{02071\ \ \ \ \ \textcolor{keywordtype}{float}\ out\_scanlines\_radius\ =\ stbir\_\_filter\_info\_table[stbir\_info-\/>vertical\_filter].support(1/scale\_ratio)\ *\ scale\_ratio;}
\DoxyCodeLine{02072\ }
\DoxyCodeLine{02073\ \ \ \ \ STBIR\_ASSERT(stbir\_\_use\_height\_upsampling(stbir\_info));}
\DoxyCodeLine{02074\ }
\DoxyCodeLine{02075\ \ \ \ \ \textcolor{keywordflow}{for}\ (y\ =\ 0;\ y\ <\ stbir\_info-\/>output\_h;\ y++)}
\DoxyCodeLine{02076\ \ \ \ \ \{}
\DoxyCodeLine{02077\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ in\_center\_of\_out\ =\ 0;\ \textcolor{comment}{//\ Center\ of\ the\ current\ out\ scanline\ in\ the\ in\ scanline\ space}}
\DoxyCodeLine{02078\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ in\_first\_scanline\ =\ 0,\ in\_last\_scanline\ =\ 0;}
\DoxyCodeLine{02079\ }
\DoxyCodeLine{02080\ \ \ \ \ \ \ \ \ stbir\_\_calculate\_sample\_range\_upsample(y,\ out\_scanlines\_radius,\ scale\_ratio,\ stbir\_info-\/>vertical\_shift,\ \&in\_first\_scanline,\ \&in\_last\_scanline,\ \&in\_center\_of\_out);}
\DoxyCodeLine{02081\ }
\DoxyCodeLine{02082\ \ \ \ \ \ \ \ \ STBIR\_ASSERT(in\_last\_scanline\ -\/\ in\_first\_scanline\ +\ 1\ <=\ stbir\_info-\/>ring\_buffer\_num\_entries);}
\DoxyCodeLine{02083\ }
\DoxyCodeLine{02084\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (stbir\_info-\/>ring\_buffer\_begin\_index\ >=\ 0)}
\DoxyCodeLine{02085\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{02086\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Get\ rid\ of\ whatever\ we\ don't\ need\ anymore.}}
\DoxyCodeLine{02087\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{while}\ (in\_first\_scanline\ >\ stbir\_info-\/>ring\_buffer\_first\_scanline)}
\DoxyCodeLine{02088\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{02089\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (stbir\_info-\/>ring\_buffer\_first\_scanline\ ==\ stbir\_info-\/>ring\_buffer\_last\_scanline)}
\DoxyCodeLine{02090\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{02091\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ We\ just\ popped\ the\ last\ scanline\ off\ the\ ring\ buffer.}}
\DoxyCodeLine{02092\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Reset\ it\ to\ the\ empty\ state.}}
\DoxyCodeLine{02093\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ stbir\_info-\/>ring\_buffer\_begin\_index\ =\ -\/1;}
\DoxyCodeLine{02094\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ stbir\_info-\/>ring\_buffer\_first\_scanline\ =\ 0;}
\DoxyCodeLine{02095\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ stbir\_info-\/>ring\_buffer\_last\_scanline\ =\ 0;}
\DoxyCodeLine{02096\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{02097\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{02098\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{02099\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{02100\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ stbir\_info-\/>ring\_buffer\_first\_scanline++;}
\DoxyCodeLine{02101\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ stbir\_info-\/>ring\_buffer\_begin\_index\ =\ (stbir\_info-\/>ring\_buffer\_begin\_index\ +\ 1)\ \%\ stbir\_info-\/>ring\_buffer\_num\_entries;}
\DoxyCodeLine{02102\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{02103\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{02104\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{02105\ }
\DoxyCodeLine{02106\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Load\ in\ new\ ones.}}
\DoxyCodeLine{02107\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (stbir\_info-\/>ring\_buffer\_begin\_index\ <\ 0)}
\DoxyCodeLine{02108\ \ \ \ \ \ \ \ \ \ \ \ \ stbir\_\_decode\_and\_resample\_upsample(stbir\_info,\ in\_first\_scanline);}
\DoxyCodeLine{02109\ }
\DoxyCodeLine{02110\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{while}\ (in\_last\_scanline\ >\ stbir\_info-\/>ring\_buffer\_last\_scanline)}
\DoxyCodeLine{02111\ \ \ \ \ \ \ \ \ \ \ \ \ stbir\_\_decode\_and\_resample\_upsample(stbir\_info,\ stbir\_info-\/>ring\_buffer\_last\_scanline\ +\ 1);}
\DoxyCodeLine{02112\ }
\DoxyCodeLine{02113\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Now\ all\ buffers\ should\ be\ ready\ to\ write\ a\ row\ of\ vertical\ sampling.}}
\DoxyCodeLine{02114\ \ \ \ \ \ \ \ \ stbir\_\_resample\_vertical\_upsample(stbir\_info,\ y);}
\DoxyCodeLine{02115\ }
\DoxyCodeLine{02116\ \ \ \ \ \ \ \ \ STBIR\_PROGRESS\_REPORT((\textcolor{keywordtype}{float})y\ /\ stbir\_info-\/>output\_h);}
\DoxyCodeLine{02117\ \ \ \ \ \}}
\DoxyCodeLine{02118\ \}}
\DoxyCodeLine{02119\ }
\DoxyCodeLine{02120\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ stbir\_\_empty\_ring\_buffer(stbir\_\_info*\ stbir\_info,\ \textcolor{keywordtype}{int}\ first\_necessary\_scanline)}
\DoxyCodeLine{02121\ \{}
\DoxyCodeLine{02122\ \ \ \ \ \textcolor{keywordtype}{int}\ output\_stride\_bytes\ =\ stbir\_info-\/>output\_stride\_bytes;}
\DoxyCodeLine{02123\ \ \ \ \ \textcolor{keywordtype}{int}\ channels\ =\ stbir\_info-\/>channels;}
\DoxyCodeLine{02124\ \ \ \ \ \textcolor{keywordtype}{int}\ alpha\_channel\ =\ stbir\_info-\/>alpha\_channel;}
\DoxyCodeLine{02125\ \ \ \ \ \textcolor{keywordtype}{int}\ type\ =\ stbir\_info-\/>type;}
\DoxyCodeLine{02126\ \ \ \ \ \textcolor{keywordtype}{int}\ colorspace\ =\ stbir\_info-\/>colorspace;}
\DoxyCodeLine{02127\ \ \ \ \ \textcolor{keywordtype}{int}\ output\_w\ =\ stbir\_info-\/>output\_w;}
\DoxyCodeLine{02128\ \ \ \ \ \textcolor{keywordtype}{void}*\ output\_data\ =\ stbir\_info-\/>output\_data;}
\DoxyCodeLine{02129\ \ \ \ \ \textcolor{keywordtype}{int}\ decode\ =\ STBIR\_\_DECODE(type,\ colorspace);}
\DoxyCodeLine{02130\ }
\DoxyCodeLine{02131\ \ \ \ \ \textcolor{keywordtype}{float}*\ ring\_buffer\ =\ stbir\_info-\/>ring\_buffer;}
\DoxyCodeLine{02132\ \ \ \ \ \textcolor{keywordtype}{int}\ ring\_buffer\_length\ =\ stbir\_info-\/>ring\_buffer\_length\_bytes/\textcolor{keyword}{sizeof}(float);}
\DoxyCodeLine{02133\ }
\DoxyCodeLine{02134\ \ \ \ \ \textcolor{keywordflow}{if}\ (stbir\_info-\/>ring\_buffer\_begin\_index\ >=\ 0)}
\DoxyCodeLine{02135\ \ \ \ \ \{}
\DoxyCodeLine{02136\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Get\ rid\ of\ whatever\ we\ don't\ need\ anymore.}}
\DoxyCodeLine{02137\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{while}\ (first\_necessary\_scanline\ >\ stbir\_info-\/>ring\_buffer\_first\_scanline)}
\DoxyCodeLine{02138\ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{02139\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (stbir\_info-\/>ring\_buffer\_first\_scanline\ >=\ 0\ \&\&\ stbir\_info-\/>ring\_buffer\_first\_scanline\ <\ stbir\_info-\/>output\_h)}
\DoxyCodeLine{02140\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{02141\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ output\_row\_start\ =\ stbir\_info-\/>ring\_buffer\_first\_scanline\ *\ output\_stride\_bytes;}
\DoxyCodeLine{02142\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}*\ ring\_buffer\_entry\ =\ stbir\_\_get\_ring\_buffer\_entry(ring\_buffer,\ stbir\_info-\/>ring\_buffer\_begin\_index,\ ring\_buffer\_length);}
\DoxyCodeLine{02143\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ stbir\_\_encode\_scanline(stbir\_info,\ output\_w,\ (\textcolor{keywordtype}{char}\ *)\ output\_data\ +\ output\_row\_start,\ ring\_buffer\_entry,\ channels,\ alpha\_channel,\ decode);}
\DoxyCodeLine{02144\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ STBIR\_PROGRESS\_REPORT((\textcolor{keywordtype}{float})stbir\_info-\/>ring\_buffer\_first\_scanline\ /\ stbir\_info-\/>output\_h);}
\DoxyCodeLine{02145\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{02146\ }
\DoxyCodeLine{02147\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (stbir\_info-\/>ring\_buffer\_first\_scanline\ ==\ stbir\_info-\/>ring\_buffer\_last\_scanline)}
\DoxyCodeLine{02148\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{02149\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ We\ just\ popped\ the\ last\ scanline\ off\ the\ ring\ buffer.}}
\DoxyCodeLine{02150\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Reset\ it\ to\ the\ empty\ state.}}
\DoxyCodeLine{02151\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ stbir\_info-\/>ring\_buffer\_begin\_index\ =\ -\/1;}
\DoxyCodeLine{02152\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ stbir\_info-\/>ring\_buffer\_first\_scanline\ =\ 0;}
\DoxyCodeLine{02153\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ stbir\_info-\/>ring\_buffer\_last\_scanline\ =\ 0;}
\DoxyCodeLine{02154\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{break};}
\DoxyCodeLine{02155\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{02156\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{02157\ \ \ \ \ \ \ \ \ \ \ \ \ \{}
\DoxyCodeLine{02158\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ stbir\_info-\/>ring\_buffer\_first\_scanline++;}
\DoxyCodeLine{02159\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ stbir\_info-\/>ring\_buffer\_begin\_index\ =\ (stbir\_info-\/>ring\_buffer\_begin\_index\ +\ 1)\ \%\ stbir\_info-\/>ring\_buffer\_num\_entries;}
\DoxyCodeLine{02160\ \ \ \ \ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{02161\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{02162\ \ \ \ \ \}}
\DoxyCodeLine{02163\ \}}
\DoxyCodeLine{02164\ }
\DoxyCodeLine{02165\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ stbir\_\_buffer\_loop\_downsample(stbir\_\_info*\ stbir\_info)}
\DoxyCodeLine{02166\ \{}
\DoxyCodeLine{02167\ \ \ \ \ \textcolor{keywordtype}{int}\ y;}
\DoxyCodeLine{02168\ \ \ \ \ \textcolor{keywordtype}{float}\ scale\_ratio\ =\ stbir\_info-\/>vertical\_scale;}
\DoxyCodeLine{02169\ \ \ \ \ \textcolor{keywordtype}{int}\ output\_h\ =\ stbir\_info-\/>output\_h;}
\DoxyCodeLine{02170\ \ \ \ \ \textcolor{keywordtype}{float}\ in\_pixels\_radius\ =\ stbir\_\_filter\_info\_table[stbir\_info-\/>vertical\_filter].support(scale\_ratio)\ /\ scale\_ratio;}
\DoxyCodeLine{02171\ \ \ \ \ \textcolor{keywordtype}{int}\ pixel\_margin\ =\ stbir\_info-\/>vertical\_filter\_pixel\_margin;}
\DoxyCodeLine{02172\ \ \ \ \ \textcolor{keywordtype}{int}\ max\_y\ =\ stbir\_info-\/>input\_h\ +\ pixel\_margin;}
\DoxyCodeLine{02173\ }
\DoxyCodeLine{02174\ \ \ \ \ STBIR\_ASSERT(!stbir\_\_use\_height\_upsampling(stbir\_info));}
\DoxyCodeLine{02175\ }
\DoxyCodeLine{02176\ \ \ \ \ \textcolor{keywordflow}{for}\ (y\ =\ -\/pixel\_margin;\ y\ <\ max\_y;\ y++)}
\DoxyCodeLine{02177\ \ \ \ \ \{}
\DoxyCodeLine{02178\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ out\_center\_of\_in;\ \textcolor{comment}{//\ Center\ of\ the\ current\ out\ scanline\ in\ the\ in\ scanline\ space}}
\DoxyCodeLine{02179\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ out\_first\_scanline,\ out\_last\_scanline;}
\DoxyCodeLine{02180\ }
\DoxyCodeLine{02181\ \ \ \ \ \ \ \ \ stbir\_\_calculate\_sample\_range\_downsample(y,\ in\_pixels\_radius,\ scale\_ratio,\ stbir\_info-\/>vertical\_shift,\ \&out\_first\_scanline,\ \&out\_last\_scanline,\ \&out\_center\_of\_in);}
\DoxyCodeLine{02182\ }
\DoxyCodeLine{02183\ \ \ \ \ \ \ \ \ STBIR\_ASSERT(out\_last\_scanline\ -\/\ out\_first\_scanline\ +\ 1\ <=\ stbir\_info-\/>ring\_buffer\_num\_entries);}
\DoxyCodeLine{02184\ }
\DoxyCodeLine{02185\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (out\_last\_scanline\ <\ 0\ ||\ out\_first\_scanline\ >=\ output\_h)}
\DoxyCodeLine{02186\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{continue};}
\DoxyCodeLine{02187\ }
\DoxyCodeLine{02188\ \ \ \ \ \ \ \ \ stbir\_\_empty\_ring\_buffer(stbir\_info,\ out\_first\_scanline);}
\DoxyCodeLine{02189\ }
\DoxyCodeLine{02190\ \ \ \ \ \ \ \ \ stbir\_\_decode\_and\_resample\_downsample(stbir\_info,\ y);}
\DoxyCodeLine{02191\ }
\DoxyCodeLine{02192\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Load\ in\ new\ ones.}}
\DoxyCodeLine{02193\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (stbir\_info-\/>ring\_buffer\_begin\_index\ <\ 0)}
\DoxyCodeLine{02194\ \ \ \ \ \ \ \ \ \ \ \ \ stbir\_\_add\_empty\_ring\_buffer\_entry(stbir\_info,\ out\_first\_scanline);}
\DoxyCodeLine{02195\ }
\DoxyCodeLine{02196\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{while}\ (out\_last\_scanline\ >\ stbir\_info-\/>ring\_buffer\_last\_scanline)}
\DoxyCodeLine{02197\ \ \ \ \ \ \ \ \ \ \ \ \ stbir\_\_add\_empty\_ring\_buffer\_entry(stbir\_info,\ stbir\_info-\/>ring\_buffer\_last\_scanline\ +\ 1);}
\DoxyCodeLine{02198\ }
\DoxyCodeLine{02199\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Now\ the\ horizontal\ buffer\ is\ ready\ to\ write\ to\ all\ ring\ buffer\ rows.}}
\DoxyCodeLine{02200\ \ \ \ \ \ \ \ \ stbir\_\_resample\_vertical\_downsample(stbir\_info,\ y);}
\DoxyCodeLine{02201\ \ \ \ \ \}}
\DoxyCodeLine{02202\ }
\DoxyCodeLine{02203\ \ \ \ \ stbir\_\_empty\_ring\_buffer(stbir\_info,\ stbir\_info-\/>output\_h);}
\DoxyCodeLine{02204\ \}}
\DoxyCodeLine{02205\ }
\DoxyCodeLine{02206\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ stbir\_\_setup(stbir\_\_info\ *info,\ \textcolor{keywordtype}{int}\ input\_w,\ \textcolor{keywordtype}{int}\ input\_h,\ \textcolor{keywordtype}{int}\ output\_w,\ \textcolor{keywordtype}{int}\ output\_h,\ \textcolor{keywordtype}{int}\ channels)}
\DoxyCodeLine{02207\ \{}
\DoxyCodeLine{02208\ \ \ \ \ info-\/>input\_w\ =\ input\_w;}
\DoxyCodeLine{02209\ \ \ \ \ info-\/>input\_h\ =\ input\_h;}
\DoxyCodeLine{02210\ \ \ \ \ info-\/>output\_w\ =\ output\_w;}
\DoxyCodeLine{02211\ \ \ \ \ info-\/>output\_h\ =\ output\_h;}
\DoxyCodeLine{02212\ \ \ \ \ info-\/>channels\ =\ channels;}
\DoxyCodeLine{02213\ \}}
\DoxyCodeLine{02214\ }
\DoxyCodeLine{02215\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ stbir\_\_calculate\_transform(stbir\_\_info\ *info,\ \textcolor{keywordtype}{float}\ s0,\ \textcolor{keywordtype}{float}\ t0,\ \textcolor{keywordtype}{float}\ s1,\ \textcolor{keywordtype}{float}\ t1,\ \textcolor{keywordtype}{float}\ *transform)}
\DoxyCodeLine{02216\ \{}
\DoxyCodeLine{02217\ \ \ \ \ info-\/>s0\ =\ s0;}
\DoxyCodeLine{02218\ \ \ \ \ info-\/>t0\ =\ t0;}
\DoxyCodeLine{02219\ \ \ \ \ info-\/>s1\ =\ s1;}
\DoxyCodeLine{02220\ \ \ \ \ info-\/>t1\ =\ t1;}
\DoxyCodeLine{02221\ }
\DoxyCodeLine{02222\ \ \ \ \ \textcolor{keywordflow}{if}\ (transform)}
\DoxyCodeLine{02223\ \ \ \ \ \{}
\DoxyCodeLine{02224\ \ \ \ \ \ \ \ \ info-\/>horizontal\_scale\ =\ transform[0];}
\DoxyCodeLine{02225\ \ \ \ \ \ \ \ \ info-\/>vertical\_scale\ \ \ =\ transform[1];}
\DoxyCodeLine{02226\ \ \ \ \ \ \ \ \ info-\/>horizontal\_shift\ =\ transform[2];}
\DoxyCodeLine{02227\ \ \ \ \ \ \ \ \ info-\/>vertical\_shift\ \ \ =\ transform[3];}
\DoxyCodeLine{02228\ \ \ \ \ \}}
\DoxyCodeLine{02229\ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{02230\ \ \ \ \ \{}
\DoxyCodeLine{02231\ \ \ \ \ \ \ \ \ info-\/>horizontal\_scale\ =\ ((float)info-\/>output\_w\ /\ info-\/>input\_w)\ /\ (s1\ -\/\ s0);}
\DoxyCodeLine{02232\ \ \ \ \ \ \ \ \ info-\/>vertical\_scale\ =\ ((float)info-\/>output\_h\ /\ info-\/>input\_h)\ /\ (t1\ -\/\ t0);}
\DoxyCodeLine{02233\ }
\DoxyCodeLine{02234\ \ \ \ \ \ \ \ \ info-\/>horizontal\_shift\ =\ s0\ *\ info-\/>output\_w\ /\ (s1\ -\/\ s0);}
\DoxyCodeLine{02235\ \ \ \ \ \ \ \ \ info-\/>vertical\_shift\ =\ t0\ *\ info-\/>output\_h\ /\ (t1\ -\/\ t0);}
\DoxyCodeLine{02236\ \ \ \ \ \}}
\DoxyCodeLine{02237\ \}}
\DoxyCodeLine{02238\ }
\DoxyCodeLine{02239\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{void}\ stbir\_\_choose\_filter(stbir\_\_info\ *info,\ stbir\_filter\ h\_filter,\ stbir\_filter\ v\_filter)}
\DoxyCodeLine{02240\ \{}
\DoxyCodeLine{02241\ \ \ \ \ \textcolor{keywordflow}{if}\ (h\_filter\ ==\ 0)}
\DoxyCodeLine{02242\ \ \ \ \ \ \ \ \ h\_filter\ =\ stbir\_\_use\_upsampling(info-\/>horizontal\_scale)\ ?\ STBIR\_DEFAULT\_FILTER\_UPSAMPLE\ :\ STBIR\_DEFAULT\_FILTER\_DOWNSAMPLE;}
\DoxyCodeLine{02243\ \ \ \ \ \textcolor{keywordflow}{if}\ (v\_filter\ ==\ 0)}
\DoxyCodeLine{02244\ \ \ \ \ \ \ \ \ v\_filter\ =\ stbir\_\_use\_upsampling(info-\/>vertical\_scale)\ \ \ ?\ STBIR\_DEFAULT\_FILTER\_UPSAMPLE\ :\ STBIR\_DEFAULT\_FILTER\_DOWNSAMPLE;}
\DoxyCodeLine{02245\ \ \ \ \ info-\/>horizontal\_filter\ =\ h\_filter;}
\DoxyCodeLine{02246\ \ \ \ \ info-\/>vertical\_filter\ =\ v\_filter;}
\DoxyCodeLine{02247\ \}}
\DoxyCodeLine{02248\ }
\DoxyCodeLine{02249\ \textcolor{keyword}{static}\ stbir\_uint32\ stbir\_\_calculate\_memory(stbir\_\_info\ *info)}
\DoxyCodeLine{02250\ \{}
\DoxyCodeLine{02251\ \ \ \ \ \textcolor{keywordtype}{int}\ pixel\_margin\ =\ stbir\_\_get\_filter\_pixel\_margin(info-\/>horizontal\_filter,\ info-\/>horizontal\_scale);}
\DoxyCodeLine{02252\ \ \ \ \ \textcolor{keywordtype}{int}\ filter\_height\ =\ stbir\_\_get\_filter\_pixel\_width(info-\/>vertical\_filter,\ info-\/>vertical\_scale);}
\DoxyCodeLine{02253\ }
\DoxyCodeLine{02254\ \ \ \ \ info-\/>horizontal\_num\_contributors\ =\ stbir\_\_get\_contributors(info-\/>horizontal\_scale,\ info-\/>horizontal\_filter,\ info-\/>input\_w,\ info-\/>output\_w);}
\DoxyCodeLine{02255\ \ \ \ \ info-\/>vertical\_num\_contributors\ \ \ =\ stbir\_\_get\_contributors(info-\/>vertical\_scale\ \ ,\ info-\/>vertical\_filter\ \ ,\ info-\/>input\_h,\ info-\/>output\_h);}
\DoxyCodeLine{02256\ }
\DoxyCodeLine{02257\ \ \ \ \ \textcolor{comment}{//\ One\ extra\ entry\ because\ floating\ point\ precision\ problems\ sometimes\ cause\ an\ extra\ to\ be\ necessary.}}
\DoxyCodeLine{02258\ \ \ \ \ info-\/>ring\_buffer\_num\_entries\ =\ filter\_height\ +\ 1;}
\DoxyCodeLine{02259\ }
\DoxyCodeLine{02260\ \ \ \ \ info-\/>horizontal\_contributors\_size\ =\ info-\/>horizontal\_num\_contributors\ *\ \textcolor{keyword}{sizeof}(stbir\_\_contributors);}
\DoxyCodeLine{02261\ \ \ \ \ info-\/>horizontal\_coefficients\_size\ =\ stbir\_\_get\_total\_horizontal\_coefficients(info)\ *\ \textcolor{keyword}{sizeof}(float);}
\DoxyCodeLine{02262\ \ \ \ \ info-\/>vertical\_contributors\_size\ =\ info-\/>vertical\_num\_contributors\ *\ \textcolor{keyword}{sizeof}(stbir\_\_contributors);}
\DoxyCodeLine{02263\ \ \ \ \ info-\/>vertical\_coefficients\_size\ =\ stbir\_\_get\_total\_vertical\_coefficients(info)\ *\ \textcolor{keyword}{sizeof}(float);}
\DoxyCodeLine{02264\ \ \ \ \ info-\/>decode\_buffer\_size\ =\ (info-\/>input\_w\ +\ pixel\_margin\ *\ 2)\ *\ info-\/>channels\ *\ \textcolor{keyword}{sizeof}(\textcolor{keywordtype}{float});}
\DoxyCodeLine{02265\ \ \ \ \ info-\/>horizontal\_buffer\_size\ =\ info-\/>output\_w\ *\ info-\/>channels\ *\ \textcolor{keyword}{sizeof}(float);}
\DoxyCodeLine{02266\ \ \ \ \ info-\/>ring\_buffer\_size\ =\ info-\/>output\_w\ *\ info-\/>channels\ *\ info-\/>ring\_buffer\_num\_entries\ *\ \textcolor{keyword}{sizeof}(float);}
\DoxyCodeLine{02267\ \ \ \ \ info-\/>encode\_buffer\_size\ =\ info-\/>output\_w\ *\ info-\/>channels\ *\ \textcolor{keyword}{sizeof}(float);}
\DoxyCodeLine{02268\ }
\DoxyCodeLine{02269\ \ \ \ \ STBIR\_ASSERT(info-\/>horizontal\_filter\ !=\ 0);}
\DoxyCodeLine{02270\ \ \ \ \ STBIR\_ASSERT(info-\/>horizontal\_filter\ <\ STBIR\_\_ARRAY\_SIZE(stbir\_\_filter\_info\_table));\ \textcolor{comment}{//\ this\ now\ happens\ too\ late}}
\DoxyCodeLine{02271\ \ \ \ \ STBIR\_ASSERT(info-\/>vertical\_filter\ !=\ 0);}
\DoxyCodeLine{02272\ \ \ \ \ STBIR\_ASSERT(info-\/>vertical\_filter\ <\ STBIR\_\_ARRAY\_SIZE(stbir\_\_filter\_info\_table));\ \textcolor{comment}{//\ this\ now\ happens\ too\ late}}
\DoxyCodeLine{02273\ }
\DoxyCodeLine{02274\ \ \ \ \ \textcolor{keywordflow}{if}\ (stbir\_\_use\_height\_upsampling(info))}
\DoxyCodeLine{02275\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ The\ horizontal\ buffer\ is\ for\ when\ we're\ downsampling\ the\ height\ and\ we}}
\DoxyCodeLine{02276\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ can't\ output\ the\ result\ of\ sampling\ the\ decode\ buffer\ directly\ into\ the}}
\DoxyCodeLine{02277\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ ring\ buffers.}}
\DoxyCodeLine{02278\ \ \ \ \ \ \ \ \ info-\/>horizontal\_buffer\_size\ =\ 0;}
\DoxyCodeLine{02279\ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{02280\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ The\ encode\ buffer\ is\ to\ retain\ precision\ in\ the\ height\ upsampling\ method}}
\DoxyCodeLine{02281\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ and\ isn't\ used\ when\ height\ downsampling.}}
\DoxyCodeLine{02282\ \ \ \ \ \ \ \ \ info-\/>encode\_buffer\_size\ =\ 0;}
\DoxyCodeLine{02283\ }
\DoxyCodeLine{02284\ \ \ \ \ \textcolor{keywordflow}{return}\ info-\/>horizontal\_contributors\_size\ +\ info-\/>horizontal\_coefficients\_size}
\DoxyCodeLine{02285\ \ \ \ \ \ \ \ \ +\ info-\/>vertical\_contributors\_size\ +\ info-\/>vertical\_coefficients\_size}
\DoxyCodeLine{02286\ \ \ \ \ \ \ \ \ +\ info-\/>decode\_buffer\_size\ +\ info-\/>horizontal\_buffer\_size}
\DoxyCodeLine{02287\ \ \ \ \ \ \ \ \ +\ info-\/>ring\_buffer\_size\ +\ info-\/>encode\_buffer\_size;}
\DoxyCodeLine{02288\ \}}
\DoxyCodeLine{02289\ }
\DoxyCodeLine{02290\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{int}\ stbir\_\_resize\_allocated(stbir\_\_info\ *info,}
\DoxyCodeLine{02291\ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{void}*\ input\_data,\ \textcolor{keywordtype}{int}\ input\_stride\_in\_bytes,}
\DoxyCodeLine{02292\ \ \ \ \ \textcolor{keywordtype}{void}*\ output\_data,\ \textcolor{keywordtype}{int}\ output\_stride\_in\_bytes,}
\DoxyCodeLine{02293\ \ \ \ \ \textcolor{keywordtype}{int}\ alpha\_channel,\ stbir\_uint32\ flags,\ stbir\_datatype\ type,}
\DoxyCodeLine{02294\ \ \ \ \ stbir\_edge\ edge\_horizontal,\ stbir\_edge\ edge\_vertical,\ stbir\_colorspace\ colorspace,}
\DoxyCodeLine{02295\ \ \ \ \ \textcolor{keywordtype}{void}*\ tempmem,\ \textcolor{keywordtype}{size\_t}\ tempmem\_size\_in\_bytes)}
\DoxyCodeLine{02296\ \{}
\DoxyCodeLine{02297\ \ \ \ \ \textcolor{keywordtype}{size\_t}\ memory\_required\ =\ stbir\_\_calculate\_memory(info);}
\DoxyCodeLine{02298\ }
\DoxyCodeLine{02299\ \ \ \ \ \textcolor{keywordtype}{int}\ width\_stride\_input\ =\ input\_stride\_in\_bytes\ ?\ input\_stride\_in\_bytes\ :\ info-\/>channels\ *\ info-\/>input\_w\ *\ stbir\_\_type\_size[type];}
\DoxyCodeLine{02300\ \ \ \ \ \textcolor{keywordtype}{int}\ width\_stride\_output\ =\ output\_stride\_in\_bytes\ ?\ output\_stride\_in\_bytes\ :\ info-\/>channels\ *\ info-\/>output\_w\ *\ stbir\_\_type\_size[type];}
\DoxyCodeLine{02301\ }
\DoxyCodeLine{02302\ \textcolor{preprocessor}{\#ifdef\ STBIR\_DEBUG\_OVERWRITE\_TEST}}
\DoxyCodeLine{02303\ \textcolor{preprocessor}{\#define\ OVERWRITE\_ARRAY\_SIZE\ 8}}
\DoxyCodeLine{02304\ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{char}\ overwrite\_output\_before\_pre[OVERWRITE\_ARRAY\_SIZE];}
\DoxyCodeLine{02305\ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{char}\ overwrite\_tempmem\_before\_pre[OVERWRITE\_ARRAY\_SIZE];}
\DoxyCodeLine{02306\ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{char}\ overwrite\_output\_after\_pre[OVERWRITE\_ARRAY\_SIZE];}
\DoxyCodeLine{02307\ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{char}\ overwrite\_tempmem\_after\_pre[OVERWRITE\_ARRAY\_SIZE];}
\DoxyCodeLine{02308\ }
\DoxyCodeLine{02309\ \ \ \ \ \textcolor{keywordtype}{size\_t}\ begin\_forbidden\ =\ width\_stride\_output\ *\ (info-\/>output\_h\ -\/\ 1)\ +\ info-\/>output\_w\ *\ info-\/>channels\ *\ stbir\_\_type\_size[type];}
\DoxyCodeLine{02310\ \ \ \ \ memcpy(overwrite\_output\_before\_pre,\ \&((\textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{char}*)output\_data)[-\/OVERWRITE\_ARRAY\_SIZE],\ OVERWRITE\_ARRAY\_SIZE);}
\DoxyCodeLine{02311\ \ \ \ \ memcpy(overwrite\_output\_after\_pre,\ \&((\textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{char}*)output\_data)[begin\_forbidden],\ OVERWRITE\_ARRAY\_SIZE);}
\DoxyCodeLine{02312\ \ \ \ \ memcpy(overwrite\_tempmem\_before\_pre,\ \&((\textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{char}*)tempmem)[-\/OVERWRITE\_ARRAY\_SIZE],\ OVERWRITE\_ARRAY\_SIZE);}
\DoxyCodeLine{02313\ \ \ \ \ memcpy(overwrite\_tempmem\_after\_pre,\ \&((\textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{char}*)tempmem)[tempmem\_size\_in\_bytes],\ OVERWRITE\_ARRAY\_SIZE);}
\DoxyCodeLine{02314\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{02315\ }
\DoxyCodeLine{02316\ \ \ \ \ STBIR\_ASSERT(info-\/>channels\ >=\ 0);}
\DoxyCodeLine{02317\ \ \ \ \ STBIR\_ASSERT(info-\/>channels\ <=\ STBIR\_MAX\_CHANNELS);}
\DoxyCodeLine{02318\ }
\DoxyCodeLine{02319\ \ \ \ \ \textcolor{keywordflow}{if}\ (info-\/>channels\ <\ 0\ ||\ info-\/>channels\ >\ STBIR\_MAX\_CHANNELS)}
\DoxyCodeLine{02320\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ 0;}
\DoxyCodeLine{02321\ }
\DoxyCodeLine{02322\ \ \ \ \ STBIR\_ASSERT(info-\/>horizontal\_filter\ <\ STBIR\_\_ARRAY\_SIZE(stbir\_\_filter\_info\_table));}
\DoxyCodeLine{02323\ \ \ \ \ STBIR\_ASSERT(info-\/>vertical\_filter\ <\ STBIR\_\_ARRAY\_SIZE(stbir\_\_filter\_info\_table));}
\DoxyCodeLine{02324\ }
\DoxyCodeLine{02325\ \ \ \ \ \textcolor{keywordflow}{if}\ (info-\/>horizontal\_filter\ >=\ STBIR\_\_ARRAY\_SIZE(stbir\_\_filter\_info\_table))}
\DoxyCodeLine{02326\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ 0;}
\DoxyCodeLine{02327\ \ \ \ \ \textcolor{keywordflow}{if}\ (info-\/>vertical\_filter\ >=\ STBIR\_\_ARRAY\_SIZE(stbir\_\_filter\_info\_table))}
\DoxyCodeLine{02328\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ 0;}
\DoxyCodeLine{02329\ }
\DoxyCodeLine{02330\ \ \ \ \ \textcolor{keywordflow}{if}\ (alpha\_channel\ <\ 0)}
\DoxyCodeLine{02331\ \ \ \ \ \ \ \ \ flags\ |=\ STBIR\_FLAG\_ALPHA\_USES\_COLORSPACE\ |\ STBIR\_FLAG\_ALPHA\_PREMULTIPLIED;}
\DoxyCodeLine{02332\ }
\DoxyCodeLine{02333\ \ \ \ \ \textcolor{keywordflow}{if}\ (!(flags\&STBIR\_FLAG\_ALPHA\_USES\_COLORSPACE)\ ||\ !(flags\&STBIR\_FLAG\_ALPHA\_PREMULTIPLIED))\ \{}
\DoxyCodeLine{02334\ \ \ \ \ \ \ \ \ STBIR\_ASSERT(alpha\_channel\ >=\ 0\ \&\&\ alpha\_channel\ <\ info-\/>channels);}
\DoxyCodeLine{02335\ \ \ \ \ \}}
\DoxyCodeLine{02336\ }
\DoxyCodeLine{02337\ \ \ \ \ \textcolor{keywordflow}{if}\ (alpha\_channel\ >=\ info-\/>channels)}
\DoxyCodeLine{02338\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ 0;}
\DoxyCodeLine{02339\ }
\DoxyCodeLine{02340\ \ \ \ \ STBIR\_ASSERT(tempmem);}
\DoxyCodeLine{02341\ }
\DoxyCodeLine{02342\ \ \ \ \ \textcolor{keywordflow}{if}\ (!tempmem)}
\DoxyCodeLine{02343\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ 0;}
\DoxyCodeLine{02344\ }
\DoxyCodeLine{02345\ \ \ \ \ STBIR\_ASSERT(tempmem\_size\_in\_bytes\ >=\ memory\_required);}
\DoxyCodeLine{02346\ }
\DoxyCodeLine{02347\ \ \ \ \ \textcolor{keywordflow}{if}\ (tempmem\_size\_in\_bytes\ <\ memory\_required)}
\DoxyCodeLine{02348\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ 0;}
\DoxyCodeLine{02349\ }
\DoxyCodeLine{02350\ \ \ \ \ memset(tempmem,\ 0,\ tempmem\_size\_in\_bytes);}
\DoxyCodeLine{02351\ }
\DoxyCodeLine{02352\ \ \ \ \ info-\/>input\_data\ =\ input\_data;}
\DoxyCodeLine{02353\ \ \ \ \ info-\/>input\_stride\_bytes\ =\ width\_stride\_input;}
\DoxyCodeLine{02354\ }
\DoxyCodeLine{02355\ \ \ \ \ info-\/>output\_data\ =\ output\_data;}
\DoxyCodeLine{02356\ \ \ \ \ info-\/>output\_stride\_bytes\ =\ width\_stride\_output;}
\DoxyCodeLine{02357\ }
\DoxyCodeLine{02358\ \ \ \ \ info-\/>alpha\_channel\ =\ alpha\_channel;}
\DoxyCodeLine{02359\ \ \ \ \ info-\/>flags\ =\ flags;}
\DoxyCodeLine{02360\ \ \ \ \ info-\/>type\ =\ type;}
\DoxyCodeLine{02361\ \ \ \ \ info-\/>edge\_horizontal\ =\ edge\_horizontal;}
\DoxyCodeLine{02362\ \ \ \ \ info-\/>edge\_vertical\ =\ edge\_vertical;}
\DoxyCodeLine{02363\ \ \ \ \ info-\/>colorspace\ =\ colorspace;}
\DoxyCodeLine{02364\ }
\DoxyCodeLine{02365\ \ \ \ \ info-\/>horizontal\_coefficient\_width\ \ \ =\ stbir\_\_get\_coefficient\_width\ \ (info-\/>horizontal\_filter,\ info-\/>horizontal\_scale);}
\DoxyCodeLine{02366\ \ \ \ \ info-\/>vertical\_coefficient\_width\ \ \ \ \ =\ stbir\_\_get\_coefficient\_width\ \ (info-\/>vertical\_filter\ \ ,\ info-\/>vertical\_scale\ \ );}
\DoxyCodeLine{02367\ \ \ \ \ info-\/>horizontal\_filter\_pixel\_width\ \ =\ stbir\_\_get\_filter\_pixel\_width\ (info-\/>horizontal\_filter,\ info-\/>horizontal\_scale);}
\DoxyCodeLine{02368\ \ \ \ \ info-\/>vertical\_filter\_pixel\_width\ \ \ \ =\ stbir\_\_get\_filter\_pixel\_width\ (info-\/>vertical\_filter\ \ ,\ info-\/>vertical\_scale\ \ );}
\DoxyCodeLine{02369\ \ \ \ \ info-\/>horizontal\_filter\_pixel\_margin\ =\ stbir\_\_get\_filter\_pixel\_margin(info-\/>horizontal\_filter,\ info-\/>horizontal\_scale);}
\DoxyCodeLine{02370\ \ \ \ \ info-\/>vertical\_filter\_pixel\_margin\ \ \ =\ stbir\_\_get\_filter\_pixel\_margin(info-\/>vertical\_filter\ \ ,\ info-\/>vertical\_scale\ \ );}
\DoxyCodeLine{02371\ }
\DoxyCodeLine{02372\ \ \ \ \ info-\/>ring\_buffer\_length\_bytes\ =\ info-\/>output\_w\ *\ info-\/>channels\ *\ \textcolor{keyword}{sizeof}(float);}
\DoxyCodeLine{02373\ \ \ \ \ info-\/>decode\_buffer\_pixels\ =\ info-\/>input\_w\ +\ info-\/>horizontal\_filter\_pixel\_margin\ *\ 2;}
\DoxyCodeLine{02374\ }
\DoxyCodeLine{02375\ \textcolor{preprocessor}{\#define\ STBIR\_\_NEXT\_MEMPTR(current,\ newtype)\ (newtype*)(((unsigned\ char*)current)\ +\ current\#\#\_size)}}
\DoxyCodeLine{02376\ }
\DoxyCodeLine{02377\ \ \ \ \ info-\/>horizontal\_contributors\ =\ (stbir\_\_contributors\ *)\ tempmem;}
\DoxyCodeLine{02378\ \ \ \ \ info-\/>horizontal\_coefficients\ =\ STBIR\_\_NEXT\_MEMPTR(info-\/>horizontal\_contributors,\ \textcolor{keywordtype}{float});}
\DoxyCodeLine{02379\ \ \ \ \ info-\/>vertical\_contributors\ =\ STBIR\_\_NEXT\_MEMPTR(info-\/>horizontal\_coefficients,\ stbir\_\_contributors);}
\DoxyCodeLine{02380\ \ \ \ \ info-\/>vertical\_coefficients\ =\ STBIR\_\_NEXT\_MEMPTR(info-\/>vertical\_contributors,\ \textcolor{keywordtype}{float});}
\DoxyCodeLine{02381\ \ \ \ \ info-\/>decode\_buffer\ =\ STBIR\_\_NEXT\_MEMPTR(info-\/>vertical\_coefficients,\ \textcolor{keywordtype}{float});}
\DoxyCodeLine{02382\ }
\DoxyCodeLine{02383\ \ \ \ \ \textcolor{keywordflow}{if}\ (stbir\_\_use\_height\_upsampling(info))}
\DoxyCodeLine{02384\ \ \ \ \ \{}
\DoxyCodeLine{02385\ \ \ \ \ \ \ \ \ info-\/>horizontal\_buffer\ =\ NULL;}
\DoxyCodeLine{02386\ \ \ \ \ \ \ \ \ info-\/>ring\_buffer\ =\ STBIR\_\_NEXT\_MEMPTR(info-\/>decode\_buffer,\ \textcolor{keywordtype}{float});}
\DoxyCodeLine{02387\ \ \ \ \ \ \ \ \ info-\/>encode\_buffer\ =\ STBIR\_\_NEXT\_MEMPTR(info-\/>ring\_buffer,\ \textcolor{keywordtype}{float});}
\DoxyCodeLine{02388\ }
\DoxyCodeLine{02389\ \ \ \ \ \ \ \ \ STBIR\_ASSERT((\textcolor{keywordtype}{size\_t})STBIR\_\_NEXT\_MEMPTR(info-\/>encode\_buffer,\ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{char})\ ==\ (\textcolor{keywordtype}{size\_t})tempmem\ +\ tempmem\_size\_in\_bytes);}
\DoxyCodeLine{02390\ \ \ \ \ \}}
\DoxyCodeLine{02391\ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{02392\ \ \ \ \ \{}
\DoxyCodeLine{02393\ \ \ \ \ \ \ \ \ info-\/>horizontal\_buffer\ =\ STBIR\_\_NEXT\_MEMPTR(info-\/>decode\_buffer,\ \textcolor{keywordtype}{float});}
\DoxyCodeLine{02394\ \ \ \ \ \ \ \ \ info-\/>ring\_buffer\ =\ STBIR\_\_NEXT\_MEMPTR(info-\/>horizontal\_buffer,\ \textcolor{keywordtype}{float});}
\DoxyCodeLine{02395\ \ \ \ \ \ \ \ \ info-\/>encode\_buffer\ =\ NULL;}
\DoxyCodeLine{02396\ }
\DoxyCodeLine{02397\ \ \ \ \ \ \ \ \ STBIR\_ASSERT((\textcolor{keywordtype}{size\_t})STBIR\_\_NEXT\_MEMPTR(info-\/>ring\_buffer,\ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{char})\ ==\ (\textcolor{keywordtype}{size\_t})tempmem\ +\ tempmem\_size\_in\_bytes);}
\DoxyCodeLine{02398\ \ \ \ \ \}}
\DoxyCodeLine{02399\ }
\DoxyCodeLine{02400\ \textcolor{preprocessor}{\#undef\ STBIR\_\_NEXT\_MEMPTR}}
\DoxyCodeLine{02401\ }
\DoxyCodeLine{02402\ \ \ \ \ \textcolor{comment}{//\ This\ signals\ that\ the\ ring\ buffer\ is\ empty}}
\DoxyCodeLine{02403\ \ \ \ \ info-\/>ring\_buffer\_begin\_index\ =\ -\/1;}
\DoxyCodeLine{02404\ }
\DoxyCodeLine{02405\ \ \ \ \ stbir\_\_calculate\_filters(info-\/>horizontal\_contributors,\ info-\/>horizontal\_coefficients,\ info-\/>horizontal\_filter,\ info-\/>horizontal\_scale,\ info-\/>horizontal\_shift,\ info-\/>input\_w,\ info-\/>output\_w);}
\DoxyCodeLine{02406\ \ \ \ \ stbir\_\_calculate\_filters(info-\/>vertical\_contributors,\ info-\/>vertical\_coefficients,\ info-\/>vertical\_filter,\ info-\/>vertical\_scale,\ info-\/>vertical\_shift,\ info-\/>input\_h,\ info-\/>output\_h);}
\DoxyCodeLine{02407\ }
\DoxyCodeLine{02408\ \ \ \ \ STBIR\_PROGRESS\_REPORT(0);}
\DoxyCodeLine{02409\ }
\DoxyCodeLine{02410\ \ \ \ \ \textcolor{keywordflow}{if}\ (stbir\_\_use\_height\_upsampling(info))}
\DoxyCodeLine{02411\ \ \ \ \ \ \ \ \ stbir\_\_buffer\_loop\_upsample(info);}
\DoxyCodeLine{02412\ \ \ \ \ \textcolor{keywordflow}{else}}
\DoxyCodeLine{02413\ \ \ \ \ \ \ \ \ stbir\_\_buffer\_loop\_downsample(info);}
\DoxyCodeLine{02414\ }
\DoxyCodeLine{02415\ \ \ \ \ STBIR\_PROGRESS\_REPORT(1);}
\DoxyCodeLine{02416\ }
\DoxyCodeLine{02417\ \textcolor{preprocessor}{\#ifdef\ STBIR\_DEBUG\_OVERWRITE\_TEST}}
\DoxyCodeLine{02418\ \ \ \ \ STBIR\_ASSERT(memcmp(overwrite\_output\_before\_pre,\ \&((\textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{char}*)output\_data)[-\/OVERWRITE\_ARRAY\_SIZE],\ OVERWRITE\_ARRAY\_SIZE)\ ==\ 0);}
\DoxyCodeLine{02419\ \ \ \ \ STBIR\_ASSERT(memcmp(overwrite\_output\_after\_pre,\ \&((\textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{char}*)output\_data)[begin\_forbidden],\ OVERWRITE\_ARRAY\_SIZE)\ ==\ 0);}
\DoxyCodeLine{02420\ \ \ \ \ STBIR\_ASSERT(memcmp(overwrite\_tempmem\_before\_pre,\ \&((\textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{char}*)tempmem)[-\/OVERWRITE\_ARRAY\_SIZE],\ OVERWRITE\_ARRAY\_SIZE)\ ==\ 0);}
\DoxyCodeLine{02421\ \ \ \ \ STBIR\_ASSERT(memcmp(overwrite\_tempmem\_after\_pre,\ \&((\textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{char}*)tempmem)[tempmem\_size\_in\_bytes],\ OVERWRITE\_ARRAY\_SIZE)\ ==\ 0);}
\DoxyCodeLine{02422\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{02423\ }
\DoxyCodeLine{02424\ \ \ \ \ \textcolor{keywordflow}{return}\ 1;}
\DoxyCodeLine{02425\ \}}
\DoxyCodeLine{02426\ }
\DoxyCodeLine{02427\ }
\DoxyCodeLine{02428\ \textcolor{keyword}{static}\ \textcolor{keywordtype}{int}\ stbir\_\_resize\_arbitrary(}
\DoxyCodeLine{02429\ \ \ \ \ \textcolor{keywordtype}{void}\ *alloc\_context,}
\DoxyCodeLine{02430\ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{void}*\ input\_data,\ \textcolor{keywordtype}{int}\ input\_w,\ \textcolor{keywordtype}{int}\ input\_h,\ \textcolor{keywordtype}{int}\ input\_stride\_in\_bytes,}
\DoxyCodeLine{02431\ \ \ \ \ \textcolor{keywordtype}{void}*\ output\_data,\ \textcolor{keywordtype}{int}\ output\_w,\ \textcolor{keywordtype}{int}\ output\_h,\ \textcolor{keywordtype}{int}\ output\_stride\_in\_bytes,}
\DoxyCodeLine{02432\ \ \ \ \ \textcolor{keywordtype}{float}\ s0,\ \textcolor{keywordtype}{float}\ t0,\ \textcolor{keywordtype}{float}\ s1,\ \textcolor{keywordtype}{float}\ t1,\ \textcolor{keywordtype}{float}\ *transform,}
\DoxyCodeLine{02433\ \ \ \ \ \textcolor{keywordtype}{int}\ channels,\ \textcolor{keywordtype}{int}\ alpha\_channel,\ stbir\_uint32\ flags,\ stbir\_datatype\ type,}
\DoxyCodeLine{02434\ \ \ \ \ stbir\_filter\ h\_filter,\ stbir\_filter\ v\_filter,}
\DoxyCodeLine{02435\ \ \ \ \ stbir\_edge\ edge\_horizontal,\ stbir\_edge\ edge\_vertical,\ stbir\_colorspace\ colorspace)}
\DoxyCodeLine{02436\ \{}
\DoxyCodeLine{02437\ \ \ \ \ stbir\_\_info\ info;}
\DoxyCodeLine{02438\ \ \ \ \ \textcolor{keywordtype}{int}\ result;}
\DoxyCodeLine{02439\ \ \ \ \ \textcolor{keywordtype}{size\_t}\ memory\_required;}
\DoxyCodeLine{02440\ \ \ \ \ \textcolor{keywordtype}{void}*\ extra\_memory;}
\DoxyCodeLine{02441\ }
\DoxyCodeLine{02442\ \ \ \ \ stbir\_\_setup(\&info,\ input\_w,\ input\_h,\ output\_w,\ output\_h,\ channels);}
\DoxyCodeLine{02443\ \ \ \ \ stbir\_\_calculate\_transform(\&info,\ s0,t0,s1,t1,transform);}
\DoxyCodeLine{02444\ \ \ \ \ stbir\_\_choose\_filter(\&info,\ h\_filter,\ v\_filter);}
\DoxyCodeLine{02445\ \ \ \ \ memory\_required\ =\ stbir\_\_calculate\_memory(\&info);}
\DoxyCodeLine{02446\ \ \ \ \ extra\_memory\ =\ STBIR\_MALLOC(memory\_required,\ alloc\_context);}
\DoxyCodeLine{02447\ }
\DoxyCodeLine{02448\ \ \ \ \ \textcolor{keywordflow}{if}\ (!extra\_memory)}
\DoxyCodeLine{02449\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ 0;}
\DoxyCodeLine{02450\ }
\DoxyCodeLine{02451\ \ \ \ \ result\ =\ stbir\_\_resize\_allocated(\&info,\ input\_data,\ input\_stride\_in\_bytes,}
\DoxyCodeLine{02452\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ output\_data,\ output\_stride\_in\_bytes,}
\DoxyCodeLine{02453\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ alpha\_channel,\ flags,\ type,}
\DoxyCodeLine{02454\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ edge\_horizontal,\ edge\_vertical,}
\DoxyCodeLine{02455\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ colorspace,\ extra\_memory,\ memory\_required);}
\DoxyCodeLine{02456\ }
\DoxyCodeLine{02457\ \ \ \ \ STBIR\_FREE(extra\_memory,\ alloc\_context);}
\DoxyCodeLine{02458\ }
\DoxyCodeLine{02459\ \ \ \ \ \textcolor{keywordflow}{return}\ result;}
\DoxyCodeLine{02460\ \}}
\DoxyCodeLine{02461\ }
\DoxyCodeLine{02462\ STBIRDEF\ \textcolor{keywordtype}{int}\ stbir\_resize\_uint8(\ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{char}\ *input\_pixels\ ,\ \textcolor{keywordtype}{int}\ input\_w\ ,\ \textcolor{keywordtype}{int}\ input\_h\ ,\ \textcolor{keywordtype}{int}\ input\_stride\_in\_bytes,}
\DoxyCodeLine{02463\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{char}\ *output\_pixels,\ \textcolor{keywordtype}{int}\ output\_w,\ \textcolor{keywordtype}{int}\ output\_h,\ \textcolor{keywordtype}{int}\ output\_stride\_in\_bytes,}
\DoxyCodeLine{02464\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ num\_channels)}
\DoxyCodeLine{02465\ \{}
\DoxyCodeLine{02466\ \ \ \ \ \textcolor{keywordflow}{return}\ stbir\_\_resize\_arbitrary(NULL,\ input\_pixels,\ input\_w,\ input\_h,\ input\_stride\_in\_bytes,}
\DoxyCodeLine{02467\ \ \ \ \ \ \ \ \ output\_pixels,\ output\_w,\ output\_h,\ output\_stride\_in\_bytes,}
\DoxyCodeLine{02468\ \ \ \ \ \ \ \ \ 0,0,1,1,NULL,num\_channels,-\/1,0,\ STBIR\_TYPE\_UINT8,\ STBIR\_FILTER\_DEFAULT,\ STBIR\_FILTER\_DEFAULT,}
\DoxyCodeLine{02469\ \ \ \ \ \ \ \ \ STBIR\_EDGE\_CLAMP,\ STBIR\_EDGE\_CLAMP,\ STBIR\_COLORSPACE\_LINEAR);}
\DoxyCodeLine{02470\ \}}
\DoxyCodeLine{02471\ }
\DoxyCodeLine{02472\ STBIRDEF\ \textcolor{keywordtype}{int}\ stbir\_resize\_float(\ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{float}\ *input\_pixels\ ,\ \textcolor{keywordtype}{int}\ input\_w\ ,\ \textcolor{keywordtype}{int}\ input\_h\ ,\ \textcolor{keywordtype}{int}\ input\_stride\_in\_bytes,}
\DoxyCodeLine{02473\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ *output\_pixels,\ \textcolor{keywordtype}{int}\ output\_w,\ \textcolor{keywordtype}{int}\ output\_h,\ \textcolor{keywordtype}{int}\ output\_stride\_in\_bytes,}
\DoxyCodeLine{02474\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ num\_channels)}
\DoxyCodeLine{02475\ \{}
\DoxyCodeLine{02476\ \ \ \ \ \textcolor{keywordflow}{return}\ stbir\_\_resize\_arbitrary(NULL,\ input\_pixels,\ input\_w,\ input\_h,\ input\_stride\_in\_bytes,}
\DoxyCodeLine{02477\ \ \ \ \ \ \ \ \ output\_pixels,\ output\_w,\ output\_h,\ output\_stride\_in\_bytes,}
\DoxyCodeLine{02478\ \ \ \ \ \ \ \ \ 0,0,1,1,NULL,num\_channels,-\/1,0,\ STBIR\_TYPE\_FLOAT,\ STBIR\_FILTER\_DEFAULT,\ STBIR\_FILTER\_DEFAULT,}
\DoxyCodeLine{02479\ \ \ \ \ \ \ \ \ STBIR\_EDGE\_CLAMP,\ STBIR\_EDGE\_CLAMP,\ STBIR\_COLORSPACE\_LINEAR);}
\DoxyCodeLine{02480\ \}}
\DoxyCodeLine{02481\ }
\DoxyCodeLine{02482\ STBIRDEF\ \textcolor{keywordtype}{int}\ stbir\_resize\_uint8\_srgb(\textcolor{keyword}{const}\ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{char}\ *input\_pixels\ ,\ \textcolor{keywordtype}{int}\ input\_w\ ,\ \textcolor{keywordtype}{int}\ input\_h\ ,\ \textcolor{keywordtype}{int}\ input\_stride\_in\_bytes,}
\DoxyCodeLine{02483\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{char}\ *output\_pixels,\ \textcolor{keywordtype}{int}\ output\_w,\ \textcolor{keywordtype}{int}\ output\_h,\ \textcolor{keywordtype}{int}\ output\_stride\_in\_bytes,}
\DoxyCodeLine{02484\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ num\_channels,\ \textcolor{keywordtype}{int}\ alpha\_channel,\ \textcolor{keywordtype}{int}\ flags)}
\DoxyCodeLine{02485\ \{}
\DoxyCodeLine{02486\ \ \ \ \ \textcolor{keywordflow}{return}\ stbir\_\_resize\_arbitrary(NULL,\ input\_pixels,\ input\_w,\ input\_h,\ input\_stride\_in\_bytes,}
\DoxyCodeLine{02487\ \ \ \ \ \ \ \ \ output\_pixels,\ output\_w,\ output\_h,\ output\_stride\_in\_bytes,}
\DoxyCodeLine{02488\ \ \ \ \ \ \ \ \ 0,0,1,1,NULL,num\_channels,alpha\_channel,flags,\ STBIR\_TYPE\_UINT8,\ STBIR\_FILTER\_DEFAULT,\ STBIR\_FILTER\_DEFAULT,}
\DoxyCodeLine{02489\ \ \ \ \ \ \ \ \ STBIR\_EDGE\_CLAMP,\ STBIR\_EDGE\_CLAMP,\ STBIR\_COLORSPACE\_SRGB);}
\DoxyCodeLine{02490\ \}}
\DoxyCodeLine{02491\ }
\DoxyCodeLine{02492\ STBIRDEF\ \textcolor{keywordtype}{int}\ stbir\_resize\_uint8\_srgb\_edgemode(\textcolor{keyword}{const}\ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{char}\ *input\_pixels\ ,\ \textcolor{keywordtype}{int}\ input\_w\ ,\ \textcolor{keywordtype}{int}\ input\_h\ ,\ \textcolor{keywordtype}{int}\ input\_stride\_in\_bytes,}
\DoxyCodeLine{02493\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{char}\ *output\_pixels,\ \textcolor{keywordtype}{int}\ output\_w,\ \textcolor{keywordtype}{int}\ output\_h,\ \textcolor{keywordtype}{int}\ output\_stride\_in\_bytes,}
\DoxyCodeLine{02494\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ num\_channels,\ \textcolor{keywordtype}{int}\ alpha\_channel,\ \textcolor{keywordtype}{int}\ flags,}
\DoxyCodeLine{02495\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ stbir\_edge\ edge\_wrap\_mode)}
\DoxyCodeLine{02496\ \{}
\DoxyCodeLine{02497\ \ \ \ \ \textcolor{keywordflow}{return}\ stbir\_\_resize\_arbitrary(NULL,\ input\_pixels,\ input\_w,\ input\_h,\ input\_stride\_in\_bytes,}
\DoxyCodeLine{02498\ \ \ \ \ \ \ \ \ output\_pixels,\ output\_w,\ output\_h,\ output\_stride\_in\_bytes,}
\DoxyCodeLine{02499\ \ \ \ \ \ \ \ \ 0,0,1,1,NULL,num\_channels,alpha\_channel,flags,\ STBIR\_TYPE\_UINT8,\ STBIR\_FILTER\_DEFAULT,\ STBIR\_FILTER\_DEFAULT,}
\DoxyCodeLine{02500\ \ \ \ \ \ \ \ \ edge\_wrap\_mode,\ edge\_wrap\_mode,\ STBIR\_COLORSPACE\_SRGB);}
\DoxyCodeLine{02501\ \}}
\DoxyCodeLine{02502\ }
\DoxyCodeLine{02503\ STBIRDEF\ \textcolor{keywordtype}{int}\ stbir\_resize\_uint8\_generic(\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{char}\ *input\_pixels\ ,\ \textcolor{keywordtype}{int}\ input\_w\ ,\ \textcolor{keywordtype}{int}\ input\_h\ ,\ \textcolor{keywordtype}{int}\ input\_stride\_in\_bytes,}
\DoxyCodeLine{02504\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{char}\ *output\_pixels,\ \textcolor{keywordtype}{int}\ output\_w,\ \textcolor{keywordtype}{int}\ output\_h,\ \textcolor{keywordtype}{int}\ output\_stride\_in\_bytes,}
\DoxyCodeLine{02505\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ num\_channels,\ \textcolor{keywordtype}{int}\ alpha\_channel,\ \textcolor{keywordtype}{int}\ flags,}
\DoxyCodeLine{02506\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ stbir\_edge\ edge\_wrap\_mode,\ stbir\_filter\ filter,\ stbir\_colorspace\ space,}
\DoxyCodeLine{02507\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ *alloc\_context)}
\DoxyCodeLine{02508\ \{}
\DoxyCodeLine{02509\ \ \ \ \ \textcolor{keywordflow}{return}\ stbir\_\_resize\_arbitrary(alloc\_context,\ input\_pixels,\ input\_w,\ input\_h,\ input\_stride\_in\_bytes,}
\DoxyCodeLine{02510\ \ \ \ \ \ \ \ \ output\_pixels,\ output\_w,\ output\_h,\ output\_stride\_in\_bytes,}
\DoxyCodeLine{02511\ \ \ \ \ \ \ \ \ 0,0,1,1,NULL,num\_channels,alpha\_channel,flags,\ STBIR\_TYPE\_UINT8,\ filter,\ filter,}
\DoxyCodeLine{02512\ \ \ \ \ \ \ \ \ edge\_wrap\_mode,\ edge\_wrap\_mode,\ space);}
\DoxyCodeLine{02513\ \}}
\DoxyCodeLine{02514\ }
\DoxyCodeLine{02515\ STBIRDEF\ \textcolor{keywordtype}{int}\ stbir\_resize\_uint16\_generic(\textcolor{keyword}{const}\ stbir\_uint16\ *input\_pixels\ \ ,\ \textcolor{keywordtype}{int}\ input\_w\ ,\ \textcolor{keywordtype}{int}\ input\_h\ ,\ \textcolor{keywordtype}{int}\ input\_stride\_in\_bytes,}
\DoxyCodeLine{02516\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ stbir\_uint16\ *output\_pixels\ ,\ \textcolor{keywordtype}{int}\ output\_w,\ \textcolor{keywordtype}{int}\ output\_h,\ \textcolor{keywordtype}{int}\ output\_stride\_in\_bytes,}
\DoxyCodeLine{02517\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ num\_channels,\ \textcolor{keywordtype}{int}\ alpha\_channel,\ \textcolor{keywordtype}{int}\ flags,}
\DoxyCodeLine{02518\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ stbir\_edge\ edge\_wrap\_mode,\ stbir\_filter\ filter,\ stbir\_colorspace\ space,}
\DoxyCodeLine{02519\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ *alloc\_context)}
\DoxyCodeLine{02520\ \{}
\DoxyCodeLine{02521\ \ \ \ \ \textcolor{keywordflow}{return}\ stbir\_\_resize\_arbitrary(alloc\_context,\ input\_pixels,\ input\_w,\ input\_h,\ input\_stride\_in\_bytes,}
\DoxyCodeLine{02522\ \ \ \ \ \ \ \ \ output\_pixels,\ output\_w,\ output\_h,\ output\_stride\_in\_bytes,}
\DoxyCodeLine{02523\ \ \ \ \ \ \ \ \ 0,0,1,1,NULL,num\_channels,alpha\_channel,flags,\ STBIR\_TYPE\_UINT16,\ filter,\ filter,}
\DoxyCodeLine{02524\ \ \ \ \ \ \ \ \ edge\_wrap\_mode,\ edge\_wrap\_mode,\ space);}
\DoxyCodeLine{02525\ \}}
\DoxyCodeLine{02526\ }
\DoxyCodeLine{02527\ }
\DoxyCodeLine{02528\ STBIRDEF\ \textcolor{keywordtype}{int}\ stbir\_resize\_float\_generic(\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{float}\ *input\_pixels\ \ \ \ \ \ \ \ \ ,\ \textcolor{keywordtype}{int}\ input\_w\ ,\ \textcolor{keywordtype}{int}\ input\_h\ ,\ \textcolor{keywordtype}{int}\ input\_stride\_in\_bytes,}
\DoxyCodeLine{02529\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ *output\_pixels\ \ \ \ \ \ \ \ ,\ \textcolor{keywordtype}{int}\ output\_w,\ \textcolor{keywordtype}{int}\ output\_h,\ \textcolor{keywordtype}{int}\ output\_stride\_in\_bytes,}
\DoxyCodeLine{02530\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ num\_channels,\ \textcolor{keywordtype}{int}\ alpha\_channel,\ \textcolor{keywordtype}{int}\ flags,}
\DoxyCodeLine{02531\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ stbir\_edge\ edge\_wrap\_mode,\ stbir\_filter\ filter,\ stbir\_colorspace\ space,}
\DoxyCodeLine{02532\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ *alloc\_context)}
\DoxyCodeLine{02533\ \{}
\DoxyCodeLine{02534\ \ \ \ \ \textcolor{keywordflow}{return}\ stbir\_\_resize\_arbitrary(alloc\_context,\ input\_pixels,\ input\_w,\ input\_h,\ input\_stride\_in\_bytes,}
\DoxyCodeLine{02535\ \ \ \ \ \ \ \ \ output\_pixels,\ output\_w,\ output\_h,\ output\_stride\_in\_bytes,}
\DoxyCodeLine{02536\ \ \ \ \ \ \ \ \ 0,0,1,1,NULL,num\_channels,alpha\_channel,flags,\ STBIR\_TYPE\_FLOAT,\ filter,\ filter,}
\DoxyCodeLine{02537\ \ \ \ \ \ \ \ \ edge\_wrap\_mode,\ edge\_wrap\_mode,\ space);}
\DoxyCodeLine{02538\ \}}
\DoxyCodeLine{02539\ }
\DoxyCodeLine{02540\ }
\DoxyCodeLine{02541\ STBIRDEF\ \textcolor{keywordtype}{int}\ stbir\_resize(\ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{void}\ *input\_pixels\ ,\ \textcolor{keywordtype}{int}\ input\_w\ ,\ \textcolor{keywordtype}{int}\ input\_h\ ,\ \textcolor{keywordtype}{int}\ input\_stride\_in\_bytes,}
\DoxyCodeLine{02542\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ *output\_pixels,\ \textcolor{keywordtype}{int}\ output\_w,\ \textcolor{keywordtype}{int}\ output\_h,\ \textcolor{keywordtype}{int}\ output\_stride\_in\_bytes,}
\DoxyCodeLine{02543\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ stbir\_datatype\ datatype,}
\DoxyCodeLine{02544\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ num\_channels,\ \textcolor{keywordtype}{int}\ alpha\_channel,\ \textcolor{keywordtype}{int}\ flags,}
\DoxyCodeLine{02545\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ stbir\_edge\ edge\_mode\_horizontal,\ stbir\_edge\ edge\_mode\_vertical,}
\DoxyCodeLine{02546\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ stbir\_filter\ filter\_horizontal,\ \ stbir\_filter\ filter\_vertical,}
\DoxyCodeLine{02547\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ stbir\_colorspace\ space,\ \textcolor{keywordtype}{void}\ *alloc\_context)}
\DoxyCodeLine{02548\ \{}
\DoxyCodeLine{02549\ \ \ \ \ \textcolor{keywordflow}{return}\ stbir\_\_resize\_arbitrary(alloc\_context,\ input\_pixels,\ input\_w,\ input\_h,\ input\_stride\_in\_bytes,}
\DoxyCodeLine{02550\ \ \ \ \ \ \ \ \ output\_pixels,\ output\_w,\ output\_h,\ output\_stride\_in\_bytes,}
\DoxyCodeLine{02551\ \ \ \ \ \ \ \ \ 0,0,1,1,NULL,num\_channels,alpha\_channel,flags,\ datatype,\ filter\_horizontal,\ filter\_vertical,}
\DoxyCodeLine{02552\ \ \ \ \ \ \ \ \ edge\_mode\_horizontal,\ edge\_mode\_vertical,\ space);}
\DoxyCodeLine{02553\ \}}
\DoxyCodeLine{02554\ }
\DoxyCodeLine{02555\ }
\DoxyCodeLine{02556\ STBIRDEF\ \textcolor{keywordtype}{int}\ stbir\_resize\_subpixel(\textcolor{keyword}{const}\ \textcolor{keywordtype}{void}\ *input\_pixels\ ,\ \textcolor{keywordtype}{int}\ input\_w\ ,\ \textcolor{keywordtype}{int}\ input\_h\ ,\ \textcolor{keywordtype}{int}\ input\_stride\_in\_bytes,}
\DoxyCodeLine{02557\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ *output\_pixels,\ \textcolor{keywordtype}{int}\ output\_w,\ \textcolor{keywordtype}{int}\ output\_h,\ \textcolor{keywordtype}{int}\ output\_stride\_in\_bytes,}
\DoxyCodeLine{02558\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ stbir\_datatype\ datatype,}
\DoxyCodeLine{02559\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ num\_channels,\ \textcolor{keywordtype}{int}\ alpha\_channel,\ \textcolor{keywordtype}{int}\ flags,}
\DoxyCodeLine{02560\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ stbir\_edge\ edge\_mode\_horizontal,\ stbir\_edge\ edge\_mode\_vertical,}
\DoxyCodeLine{02561\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ stbir\_filter\ filter\_horizontal,\ \ stbir\_filter\ filter\_vertical,}
\DoxyCodeLine{02562\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ stbir\_colorspace\ space,\ \textcolor{keywordtype}{void}\ *alloc\_context,}
\DoxyCodeLine{02563\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ x\_scale,\ \textcolor{keywordtype}{float}\ y\_scale,}
\DoxyCodeLine{02564\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ x\_offset,\ \textcolor{keywordtype}{float}\ y\_offset)}
\DoxyCodeLine{02565\ \{}
\DoxyCodeLine{02566\ \ \ \ \ \textcolor{keywordtype}{float}\ transform[4];}
\DoxyCodeLine{02567\ \ \ \ \ transform[0]\ =\ x\_scale;}
\DoxyCodeLine{02568\ \ \ \ \ transform[1]\ =\ y\_scale;}
\DoxyCodeLine{02569\ \ \ \ \ transform[2]\ =\ x\_offset;}
\DoxyCodeLine{02570\ \ \ \ \ transform[3]\ =\ y\_offset;}
\DoxyCodeLine{02571\ \ \ \ \ \textcolor{keywordflow}{return}\ stbir\_\_resize\_arbitrary(alloc\_context,\ input\_pixels,\ input\_w,\ input\_h,\ input\_stride\_in\_bytes,}
\DoxyCodeLine{02572\ \ \ \ \ \ \ \ \ output\_pixels,\ output\_w,\ output\_h,\ output\_stride\_in\_bytes,}
\DoxyCodeLine{02573\ \ \ \ \ \ \ \ \ 0,0,1,1,transform,num\_channels,alpha\_channel,flags,\ datatype,\ filter\_horizontal,\ filter\_vertical,}
\DoxyCodeLine{02574\ \ \ \ \ \ \ \ \ edge\_mode\_horizontal,\ edge\_mode\_vertical,\ space);}
\DoxyCodeLine{02575\ \}}
\DoxyCodeLine{02576\ }
\DoxyCodeLine{02577\ STBIRDEF\ \textcolor{keywordtype}{int}\ stbir\_resize\_region(\ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{void}\ *input\_pixels\ ,\ \textcolor{keywordtype}{int}\ input\_w\ ,\ \textcolor{keywordtype}{int}\ input\_h\ ,\ \textcolor{keywordtype}{int}\ input\_stride\_in\_bytes,}
\DoxyCodeLine{02578\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{void}\ *output\_pixels,\ \textcolor{keywordtype}{int}\ output\_w,\ \textcolor{keywordtype}{int}\ output\_h,\ \textcolor{keywordtype}{int}\ output\_stride\_in\_bytes,}
\DoxyCodeLine{02579\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ stbir\_datatype\ datatype,}
\DoxyCodeLine{02580\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{int}\ num\_channels,\ \textcolor{keywordtype}{int}\ alpha\_channel,\ \textcolor{keywordtype}{int}\ flags,}
\DoxyCodeLine{02581\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ stbir\_edge\ edge\_mode\_horizontal,\ stbir\_edge\ edge\_mode\_vertical,}
\DoxyCodeLine{02582\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ stbir\_filter\ filter\_horizontal,\ \ stbir\_filter\ filter\_vertical,}
\DoxyCodeLine{02583\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ stbir\_colorspace\ space,\ \textcolor{keywordtype}{void}\ *alloc\_context,}
\DoxyCodeLine{02584\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ s0,\ \textcolor{keywordtype}{float}\ t0,\ \textcolor{keywordtype}{float}\ s1,\ \textcolor{keywordtype}{float}\ t1)}
\DoxyCodeLine{02585\ \{}
\DoxyCodeLine{02586\ \ \ \ \ \textcolor{keywordflow}{return}\ stbir\_\_resize\_arbitrary(alloc\_context,\ input\_pixels,\ input\_w,\ input\_h,\ input\_stride\_in\_bytes,}
\DoxyCodeLine{02587\ \ \ \ \ \ \ \ \ output\_pixels,\ output\_w,\ output\_h,\ output\_stride\_in\_bytes,}
\DoxyCodeLine{02588\ \ \ \ \ \ \ \ \ s0,t0,s1,t1,NULL,num\_channels,alpha\_channel,flags,\ datatype,\ filter\_horizontal,\ filter\_vertical,}
\DoxyCodeLine{02589\ \ \ \ \ \ \ \ \ edge\_mode\_horizontal,\ edge\_mode\_vertical,\ space);}
\DoxyCodeLine{02590\ \}}
\DoxyCodeLine{02591\ }
\DoxyCodeLine{02592\ \textcolor{preprocessor}{\#endif\ }\textcolor{comment}{//\ STB\_IMAGE\_RESIZE\_IMPLEMENTATION}}
\DoxyCodeLine{02593\ }
\DoxyCodeLine{02594\ \textcolor{comment}{/*}}
\DoxyCodeLine{02595\ \textcolor{comment}{-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{02596\ \textcolor{comment}{This\ software\ is\ available\ under\ 2\ licenses\ -\/-\/\ choose\ whichever\ you\ prefer.}}
\DoxyCodeLine{02597\ \textcolor{comment}{-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{02598\ \textcolor{comment}{ALTERNATIVE\ A\ -\/\ MIT\ License}}
\DoxyCodeLine{02599\ \textcolor{comment}{Copyright\ (c)\ 2017\ Sean\ Barrett}}
\DoxyCodeLine{02600\ \textcolor{comment}{Permission\ is\ hereby\ granted,\ free\ of\ charge,\ to\ any\ person\ obtaining\ a\ copy\ of}}
\DoxyCodeLine{02601\ \textcolor{comment}{this\ software\ and\ associated\ documentation\ files\ (the\ "{}Software"{}),\ to\ deal\ in}}
\DoxyCodeLine{02602\ \textcolor{comment}{the\ Software\ without\ restriction,\ including\ without\ limitation\ the\ rights\ to}}
\DoxyCodeLine{02603\ \textcolor{comment}{use,\ copy,\ modify,\ merge,\ publish,\ distribute,\ sublicense,\ and/or\ sell\ copies}}
\DoxyCodeLine{02604\ \textcolor{comment}{of\ the\ Software,\ and\ to\ permit\ persons\ to\ whom\ the\ Software\ is\ furnished\ to\ do}}
\DoxyCodeLine{02605\ \textcolor{comment}{so,\ subject\ to\ the\ following\ conditions:}}
\DoxyCodeLine{02606\ \textcolor{comment}{The\ above\ copyright\ notice\ and\ this\ permission\ notice\ shall\ be\ included\ in\ all}}
\DoxyCodeLine{02607\ \textcolor{comment}{copies\ or\ substantial\ portions\ of\ the\ Software.}}
\DoxyCodeLine{02608\ \textcolor{comment}{THE\ SOFTWARE\ IS\ PROVIDED\ "{}AS\ IS"{},\ WITHOUT\ WARRANTY\ OF\ ANY\ KIND,\ EXPRESS\ OR}}
\DoxyCodeLine{02609\ \textcolor{comment}{IMPLIED,\ INCLUDING\ BUT\ NOT\ LIMITED\ TO\ THE\ WARRANTIES\ OF\ MERCHANTABILITY,}}
\DoxyCodeLine{02610\ \textcolor{comment}{FITNESS\ FOR\ A\ PARTICULAR\ PURPOSE\ AND\ NONINFRINGEMENT.\ IN\ NO\ EVENT\ SHALL\ THE}}
\DoxyCodeLine{02611\ \textcolor{comment}{AUTHORS\ OR\ COPYRIGHT\ HOLDERS\ BE\ LIABLE\ FOR\ ANY\ CLAIM,\ DAMAGES\ OR\ OTHER}}
\DoxyCodeLine{02612\ \textcolor{comment}{LIABILITY,\ WHETHER\ IN\ AN\ ACTION\ OF\ CONTRACT,\ TORT\ OR\ OTHERWISE,\ ARISING\ FROM,}}
\DoxyCodeLine{02613\ \textcolor{comment}{OUT\ OF\ OR\ IN\ CONNECTION\ WITH\ THE\ SOFTWARE\ OR\ THE\ USE\ OR\ OTHER\ DEALINGS\ IN\ THE}}
\DoxyCodeLine{02614\ \textcolor{comment}{SOFTWARE.}}
\DoxyCodeLine{02615\ \textcolor{comment}{-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{02616\ \textcolor{comment}{ALTERNATIVE\ B\ -\/\ Public\ Domain\ (www.unlicense.org)}}
\DoxyCodeLine{02617\ \textcolor{comment}{This\ is\ free\ and\ unencumbered\ software\ released\ into\ the\ public\ domain.}}
\DoxyCodeLine{02618\ \textcolor{comment}{Anyone\ is\ free\ to\ copy,\ modify,\ publish,\ use,\ compile,\ sell,\ or\ distribute\ this}}
\DoxyCodeLine{02619\ \textcolor{comment}{software,\ either\ in\ source\ code\ form\ or\ as\ a\ compiled\ binary,\ for\ any\ purpose,}}
\DoxyCodeLine{02620\ \textcolor{comment}{commercial\ or\ non-\/commercial,\ and\ by\ any\ means.}}
\DoxyCodeLine{02621\ \textcolor{comment}{In\ jurisdictions\ that\ recognize\ copyright\ laws,\ the\ author\ or\ authors\ of\ this}}
\DoxyCodeLine{02622\ \textcolor{comment}{software\ dedicate\ any\ and\ all\ copyright\ interest\ in\ the\ software\ to\ the\ public}}
\DoxyCodeLine{02623\ \textcolor{comment}{domain.\ We\ make\ this\ dedication\ for\ the\ benefit\ of\ the\ public\ at\ large\ and\ to}}
\DoxyCodeLine{02624\ \textcolor{comment}{the\ detriment\ of\ our\ heirs\ and\ successors.\ We\ intend\ this\ dedication\ to\ be\ an}}
\DoxyCodeLine{02625\ \textcolor{comment}{overt\ act\ of\ relinquishment\ in\ perpetuity\ of\ all\ present\ and\ future\ rights\ to}}
\DoxyCodeLine{02626\ \textcolor{comment}{this\ software\ under\ copyright\ law.}}
\DoxyCodeLine{02627\ \textcolor{comment}{THE\ SOFTWARE\ IS\ PROVIDED\ "{}AS\ IS"{},\ WITHOUT\ WARRANTY\ OF\ ANY\ KIND,\ EXPRESS\ OR}}
\DoxyCodeLine{02628\ \textcolor{comment}{IMPLIED,\ INCLUDING\ BUT\ NOT\ LIMITED\ TO\ THE\ WARRANTIES\ OF\ MERCHANTABILITY,}}
\DoxyCodeLine{02629\ \textcolor{comment}{FITNESS\ FOR\ A\ PARTICULAR\ PURPOSE\ AND\ NONINFRINGEMENT.\ IN\ NO\ EVENT\ SHALL\ THE}}
\DoxyCodeLine{02630\ \textcolor{comment}{AUTHORS\ BE\ LIABLE\ FOR\ ANY\ CLAIM,\ DAMAGES\ OR\ OTHER\ LIABILITY,\ WHETHER\ IN\ AN}}
\DoxyCodeLine{02631\ \textcolor{comment}{ACTION\ OF\ CONTRACT,\ TORT\ OR\ OTHERWISE,\ ARISING\ FROM,\ OUT\ OF\ OR\ IN\ CONNECTION}}
\DoxyCodeLine{02632\ \textcolor{comment}{WITH\ THE\ SOFTWARE\ OR\ THE\ USE\ OR\ OTHER\ DEALINGS\ IN\ THE\ SOFTWARE.}}
\DoxyCodeLine{02633\ \textcolor{comment}{-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/-\/}}
\DoxyCodeLine{02634\ \textcolor{comment}{*/}}

\end{DoxyCode}
